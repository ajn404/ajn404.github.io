<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta charset="UTF-8" />
    <title>FLV直播测试</title>
    <script src="http://cdn.shinobi.video/js/flv.min.js"></script>
    <style>
        #controls {
            margin-top: 10px;
        }
        button {
            padding: 10px;
            margin-right: 5px;
            width: 200px;
            font-size: 20px;
        }
    </style>
</head>
<body>
    <video id="videoElement" controls></video>
    <div id="controls">
        <button id="playButton">播放</button>
        <button id="pauseButton">暂停</button>
        <button id="stopButton">停止</button>
        <button id="rewindButton">快退 10 秒</button>
    </div>
    <script>
        const videoElement = document.getElementById("videoElement");
        const playButton = document.getElementById("playButton");
        const pauseButton = document.getElementById("pauseButton");
        const stopButton = document.getElementById("stopButton");
        const rewindButton = document.getElementById("rewindButton");

        let flvPlayer;

        if (flvjs.isSupported()) {
            flvPlayer = flvjs.createPlayer({
                type: "flv",
                isLive: true,
                url: "/flv/1/s.flv",
            });
            flvPlayer.attachMediaElement(videoElement);
            flvPlayer.on("error", (err) => console.log(err));
            flvPlayer.load();

            // 播放按钮事件
            playButton.addEventListener("click", () => flvPlayer.play());

            // 暂停按钮事件
            pauseButton.addEventListener("click", () => flvPlayer.pause());

            // 停止按钮事件
            stopButton.addEventListener("click", () => {
                flvPlayer.pause();
                flvPlayer.unload(); // 卸载播放器
                videoElement.src = ""; // 清空视频源
            });

            // 快退按钮事件
            rewindButton.addEventListener("click", () => rewindCustom(10));

            // 快退自定义时间
            const rewindCustom = (seconds) => {
                videoElement.currentTime = Math.max(0, videoElement.currentTime - seconds);
            };

            // 快退1秒的键盘事件
            document.addEventListener("keydown", (event) => {
                if (event.key === "ArrowLeft") {
                    rewindCustom(1); // 快退1秒
                }
            });
        }
    </script>
</body>
</html>
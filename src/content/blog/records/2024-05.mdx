---
author: ajn404
pubDatetime: 2024-05-01T15:34:51Z
title: 2024å¹´5ğŸˆ·ï¸è®°å½•
featured: false
draft: false
postSlug: 2024-05
tags:
  - "2024"
  - 2024-05
  - javascript
  - é¢è¯•å‡†å¤‡
description: 2024å¹´5ğŸˆ·ï¸è®°å½•
---

## ç›®å½•

## records

å½»åº•æ¬åˆ°åŒ—äº¬äº†

## å›é¡¾åŸºç¡€

åº•å±‚é€»è¾‘ä¾ç„¶æ˜¯è·Ÿç€roadmapèµ°

### js

#### 1.ç®€ä»‹

- æ˜¯ä»€ä¹ˆ
- å†å²
- ç‰ˆæœ¬
- å¦‚ä½•è¿è¡Œ

deno,node,bun

```
bunx shadcn-ui@latest add button
```

#### 2.å…³äºå˜é‡

- å˜é‡å£°æ˜ var let const
- å˜é‡æå‡
- å‘½åè§„åˆ™
- å‡½æ•°ä½œç”¨åŸŸ å— å‡½æ•° å…¨å±€

#### 3.æ•°æ®ç±»å‹

- åŸå§‹æ•°æ®ç±»å‹ string undefined bigint number null Symbol Boolean
- Object
  å†…ç½®Objects ä¾‹å¦‚ String , Number
  ç»§æ‰¿,åŸå‹
  åŸå‹é“¾
- typeof

#### 4.type casting

In programming language, casting is a way of telling the compiler to change an expression or value from one type to another

- æ˜¾å¼ç±»å‹è½¬æ¢
- éšå¼ç±»å‹è½¬æ¢
- ç±»å‹è½¬æ¢vså¼ºåˆ¶ç±»å‹è½¬æ¢

#### 5.æ•°æ®ç»“æ„

<blockquote>
  A Data structure is a format to organize, manage and store data in a way that
  allows efficient access and modification. JavaScript has primitive (built-in)
  and non-primitive (not built-in) data structures. Primitive data structures
  come by default with the programming language and you can implement them out
  of the box (like arrays and objects). Non-primitive data structures donâ€™t come
  by default and you have to code them up if you want to use them.
</blockquote>

- keyé›†åˆ
  Map,WeakMap,Set,WeakSet
- ç»“æ„åŒ–æ•°æ®
  <blockquote>
    Structured data is used by search-engines, like Google, to understand the
    content of the page, as well as to gather information about the web and the
    world in general.
  </blockquote>
  JSON
- ç´¢å¼•é›†åˆ

  - [ç±»å‹åŒ–æ•°ç»„](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Typed_arrays)
    JavaScript ç±»å‹åŒ–æ•°ç»„æ˜¯ä¸€ç§ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡,å¹¶æä¾›äº†ä¸€ç§ç”¨äºåœ¨å†…å­˜ç¼“å†²ä¸­è®¿é—®åŸå§‹äºŒè¿›åˆ¶æ•°æ®çš„æœºåˆ¶.
    è¿™éƒ¨åˆ†æœ‰ç‚¹éš¾,ç¼“å†²å’Œè§†å›¾é‚£é‡Œ,åŸºæœ¬ä¸Šåªä¼šæ‰‹æŠ„åˆ«äººçš„æ¨¡æ¿,è¿™é‡Œçš„mdnæ–‡ç« éœ€è¦**ç²¾è¯»**

  - æ•°ç»„

#### 6.[ç›¸ç­‰æ€§æ¯”è¾ƒ](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Equality_comparisons_and_sameness)

- æ“ä½œç¬¦
  == === Object.is()
- ç›¸ç­‰ç®—æ³•
  IsLooselyEqualï¼š==
  IsStrictlyEqualï¼š===
  SameValueï¼šObject.is()
  SameValueZeroï¼šè¢«è®¸å¤šå†…ç½®è¿ç®—ä½¿ç”¨

  {" "}

  {" "}

  {" "}

  <blockquote>
    é€šå¸¸æƒ…å†µä¸‹,å”¯ä¸€éœ€è¦å…³æ³¨ Object.is
    å¯¹é›¶çš„ç‰¹æ®Šè¡Œä¸ºçš„æ—¶æœºæ˜¯åœ¨å®æ–½ç‰¹å®šçš„å…ƒç¼–ç¨‹èŒƒå¼æ—¶,ç‰¹åˆ«æ˜¯æ¶‰åŠå±æ€§æè¿°ç¬¦æ—¶,å½“ä½ çš„å·¥ä½œéœ€è¦é•œåƒ
    Object.defineProperty çš„æŸäº›ç‰¹æ€§æ—¶.å¦‚æœä½ çš„ç”¨ä¾‹ä¸éœ€è¦è¿™æ ·åš,å»ºè®®é¿å…ä½¿ç”¨
    Object.is,è€Œæ”¹ç”¨ ===.å³ä½¿ä½ çš„è¦æ±‚æ¶‰åŠå°†ä¸¤ä¸ª NaN å€¼ä¹‹é—´çš„æ¯”è¾ƒè®¡ç®—ä¸º
    true,é€šå¸¸ç‰¹æ®Šå¤„ç† NaN æ£€æŸ¥ï¼ˆä½¿ç”¨å…ˆå‰ç‰ˆæœ¬çš„ ECMAScript ä¸­æä¾›çš„ isNaN
    æ–¹æ³•ï¼‰æ¯”è§£å†³ç›¸å…³è®¡ç®—å¦‚ä½•å½±å“é›¶çš„ç¬¦å·æ›´ä¸ºç®€å•.
  </blockquote>

#### 7.å¾ªç¯å’Œéå†

- for
- do while
- while
- conditional statements ifelse/Switch
- for in
- for of
- break/continue
  [labeled statements](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/label)

#### 8.control flow

- Conditional Statements

  if/else Switch

- Exception Handling å¼‚å¸¸å¤„ç†
  throw

  try/Catch/finally

  Utilizing Error Objects åˆ©ç”¨é”™è¯¯å¯¹è±¡

  Erroræ„é€ å‡½æ•°:

  AggregateError èšåˆé”™è¯¯

  EvalError EvalErrorï¼ˆè¯„ä¼°é”™è¯¯ï¼‰

  InternalError å†…éƒ¨é”™è¯¯

  RangeError èŒƒå›´é”™è¯¯

  ReferenceError å¼•ç”¨é”™è¯¯

  SyntaxError è¯­æ³•é”™è¯¯

```js
try {
  willGiveErrorSometime();
} catch (error) {
  if (error instanceof RangeError) {
    rangeErrorHandler(error);
  } else if (error instanceof ReferenceError) {
    referenceErrorHandle(error);
  } else {
    errorHandler(error);
  }
}
```

#### 9.[è¡¨è¾¾å¼ä¸è¿ç®—ç¬¦](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Expressions_and_Operators)

è¿™é‡Œåªè®°ä¸€äº›ä¹‹å‰ä¸çŸ¥é“çš„/è®°ä¸å¤ªæ¸…æ¥šçš„ï¼š

- delete

```js
delete Math.PI; // returns false (cannot delete predefined properties)
```

```js
var trees = new Array("redwood", "bay", "cedar", "oak", "maple");
delete trees[3];
if (3 in trees) {
  // ä¸ä¼šè¢«æ‰§è¡Œ
}
```

```js
var trees = new Array("redwood", "bay", "cedar", "oak", "maple");
trees[3] = undefined;
if (3 in trees) {
  // this gets executedï¼ˆä¼šè¢«æ‰§è¡Œï¼‰
}
```

- typeof

```js
typeof null === "object";
typeof undefined === "undefined";
```

- void

ä½ å¯ä»¥ä½¿ç”¨ void è¿ç®—ç¬¦æŒ‡æ˜ä¸€ä¸ªè¶…æ–‡æœ¬é“¾æ¥.è¯¥è¡¨è¾¾å¼æ˜¯æœ‰æ•ˆçš„,ä½†æ˜¯å¹¶ä¸ä¼šåœ¨å½“å‰æ–‡æ¡£ä¸­è¿›è¡ŒåŠ è½½.

å¦‚ä¸‹åˆ›å»ºäº†ä¸€ä¸ªè¶…é“¾æ¥æ–‡æœ¬,å½“ç”¨æˆ·å•å‡»è¯¥æ–‡æœ¬æ—¶,ä¸ä¼šæœ‰ä»»ä½•æ•ˆæœ.

```html
<a href="javascript:void(0)">Click here to do nothing</a>
```

ä¸‹é¢çš„ä»£ç åˆ›å»ºäº†ä¸€ä¸ªè¶…é“¾æ¥,å½“ç”¨æˆ·å•å‡»å®ƒæ—¶,æäº¤ä¸€ä¸ªè¡¨å•.

```html
<a href="javascript:void(document.form.submit())">Click here to submit</a>
```

- this
  æŒ‡ä»£å½“å‰çš„å¯¹è±¡

```js
function validate(obj, lowval, hival) {
  if (obj.value < lowval || obj.value > hival) console.log("Invalid Value!");
}
```

```html
<p>Enter a number between 18 and 99:</p>
<input type="text" name="age" size="3" onChange="validate(this, 18, 99);" />
```

- æ•°å€¼æ¨å¯¼(å®éªŒæ€§)

```js
[for (i of [ 1, 2, 3 ]) i*i ];
// [ 1, 4, 9 ]

var abc = [ "A", "B", "C" ];
[for (letters of abc) letters.toLowerCase()];
// [ "a", "b", "c" ]

```

Comprehensions ç‰¹æ€§è¢«è®¸å¤šç¼–ç¨‹è¯­è¨€æ‰€é‡‡ç”¨,è¯¥ç‰¹æ€§èƒ½å¤Ÿä½¿ä½ å¿«é€Ÿåœ°é€šè¿‡ä¸€ä¸ªå·²æœ‰çš„æ•°ç»„æ¥åˆ›å»ºå‡ºä¸€ä¸ªæ–°çš„æ•°ç»„

#### 10.å‡½æ•°

- å£°æ˜ä»¥åŠè°ƒç”¨
- å‡½æ•°ä¼ å‚ [é»˜è®¤å‚æ•°](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Default_parameters)/[å‰©ä½™å‚æ•°](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters)
- arrow function
- IIFE ç«‹å³è°ƒç”¨å‡½æ•°è¡¨è¾¾å¼
- Argumentså¯¹è±¡

```js
// ES2015
const args = Array.from(arguments);
const args = [...arguments];
```

```js
function myConcat(separator) {
  var args = Array.prototype.slice.call(arguments, 1);
  return args.join(separator);
}

myConcat.apply(null, ["-", ";", "."]);
```

- ä½œç”¨åŸŸä¸å‡½æ•°[è°ƒç”¨æ ˆ](https://developer.mozilla.org/zh-CN/docs/Glossary/Call_stack)

<blockquote>
  <p>
    è°ƒç”¨æ ˆæ˜¯è§£é‡Šå™¨ï¼ˆæ¯”å¦‚ Web æµè§ˆå™¨ä¸­çš„ JavaScript
    è§£é‡Šå™¨ï¼‰ç”¨æ¥è¿½è¸ªå…¶åœ¨è°ƒç”¨å¤šä¸ªå‡½æ•°çš„è„šæœ¬ä¸­æ‰€å¤„ä½ç½®çš„æœºåˆ¶â€”â€”å½“å‰æ­£åœ¨è¿è¡Œçš„å‡½æ•°æ˜¯å“ªä¸€ä¸ª,ä»¥åŠåœ¨è¯¥å‡½æ•°å†…éƒ¨è°ƒç”¨äº†å“ªäº›å‡½æ•°,ç­‰ç­‰.
  </p>
  <p>
    å½“è„šæœ¬è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶,è§£é‡Šå™¨å°±ä¼šæŠŠè¯¥å‡½æ•°æ·»åŠ è¿›è°ƒç”¨æ ˆ,ç„¶åå¼€å§‹æ‰§è¡Œè¿™ä¸ªå‡½æ•°.
    æ­£åœ¨è°ƒç”¨æ ˆä¸­æ‰§è¡Œçš„å‡½æ•°è°ƒç”¨çš„å…¶ä»–ä»»ä½•å‡½æ•°ä¹Ÿå°†ä¼šè¢«æ·»åŠ è¿›è°ƒç”¨æ ˆ.ä¸€æ—¦è¿™ä¸ªå‡½æ•°è¢«è°ƒç”¨,ä¾¿ä¼šç«‹å³æ‰§è¡Œ.
    å½“å‰å‡½æ•°æ‰§è¡Œå®Œæ¯•å,è§£é‡Šå™¨å°†å…¶æ¸…å‡ºè°ƒç”¨æ ˆ,ç»§ç»­æ‰§è¡Œå½“å‰æ‰§è¡Œç¯å¢ƒä¸‹çš„å‰©ä½™çš„ä»£ç .
    å½“åˆ†é…çš„è°ƒç”¨æ ˆç©ºé—´è¢«å æ»¡æ—¶,ä¼šå¼•å‘â€œå †æ ˆæº¢å‡ºâ€é”™è¯¯.
  </p>
</blockquote>
é€’å½’/è¯æ³•ä½œç”¨åŸŸ/é—­åŒ…

- å†…ç½®å‡½æ•°

#### 11.[ä¸¥æ ¼æ¨¡å¼](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Strict_mode)

#### 12.ä½¿ç”¨thiså…³é”®å­—

### react

#### 1.cli tools

vite/create react app

#### 2.components

##### class components

```js
import React, { Component } from "react";

interface LifecycleExampleState {
  counter: number;
}

class LifecycleExample extends Component<{}, LifecycleExampleState> {
  constructor(props: {}) {
    super(props);
    this.state = {
      counter: 0,
    };
    console.log("Constructor");
  }

  static getDerivedStateFromProps(
    nextProps: {},
    nextState: LifecycleExampleState
  ) {
    console.log("getDerivedStateFromProps", nextProps, nextState);
    return null;
  }

  componentDidMount() {
    console.log("componentDidMount");
  }

  shouldComponentUpdate(nextProps: {}, nextState: LifecycleExampleState) {
    console.log("shouldComponentUpdate", nextProps, nextState);
    return true;
  }

  getSnapshotBeforeUpdate(prevProps: {}, prevState: LifecycleExampleState) {
    console.log("getSnapshotBeforeUpdate", prevProps, prevState);
    return null;
  }

  componentDidUpdate(
    prevProps: {},
    prevState: LifecycleExampleState,
    snapshot: null
  ) {
    console.log("componentDidUpdate", prevProps, prevState, snapshot);
  }

  componentWillUnmount() {
    console.log("componentWillUnmount");
  }

  static getDerivedStateFromError(error: Error) {
    console.log("getDerivedStateFromError", error);
    return null;
  }

  componentDidCatch(error: Error, info: React.ErrorInfo) {
    console.log("componentDidCatch", error, info);
  }

  handleIncrement = () => {
    this.setState(prevState => ({
      counter: prevState.counter + 1,
    }));
  };

  render() {
    console.log("Render");
    return (
      <div>
        <h1>Counter: {this.state.counter}</h1>
        <button onClick={this.handleIncrement}>Increment</button>
      </div>
    );
  }
}

export default LifecycleExample;

```

##### å‡½æ•°å¼ç»„ä»¶

```jsx
import React, { useState, useEffect, useReducer } from "react";

interface LifecycleExampleProps {
  initialCounter: number;
}

interface LifecycleExampleState {
  counter: number;
}

type Action = { type: "increment" } | { type: "decrement" };

const counterReducer = (
  state: LifecycleExampleState,
  action: Action
): LifecycleExampleState => {
  switch (action.type) {
    case "increment":
      return { ...state, counter: state.counter + 1 };
    case "decrement":
      return { ...state, counter: state.counter - 1 };
    default:
      return state;
  }
};

const LifecycleExample: React.FC<LifecycleExampleProps> = ({
  initialCounter,
}) => {
  const [state, dispatch] = useReducer(counterReducer, {
    counter: initialCounter,
  });

  useEffect(() => {
    console.log("Component Did Mount");

    return () => {
      console.log("Component Will Unmount");
    };
  }, []); // Empty dependency array means it runs once on mount and once on unmount

  useEffect(() => {
    console.log("Counter Value Changed:", state.counter);
  }, [state.counter]); // Runs whenever counter value changes

  const handleIncrement = () => {
    dispatch({ type: "increment" });
  };

  const handleDecrement = () => {
    dispatch({ type: "decrement" });
  };

  console.log("Render");

  return (
    <div>
      <h1>Counter: {state.counter}</h1>
      <button onClick={handleIncrement}>Increment</button>
      <button onClick={handleDecrement}>Decrement</button>
    </div>
  );
};

export default LifecycleExample;

```

##### ç»„ä»¶åŸºç¡€:

- jsx(javascript xml)

```jsx
const jsx = <h1>This is JSX</h1>;
```

`React.createElement(type, [props], [...children])`
=>

```json
{
  "type": "h1",
  "props": {
    "children": "This is JSX"
  }
}
```

```jsx
class JSXDemo extends React.Component {
  render() {
    const jsx = <h1>This is JSX</h1>;
    console.log(jsx);
    return jsx;
  }
}

ReactDOM.render(<JSXDemo />, document.getElementById("root"));
```

- props vs state

ä¸€ä¸ªæ˜¯ä¼ é€’ç»™ç»„ä»¶çš„,ä¸€ä¸ªæ˜¯åœ¨ç»„ä»¶å†…éƒ¨è¿›è¡Œç®¡ç†çš„
ä½¿ç”¨propsä¼ é€’çˆ¶ç»„ä»¶æ§åˆ¶çš„æ•°æ®å’Œå›è°ƒå‡½æ•°,ç¡®ä¿å­ç»„ä»¶çš„è¡Œä¸ºç”±çˆ¶ç»„ä»¶æ§åˆ¶.
ä½¿ç”¨stateç®¡ç†ç»„ä»¶å†…éƒ¨çš„çŠ¶æ€å’Œæ•°æ®,ç¡®ä¿ç»„ä»¶èƒ½å¤Ÿæ ¹æ®ç”¨æˆ·äº¤äº’æˆ–å…¶ä»–å†…éƒ¨é€»è¾‘åŠ¨æ€æ›´æ–°.

- æ¡ä»¶æ¸²æŸ“
- Composition vs Inheritance

  <blockquote>
    åœ¨Reactä¸­,ç»„ä»¶ä¹‹é—´çš„ä»£ç å¤ç”¨ä¸»è¦é€šè¿‡ç»„åˆï¼ˆCompositionï¼‰æ¥å®ç°,è€Œä¸æ˜¯ç»§æ‰¿ï¼ˆInheritanceï¼‰.Reactå›¢é˜Ÿå»ºè®®ä½¿ç”¨ç»„åˆè€Œä¸æ˜¯ç»§æ‰¿æ¥å®ç°ç»„ä»¶çš„å¤ç”¨,å› ä¸ºç»„åˆæ›´ç¬¦åˆReactçš„è®¾è®¡å“²å­¦,å³"ç»„åˆä¼˜äºç»§æ‰¿".
  </blockquote>
  ç»§æ‰¿ä¼šå¯¼è‡´ç»„ä»¶ä¹‹é—´çš„è€¦åˆåº¦æ›´é«˜,ä¸åˆ©äºä»£ç çš„å¤ç”¨å’Œç»´æŠ¤.

##### ç»„ä»¶æ¸²æŸ“

- ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ
  ä½¿ç”¨ useEffect æ¨¡æ‹Ÿç”Ÿå‘½å‘¨æœŸæ–¹æ³•

```jsx
import React, { useState, useEffect } from "react";

function MyFunctionComponent() {
  const [count, setCount] = useState(0);

  useEffect(() => {
    // componentDidMount å’Œ componentDidUpdate çš„ç»„åˆ
    console.log(`Count has been updated to: ${count}`);

    return () => {
      // componentWillUnmount
      console.log("Cleanup");
    };
  }, [count]); // åªæœ‰ count æ”¹å˜æ—¶æ‰ä¼šè§¦å‘

  const incrementCount = () => {
    setCount(prevCount => prevCount + 1);
  };

  return (
    <div>
      <p>Count: {count}</p>
      <button onClick={incrementCount}>Increment</button>
    </div>
  );
}

export default MyFunctionComponent;
```

- Lists and Keys
- render props

  [React Render Props](https://www.robinwieruch.de/react-render-props/)
  é€šè¿‡ä¸€ä¸ªå€¼ä¸ºå‡½æ•°çš„ prop åŠ¨æ€å†³å®šç»„ä»¶æ¸²æŸ“å†…å®¹çš„æŠ€æœ¯
  æŒ‡ä¸€ä¸ªç”¨äºå‘ŠçŸ¥ç»„ä»¶è¯¥æ¸²æŸ“ä»€ä¹ˆå†…å®¹çš„å‡½æ•° prop.é€šè¿‡è¿™ç§æ¨¡å¼,å¯ä»¥åœ¨ä¸ä½¿ç”¨é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰æˆ– context çš„æƒ…å†µä¸‹å…±äº«ç»„ä»¶é€»è¾‘

ä¾‹å¦‚

```tsx
import React, { Component, type ReactNode } from "react";

// å®šä¹‰ Mouse ç»„ä»¶çš„ props ç±»å‹
interface MouseProps {
  render: (state: MouseState) => ReactNode;
}

// å®šä¹‰ Mouse ç»„ä»¶çš„ state ç±»å‹
interface MouseState {
  x: number;
  y: number;
}

class Mouse extends Component<MouseProps, MouseState> {
  constructor(props: MouseProps) {
    super(props);
    this.state = { x: 0, y: 0 };
    this.handleMouseMove = this.handleMouseMove.bind(this);
  }

  handleMouseMove(event: React.MouseEvent<HTMLDivElement>) {
    this.setState({
      x: event.clientX,
      y: event.clientY,
    });
  }

  render() {
    return (
      <div style={{ height: "100vh" }} onMouseMove={this.handleMouseMove}>
        {this.props.render(this.state)}
      </div>
    );
  }
}

export default Mouse;
```

ä½¿ç”¨

```tsx
import Mouse from "./mouse";

function App() {
  return (
    <div>
      <p>Move the mouse around!</p>
      <Mouse
        render={({ x, y }) => (
          <p>
            The current mouse position is ({x}, {y})
          </p>
        )}
      />
    </div>
  );
}

export default App;
```

ç»“æœ

import RenderProps from "@components/react/features/renderProps";

<RenderProps client:load />

- Refs

```tsx
import React, { useRef, useEffect } from "react";

function MyComponent() {
  const myRef = useRef(null);

  useEffect(() => {
    myRef.current.focus(); // è·å–ç„¦ç‚¹
  }, []);

  return <input ref={myRef} />;
}
```

ç±»ç»„ä»¶ä¸­

```tsx
import React, { Component } from "react";

class MyComponent extends Component {
  constructor(props) {
    super(props);
    this.myRef = React.createRef();
  }

  componentDidMount() {
    this.myRef.current.focus(); // è·å–ç„¦ç‚¹
  }

  render() {
    return <input ref={this.myRef} />;
  }
}
```

- Events

SyntheticEvent =>äº‹ä»¶å¤„ç†å‡½æ•°

Reactä½¿ç”¨åˆæˆäº‹ä»¶è€Œä¸æ˜¯åŸç”ŸDOMäº‹ä»¶,å› æ­¤æŸäº›ç‰¹æ€§å¯èƒ½ä¸åŸç”ŸDOMäº‹ä»¶æœ‰æ‰€ä¸åŒï¼ˆä¾‹å¦‚,äº‹ä»¶å§”æ‰˜ï¼‰

åœ¨ä½¿ç”¨å‡½æ•°ç»„ä»¶æ—¶,äº‹ä»¶å¤„ç†å‡½æ•°å¯ä»¥ç›´æ¥ä½œä¸º JSX ä¸­çš„ç®­å¤´å‡½æ•°å®šä¹‰,è€Œä¸éœ€è¦å°†å®ƒä»¬ä½œä¸ºç±»æ–¹æ³•æ¥å®šä¹‰.

åˆæˆäº‹ä»¶å¯¹è±¡åœ¨æ¯æ¬¡äº‹ä»¶è§¦å‘æ—¶éƒ½ä¼šè¢«é‡ç”¨,å› æ­¤å¦‚æœä½ æƒ³åœ¨å¼‚æ­¥ä»£ç ä¸­è®¿é—®åˆæˆäº‹ä»¶å±æ€§,éœ€è¦åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­è°ƒç”¨ event.persist() æ–¹æ³•,ä»¥ç¡®ä¿äº‹ä»¶å¯¹è±¡åœ¨å¼‚æ­¥ä»£ç ä¸­ä»ç„¶å¯ç”¨.

demo:

```jsx
import React, { Component } from "react";

class MyComponent extends Component {
  handleClick = event => {
    console.log("Button clicked!");
  };

  render() {
    return <button onClick={this.handleClick}>Click me</button>;
  }
}

export default MyComponent;
```

- High Order Components

  é«˜é˜¶ç»„ä»¶ï¼ˆHigher Order Components,HOCï¼‰æ˜¯ä¸€ç§ç”¨äºå¢å¼ºç»„ä»¶åŠŸèƒ½çš„æ¨¡å¼.å®ƒæ˜¯ä¸€ä¸ªå‡½æ•°,æ¥å—ä¸€ä¸ªç»„ä»¶ä½œä¸ºå‚æ•°,å¹¶è¿”å›ä¸€ä¸ªæ–°çš„ç»„ä»¶.é€šè¿‡é«˜é˜¶ç»„ä»¶,ä½ å¯ä»¥åœ¨ä¸ä¿®æ”¹åŸå§‹ç»„ä»¶ä»£ç çš„æƒ…å†µä¸‹,æ·»åŠ æ–°çš„åŠŸèƒ½æˆ–ä¿®æ”¹ç°æœ‰åŠŸèƒ½.

  demo

```jsx
import React from "react";

function withLogger(WrappedComponent) {
  return class extends React.Component {
    componentDidMount() {
      console.log("Component is mounted");
    }

    render() {
      return <WrappedComponent {...this.props} />;
    }
  };
}

// ä½¿ç”¨é«˜é˜¶ç»„ä»¶å¢å¼ºç»„ä»¶åŠŸèƒ½
const EnhancedComponent = withLogger(MyComponent);
```

ä»¥ä¸‹æ˜¯ä¸€ä¸ªæ›´å…·ä½“çš„ç¤ºä¾‹,æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨é«˜é˜¶ç»„ä»¶æ¥æ·»åŠ èº«ä»½éªŒè¯åŠŸèƒ½ï¼š

```jsx
import React from "react";

// å®šä¹‰ä¸€ä¸ªé«˜é˜¶ç»„ä»¶,ç”¨äºèº«ä»½éªŒè¯
function withAuthorization(WrappedComponent) {
  return class extends React.Component {
    componentDidMount() {
      // æ¨¡æ‹Ÿæ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²ç™»å½•
      const isAuthenticated = true;
      if (!isAuthenticated) {
        // å¦‚æœç”¨æˆ·æœªç™»å½•,åˆ™é‡å®šå‘åˆ°ç™»å½•é¡µé¢
        this.props.history.push("/login");
      }
    }

    render() {
      return <WrappedComponent {...this.props} />;
    }
  };
}

// åˆ›å»ºä¸€ä¸ªéœ€è¦èº«ä»½éªŒè¯çš„ç»„ä»¶
class MyProtectedComponent extends React.Component {
  render() {
    return <div>Protected content</div>;
  }
}

// ä½¿ç”¨é«˜é˜¶ç»„ä»¶å¢å¼ºç»„ä»¶åŠŸèƒ½
const EnhancedComponent = withAuthorization(MyProtectedComponent);
```

##### å‹¾å­ hooks

1. basic hooks
   useState/useEffect

2. è‡ªå®šä¹‰hooks
3. common hooks

##### Routersè·¯ç”±æ§åˆ¶

react router/reach router

#### æºç å­¦ä¹ 

- React ä¸å†ä½¿ç”¨ requestIdleCallback,è€Œæ”¹ç”¨ scheduler åŒ…æ¥ç®¡ç†ä»»åŠ¡è°ƒåº¦,è¿™æ˜¯å› ä¸º scheduler åŒ…æä¾›äº†æ›´å¼ºå¤§å’Œç²¾ç¡®çš„ä»»åŠ¡è°ƒåº¦åŠŸèƒ½,æ”¯æŒä»»åŠ¡ä¼˜å…ˆçº§ç®¡ç†,èƒ½å¤Ÿæ›´å¥½åœ°ä¼˜åŒ–ä»»åŠ¡æ‰§è¡Œé¡ºåºå’Œæ€§èƒ½
-

##### é—®é¢˜è§£å†³,è¯¦ç»†è§[reactç›¸å…³](/posts/react)

1.react17ä¹‹å‰jsxæ–‡ä»¶ä¸ºä»€ä¹ˆè¦å£°æ˜import React from 'react',ä¹‹åä¸ºä»€ä¹ˆä¸éœ€è¦äº†<br/>
åœ¨ React 17 ä¹‹å‰,æ˜¾å¼å¼•å…¥ React æ˜¯ä¸ºäº†ç¡®ä¿ JSX è¢«æ­£ç¡®ç¼–è¯‘ä¸º React.createElement è°ƒç”¨.è€Œåœ¨ React 17 ä¹‹å,é€šè¿‡å¼•å…¥æ–°çš„ JSX è½¬æ¢åŠŸèƒ½,ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å¤„ç†æ‰€éœ€çš„å¼•å…¥<br/>
2.jsxå’ŒFiberæœ‰ä»€ä¹ˆå…³ç³»<br/>
JSX æ˜¯ç”¨äºç¼–å†™ç»„ä»¶çš„è¯­æ³•ç³–,è€Œ Fiber æ˜¯ç”¨äºä¼˜åŒ– React åº”ç”¨æ€§èƒ½çš„åº•å±‚æœºåˆ¶<br/>
3.Fiberæ˜¯ä»€ä¹ˆ,å®ƒä¸ºä»€ä¹ˆèƒ½æé«˜æ€§èƒ½<br/>
Fiber æ˜¯ä¸€ç§é‡æ–°å®ç°çš„åè°ƒç®—æ³•,æ—¨åœ¨å¢å¼º React å¤„ç† UI æ›´æ–°çš„èƒ½åŠ›.<br/>
å®ƒå°†æ›´æ–°å·¥ä½œåˆ†æˆæ›´å°çš„ä»»åŠ¡å•å…ƒ,å¯ä»¥åœ¨éœ€è¦æ—¶ä¸­æ–­å’Œæ¢å¤è¿™äº›ä»»åŠ¡,ä»è€Œæé«˜å“åº”èƒ½åŠ›.<br/>
4.componentDidMountå’ŒuseEffectçš„åŒºåˆ«æ˜¯ä»€ä¹ˆ<br/><br/>
**ä½¿ç”¨åœºæ™¯**ï¼š<br/><br/>

componentDidMount åªèƒ½åœ¨ç±»ç»„ä»¶ä¸­ä½¿ç”¨.<br/>
useEffect åªèƒ½åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨.<br/><br/>
**ä¾èµ–ç®¡ç†**ï¼š<br/><br/>

componentDidMount åªä¼šåœ¨ç»„ä»¶æŒ‚è½½åæ‰§è¡Œä¸€æ¬¡.<br/>
useEffect é»˜è®¤åœ¨æ¯æ¬¡æ¸²æŸ“åéƒ½ä¼šæ‰§è¡Œ,ä½†å¯ä»¥é€šè¿‡ä¾èµ–æ•°ç»„æ¥æ§åˆ¶å…¶æ‰§è¡Œæ—¶æœº.å¦‚æœä¾èµ–æ•°ç»„ä¸ºç©ºï¼ˆ[]ï¼‰,å®ƒçš„è¡Œä¸ºç±»ä¼¼äº componentDidMount,åªåœ¨ç»„ä»¶æŒ‚è½½åæ‰§è¡Œä¸€æ¬¡.<br/><br/>
**æ¸…ç†å‰¯ä½œç”¨**ï¼š<br/><br/>

componentDidMount æœ¬èº«æ²¡æœ‰æ¸…ç†å‰¯ä½œç”¨çš„æœºåˆ¶,éœ€è¦åœ¨ componentWillUnmount æ–¹æ³•ä¸­å¤„ç†æ¸…ç†é€»è¾‘.<br/>
useEffect å¯ä»¥ç›´æ¥è¿”å›ä¸€ä¸ªæ¸…ç†å‡½æ•°,åœ¨ç»„ä»¶å¸è½½æˆ–è€…ä¾èµ–é¡¹å˜åŒ–æ—¶è‡ªåŠ¨æ‰§è¡Œè¯¥æ¸…ç†å‡½æ•°.<br/>

5.schedulerä¸fiber

<details>
<summary>åŒºåˆ«ä¸è”ç³»</summary>

React çš„ Scheduler å’Œ Fiber æ˜¯ä¸¤ä¸ªä¸åŒä½†ç›¸äº’å…³è”çš„ç»„ä»¶,å®ƒä»¬åœ¨ React åº”ç”¨ä¸­æ‰®æ¼”äº†ä¸åŒçš„è§’è‰²,åˆ†åˆ«è´Ÿè´£ä»»åŠ¡è°ƒåº¦å’Œç»„ä»¶æ›´æ–°.ä»¥ä¸‹æ˜¯å®ƒä»¬çš„åŒºåˆ«ä¸è”ç³»çš„è¯¦ç»†è§£é‡Šï¼š

Fiber

å®šä¹‰å’Œä½œç”¨ï¼š

- **Fiber æ˜¯ React çš„æ–°çš„åè°ƒå¼•æ“**,å®ƒé‡æ–°è®¾è®¡äº† React çš„æ ¸å¿ƒç®—æ³•,ç”¨äºæ›´é«˜æ•ˆåœ°ç®¡ç†ç»„ä»¶æ›´æ–°å’Œæ¸²æŸ“.
- **æ ¸å¿ƒç›®æ ‡**ï¼šé€šè¿‡åˆ†å‰²å¯ä¸­æ–­çš„å·¥ä½œå•å…ƒæ¥æé«˜ React çš„æ€§èƒ½,ä½¿å¾—æ¸²æŸ“è¿‡ç¨‹èƒ½å¤Ÿè¢«ä¸­æ–­å’Œæ¢å¤,ä»è€Œä¿æŒåº”ç”¨çš„å“åº”æ€§.

ä¸»è¦ç‰¹æ€§ï¼š

1. **æ—¶é—´åˆ†ç‰‡**ï¼šå°†æ¸²æŸ“å·¥ä½œæ‹†åˆ†æˆå¤šä¸ªå°ä»»åŠ¡,å¯ä»¥åœ¨ä¸»çº¿ç¨‹ç©ºé—²æ—¶æ‰§è¡Œè¿™äº›ä»»åŠ¡.
2. **ä¼˜å…ˆçº§ç®¡ç†**ï¼šæ”¯æŒå¯¹ä¸åŒä»»åŠ¡åˆ†é…ä¸åŒçš„ä¼˜å…ˆçº§,é«˜ä¼˜å…ˆçº§ä»»åŠ¡ï¼ˆå¦‚ç”¨æˆ·äº¤äº’ï¼‰ä¼šè¢«ä¼˜å…ˆå¤„ç†.
3. **å¢é‡æ¸²æŸ“**ï¼šå…è®¸åœ¨æ›´æ–°è¿‡ç¨‹ä¸­ä¸­æ–­å¹¶æ¢å¤ä»»åŠ¡,å‡å°‘é•¿æ—¶é—´çš„ä¸»çº¿ç¨‹é˜»å¡,æå‡ç”¨æˆ·ä½“éªŒ.
4. **é“¾è¡¨ç»“æ„**ï¼šä½¿ç”¨é“¾è¡¨ç»“æ„æ¥ç»„ç»‡å’Œéå†ç»„ä»¶æ ‘ä¸­çš„ Fiber èŠ‚ç‚¹,ä½¿ä»»åŠ¡è°ƒåº¦æ›´åŠ çµæ´»å’Œé«˜æ•ˆ.

Scheduler

å®šä¹‰å’Œä½œç”¨ï¼š

- **Scheduler æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åŒ…**,ç”¨äºä»»åŠ¡çš„è°ƒåº¦å’Œä¼˜å…ˆçº§ç®¡ç†.
- **æ ¸å¿ƒç›®æ ‡**ï¼šæä¾›ä¸€ä¸ªé«˜æ•ˆçš„ä»»åŠ¡è°ƒåº¦æœºåˆ¶,ç¡®ä¿é«˜ä¼˜å…ˆçº§ä»»åŠ¡èƒ½å¤ŸåŠæ—¶æ‰§è¡Œ,è€Œä½ä¼˜å…ˆçº§ä»»åŠ¡åœ¨ä¸»çº¿ç¨‹ç©ºé—²æ—¶å¤„ç†.

ä¸»è¦ç‰¹æ€§ï¼š

1. **ä»»åŠ¡ä¼˜å…ˆçº§**ï¼šæ”¯æŒå°†ä»»åŠ¡åˆ†ä¸ºä¸åŒçš„ä¼˜å…ˆçº§,å¦‚ Immediateï¼ˆç«‹å³ï¼‰ã€User-blockingï¼ˆç”¨æˆ·é˜»å¡ï¼‰ã€Normalï¼ˆæ™®é€šï¼‰ã€Lowï¼ˆä½ï¼‰å’Œ Idleï¼ˆç©ºé—²ï¼‰.
2. **æ—¶é—´åˆ†ç‰‡**ï¼šè°ƒåº¦å™¨å¯ä»¥åœ¨æ—¶é—´ç‰‡å†…æ‰§è¡Œä»»åŠ¡,å¹¶åœ¨æ¯ä¸ªæ—¶é—´ç‰‡ç»“æŸåå°†æ§åˆ¶æƒäº¤è¿˜ç»™æµè§ˆå™¨,ä»è€Œé¿å…é•¿æ—¶é—´é˜»å¡ä¸»çº¿ç¨‹.
3. **ä»»åŠ¡è°ƒåº¦**ï¼šè°ƒåº¦å™¨æ ¹æ®ä»»åŠ¡çš„ä¼˜å…ˆçº§å’Œè¿‡

æœŸæ—¶é—´ï¼ˆdeadlineï¼‰æ¥å†³å®šä½•æ—¶æ‰§è¡Œå“ªäº›ä»»åŠ¡,ç¡®ä¿é«˜ä¼˜å…ˆçº§ä»»åŠ¡ä¼˜å…ˆå¾—åˆ°å¤„ç†.

Fiber å’Œ Scheduler çš„è”ç³»ä¸åŒºåˆ«

è”ç³»

1. **ç›®æ ‡ä¸€è‡´**ï¼š

   - **æé«˜æ€§èƒ½å’Œå“åº”æ€§**ï¼šFiber å’Œ Scheduler éƒ½æ—¨åœ¨æé«˜ React åº”ç”¨çš„æ€§èƒ½å’Œå“åº”æ€§.Fiber é€šè¿‡å¢é‡æ¸²æŸ“å’Œæ—¶é—´åˆ†ç‰‡å®ç°,è€Œ Scheduler é€šè¿‡é«˜æ•ˆçš„ä»»åŠ¡è°ƒåº¦å’Œä¼˜å…ˆçº§ç®¡ç†å®ç°.

2. **ååŒå·¥ä½œ**ï¼š
   - **Fiber ä½¿ç”¨ Scheduler è¿›è¡Œä»»åŠ¡è°ƒåº¦**ï¼šåœ¨ React åº”ç”¨ä¸­,Fiber å¼•æ“ä¼šå°†éœ€è¦æ‰§è¡Œçš„å·¥ä½œå•å…ƒæäº¤ç»™ Scheduler,ç”± Scheduler æ¥å†³å®šè¿™äº›å·¥ä½œå•å…ƒçš„æ‰§è¡Œæ—¶æœºå’Œé¡ºåº.
   - **åè°ƒä»»åŠ¡æ‰§è¡Œ**ï¼šScheduler è´Ÿè´£ç®¡ç†ä»»åŠ¡çš„è°ƒåº¦,è€Œ Fiber è´Ÿè´£å…·ä½“çš„åè°ƒå’Œæ¸²æŸ“å·¥ä½œ.ä¸¤è€…ååŒå·¥ä½œ,å…±åŒå®ç°é«˜æ•ˆçš„ç»„ä»¶æ›´æ–°å’Œæ¸²æŸ“.

åŒºåˆ«

1. **èŒè´£ä¸åŒ**ï¼š

   - **Fiber**ï¼šä¸»è¦è´Ÿè´£ç»„ä»¶æ ‘çš„åè°ƒå’Œæ¸²æŸ“.å®ƒä½¿ç”¨é“¾è¡¨ç»“æ„æ¥ç»„ç»‡ç»„ä»¶,å¹¶é€šè¿‡æ—¶é—´åˆ†ç‰‡å’Œå¢é‡æ¸²æŸ“æ¥ä¼˜åŒ–æ›´æ–°è¿‡ç¨‹.
   - **Scheduler**ï¼šä¸»è¦è´Ÿè´£ä»»åŠ¡çš„è°ƒåº¦å’Œä¼˜å…ˆçº§ç®¡ç†.å®ƒæ ¹æ®ä»»åŠ¡çš„ä¼˜å…ˆçº§å’Œè¿‡æœŸæ—¶é—´æ¥å®‰æ’ä»»åŠ¡çš„æ‰§è¡Œ,ä»¥ç¡®ä¿é«˜ä¼˜å…ˆçº§ä»»åŠ¡å¾—åˆ°åŠæ—¶å¤„ç†.

2. **å®ç°å±‚çº§**ï¼š
   - **Fiber æ˜¯ React çš„å†…éƒ¨æœºåˆ¶**ï¼šFiber æ˜¯ React çš„æ ¸å¿ƒå¼•æ“éƒ¨åˆ†,ç›´æ¥ç®¡ç†ç»„ä»¶æ ‘çš„æ›´æ–°å’Œæ¸²æŸ“.
   - **Scheduler æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ä»»åŠ¡è°ƒåº¦åº“**ï¼šScheduler å¯ä»¥ç‹¬ç«‹äº React ä½¿ç”¨,ç”¨äºä»»ä½•éœ€è¦é«˜æ•ˆä»»åŠ¡è°ƒåº¦çš„åœºæ™¯.å®ƒæä¾›äº†åŸºç¡€è®¾æ–½,ä½¿ Fiber å¯ä»¥æ›´çµæ´»åœ°è¿›è¡Œä»»åŠ¡ç®¡ç†.

ç¤ºä¾‹è¯´æ˜

å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªéœ€è¦é«˜é¢‘æ›´æ–°çš„åŠ¨ç”»ç»„ä»¶,åŒæ—¶è¿˜æœ‰ä¸€äº›ç”¨æˆ·äº¤äº’ä»»åŠ¡ï¼ˆå¦‚æŒ‰é’®ç‚¹å‡»ï¼‰.ä¸‹é¢æ˜¯ Fiber å’Œ Scheduler å¦‚ä½•ååŒå·¥ä½œçš„ç¤ºä¾‹ï¼š

1. **åŠ¨ç”»ä»»åŠ¡**ï¼ˆä½ä¼˜å…ˆçº§ï¼‰å’Œ **ç”¨æˆ·äº¤äº’ä»»åŠ¡**ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰è¢«æäº¤ç»™ Fiber.
2. Fiber å°†è¿™äº›ä»»åŠ¡æŒ‰ä¼˜å…ˆçº§å’Œä¾èµ–å…³ç³»ç»„ç»‡æˆ Fiber èŠ‚ç‚¹,å¹¶ä½¿ç”¨ Scheduler æ¥è°ƒåº¦è¿™äº›ä»»åŠ¡çš„æ‰§è¡Œ.

```javascript
import {
  unstable_scheduleCallback as scheduleCallback,
  unstable_NormalPriority as NormalPriority,
  unstable_UserBlockingPriority as UserBlockingPriority,
} from "scheduler";

// åŠ¨ç”»ä»»åŠ¡
function startAnimation() {
  scheduleCallback(NormalPriority, () => {
    // åŠ¨ç”»é€»è¾‘
    console.log("Animating...");
  });
}

// ç”¨æˆ·äº¤äº’ä»»åŠ¡
function handleClick() {
  scheduleCallback(UserBlockingPriority, () => {
    // ç”¨æˆ·äº¤äº’é€»è¾‘
    console.log("Button clicked!");
  });
}

// åœ¨ç»„ä»¶æŒ‚è½½æ—¶å¯åŠ¨åŠ¨ç”»
useEffect(() => {
  startAnimation();
}, []);

// åœ¨æŒ‰é’®ç‚¹å‡»æ—¶å¤„ç†ç”¨æˆ·äº¤äº’
<button onClick={handleClick}>Click me</button>;
```

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼š

- åŠ¨ç”»ä»»åŠ¡è¢«è®¾ä¸º `NormalPriority`,å› æ­¤åœ¨ä¸»çº¿ç¨‹ç©ºé—²æ—¶æ‰§è¡Œ.
- ç”¨æˆ·äº¤äº’ä»»åŠ¡è¢«è®¾ä¸º `UserBlockingPriority`,ç¡®ä¿åœ¨ç”¨æˆ·ç‚¹å‡»æŒ‰é’®æ—¶èƒ½å¤ŸåŠæ—¶å“åº”.

æ€»ç»“

- **Fiber å’Œ Scheduler çš„åŒºåˆ«**åœ¨äºå®ƒä»¬çš„èŒè´£å’Œå®ç°å±‚çº§ï¼šFiber æ˜¯ React å†…éƒ¨çš„åè°ƒå¼•æ“,è´Ÿè´£ç»„ä»¶æ ‘çš„æ›´æ–°å’Œæ¸²æŸ“ï¼›Scheduler æ˜¯ç‹¬ç«‹çš„ä»»åŠ¡è°ƒåº¦åº“,è´Ÿè´£ä»»åŠ¡çš„ä¼˜å…ˆçº§ç®¡ç†å’Œè°ƒåº¦.
- **Fiber å’Œ Scheduler çš„è”ç³»**åœ¨äºå®ƒä»¬çš„ååŒå·¥ä½œï¼šFiber é€šè¿‡ Scheduler æ¥é«˜æ•ˆåœ°è°ƒåº¦å’Œç®¡ç†ä»»åŠ¡,ç¡®ä¿ React åº”ç”¨çš„é«˜æ€§èƒ½å’Œå“åº”æ€§.é€šè¿‡è¿™ç§åä½œ,React èƒ½å¤Ÿæ›´å¥½åœ°å¤„ç†å¤æ‚çš„ç”¨æˆ·ç•Œé¢æ›´æ–°å’Œäº¤äº’æ“ä½œ.

</details>

### è®¡ç®—æœºç½‘ç»œ

## tips/å°çŸ¥è¯†

- in

```js
const car = { make: "Honda", model: "Accord", year: 1998 };

console.log("make" in car);
// Expected output: true

delete car.make;
if ("make" in car === false) {
  car.make = "Suzuki";
}

console.log(car.make);
// Expected output: "Suzuki"
```

- ??

Nullish coalescing operator ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦

```js
0 ?? 42; //0
null ?? "some"; //some
```

<blockquote>
  ??åªåœ¨ç¬¬ä¸€ä¸ªæ“ä½œæ•°ä¸ºnull æˆ– undefined æ—¶ï¼ˆè€Œä¸æ˜¯å…¶ä»–å‡å€¼ï¼‰è¿”å›ç¬¬äºŒä¸ªæ“ä½œæ•°
</blockquote>

## é“¾æ¥

[<div class="p-10 m-10 text-lg indent-3.5 text-center stroke-card-foreground hover:no-underline">æ›´å¤šçŸ¥è¯†,è¯·çœ‹ä¸‹æœˆè®°å½•</div>](/posts/2024-06)

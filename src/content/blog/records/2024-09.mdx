---
author: ajn404
pubDatetime: 2024-09-04T05:44:43Z
title: 2024å¹´9æœˆ
postSlug: 2024-09
tags:
  - "2024"
  - "2024-09"
  - driver
  - english
description: ä¸Šä¸ªæœˆä¸ç®—ï¼Œå…«æœˆå…¬å¸çš„æ´»æœ‰ç‚¹å¤šï¼Œè¿™ä¸ªæœˆé‡æ¥
---

import DriverNoText from "@components/react/little/driverNoText.tsx";
import Tag from "@components/astro/UI/Tag.astro";

<blockquote class="xing-cao p-0 m-0 leading-none text-right">
  ç›®å‡»ä¼—ç¥æ­»äº¡çš„è‰åŸä¸Šé‡èŠ±ä¸€ç‰‡
  <br />
  ã€€ã€€è¿œåœ¨è¿œæ–¹çš„é£æ¯”è¿œæ–¹æ›´è¿œ
  <br />
  ã€€ã€€æˆ‘çš„ç´å£°å‘œå’½æ³ªæ°´å…¨æ— 
  <br />
  ã€€ã€€æˆ‘æŠŠè¿™è¿œæ–¹çš„è¿œå½’è¿˜è‰åŸ
  <br />
  ã€€ã€€ä¸€ä¸ªå«æœ¨å¤´ä¸€ä¸ªå«é©¬å°¾
  <br />
  ã€€ã€€æˆ‘çš„ç´å£°å‘œå’½æ³ªæ°´å…¨æ— 
  <br />
  ã€€ã€€è¿œæ–¹åªæœ‰åœ¨æ­»äº¡ä¸­å‡èšé‡èŠ±ä¸€ç‰‡
  <br />
  ã€€ã€€æ˜æœˆå¦‚é•œé«˜æ‚¬è‰åŸæ˜ ç…§åƒå¹´å²æœˆ
  <br />
  ã€€ã€€æˆ‘çš„ç´å£°å‘œå’½æ³ªæ°´å…¨æ— 
  <br />
  ã€€ã€€åªèº«æ‰“é©¬è¿‡è‰åŸ
  <br />
</blockquote>

## ç›®å½•

## 2024-09-04 14:06:14

<Tag name="ts" className="max-w-[100px]" />

[ts5.6 RC æ–°ç‰¹æ€§](https://devblogs.microsoft.com/typescript/announcing-typescript-5-6-rc/#disallowed-nullish-and-truthy-checks)

## 2024-09-18 10:32:06

<details>
<summary>view transition api</summary>
**View Transition API** æ˜¯ä¸€ä¸ªæ–°å…´çš„ Web APIï¼Œç”¨äºåœ¨ Web åº”ç”¨ä¸­åˆ›å»ºæ— ç¼çš„é¡µé¢æˆ–ç»„ä»¶è¿‡æ¸¡åŠ¨ç”»ã€‚å®ƒé€šè¿‡æµè§ˆå™¨çº§åˆ«çš„æ¸²æŸ“æŠ€æœ¯ï¼Œç®€åŒ–äº†åœ¨å•é¡µåº”ç”¨ï¼ˆSPAï¼‰æˆ–å¤šé¡µåº”ç”¨ï¼ˆMPAï¼‰ä¸­å®ç°å¹³æ»‘è¿‡æ¸¡åŠ¨ç”»çš„è¿‡ç¨‹ï¼Œä½¿é¡µé¢å†…å®¹çš„å˜åŒ–æ›´æµç•…å’Œè‡ªç„¶ã€‚

### ä¸»è¦ç‰¹æ€§

- **æ— ç¼è¿‡æ¸¡**ï¼šå…è®¸åœ¨é¡µé¢åˆ‡æ¢ã€ç»„ä»¶çŠ¶æ€å˜åŒ–æ—¶ï¼Œæä¾›å¹³æ»‘çš„è§†è§‰è¿‡æ¸¡æ•ˆæœã€‚
- **å…ƒç´ çš„å…³è”**ï¼šå¯ä»¥æ ‡è®°é¡µé¢ä¸­å˜åŒ–çš„å…ƒç´ ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨è®¡ç®—å’ŒåŠ¨ç”»åŒ–å®ƒä»¬åœ¨ä¸¤ä¸ªçŠ¶æ€ä¹‹é—´çš„è¿‡æ¸¡ã€‚
- **ç®€åŒ–è¿‡æ¸¡åŠ¨ç”»çš„ç¼–å†™**ï¼šå¼€å‘è€…æ— éœ€æ‰‹åŠ¨ç®¡ç†å¤æ‚çš„åŠ¨ç”»é€»è¾‘ï¼Œåªéœ€è¦å£°æ˜å“ªäº›å…ƒç´ éœ€è¦è¿‡æ¸¡ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨è®¡ç®—å’Œåº”ç”¨åŠ¨ç”»ã€‚
- **é€‚ç”¨äºå¤šç§åœºæ™¯**ï¼šå¯ä»¥ç”¨äºå•é¡µåº”ç”¨ï¼ˆSPAï¼‰ä¸­çš„è·¯ç”±åˆ‡æ¢ï¼Œä¹Ÿå¯ä»¥ç”¨äºå¤šé¡µåº”ç”¨ï¼ˆMPAï¼‰ä¸­çš„é¡µé¢åˆ‡æ¢ã€‚

### å·¥ä½œåŸç†

View Transition API åˆ©ç”¨äº†æµè§ˆå™¨çš„æ¸²æŸ“æœºåˆ¶ï¼Œé€šè¿‡å¿«ç…§ï¼ˆsnapshotï¼‰é¡µé¢çš„å‰åçŠ¶æ€ï¼Œç„¶åè®¡ç®—å’Œåº”ç”¨è¿‡æ¸¡åŠ¨ç”»ï¼Œä½¿é¡µé¢åˆ‡æ¢æˆ–å…ƒç´ å˜åŒ–æ›´åŠ æµç•…ã€‚

### åŸºæœ¬ä½¿ç”¨æ–¹å¼

1. **å¯åŠ¨è¿‡æ¸¡**ï¼šåœ¨é¡µé¢çŠ¶æ€å˜åŒ–æ—¶ï¼Œå¯ä»¥é€šè¿‡ JavaScript è°ƒç”¨ `document.startViewTransition()` æ¥è§¦å‘è§†å›¾çš„è¿‡æ¸¡ã€‚
2. **æ ‡è®°è¿‡æ¸¡å…ƒç´ **ï¼šä½¿ç”¨ `view-transition-name` å±æ€§æ ‡è®°ä½ æƒ³è¦è¿‡æ¸¡çš„å…ƒç´ ï¼Œæµè§ˆå™¨å°†è·Ÿè¸ªè¿™äº›å…ƒç´ ï¼Œå¹¶åº”ç”¨è¿‡æ¸¡æ•ˆæœã€‚

### ç¤ºä¾‹

#### 1. å•é¡µåº”ç”¨ä¸­çš„è¿‡æ¸¡

```html
<style>
  .box {
    width: 100px;
    height: 100px;
    background-color: lightblue;
    margin: 20px;
    transition: all 0.5s ease;
  }

  .new-state {
    width: 200px;
    background-color: lightcoral;
  }
</style>

<div class="box" class="box" view-transition-name="box"></div>

<script>
  const box = document.getElementById("box");

  // å¯åŠ¨è§†å›¾è¿‡æ¸¡
  document.getElementById("box").addEventListener("click", () => {
    document.startViewTransition(() => {
      box.classList.toggle("new-state");
    });
  });
</script>
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`startViewTransition()` è¢«ç”¨æ¥å¯åŠ¨è¿‡æ¸¡åŠ¨ç”»ï¼Œå½“ç‚¹å‡» `box` æ—¶ï¼Œå®ƒä¼šåœ¨ä¸¤ç§çŠ¶æ€ï¼ˆåŸå§‹çŠ¶æ€å’Œ `new-state`ï¼‰ä¹‹é—´è¿›è¡Œå¹³æ»‘çš„è¿‡æ¸¡ã€‚

#### 2. å¤šé¡µåº”ç”¨ä¸­çš„è¿‡æ¸¡

View Transition API è¿˜å¯ä»¥åœ¨é¡µé¢å¯¼èˆªæ—¶ç”¨äºå¤šé¡µåº”ç”¨ï¼Œç¡®ä¿é¡µé¢åˆ‡æ¢åŠ¨ç”»ä¹ŸåŒæ ·æµç•…ã€‚

```javascript
document.startViewTransition(() => {
  window.location.href = "/new-page";
});
```

å½“ä½ å¯¼èˆªåˆ°æ–°çš„é¡µé¢æ—¶ï¼Œ`startViewTransition` å°†ç¡®ä¿æ—§é¡µé¢ä¸æ–°é¡µé¢ä¹‹é—´çš„åˆ‡æ¢æ˜¯å¹³æ»‘çš„ï¼Œå¹¶ä¸”æµè§ˆå™¨ä¼šè‡ªåŠ¨ç”Ÿæˆè¿‡æ¸¡åŠ¨ç”»ã€‚

### ä¼˜ç‚¹

- **ç®€åŒ–åŠ¨ç”»å¼€å‘**ï¼šå¼€å‘è€…ä¸å†éœ€è¦æ‰‹åŠ¨å¤„ç†åŠ¨ç”»çš„å¤æ‚ç»†èŠ‚ï¼ŒView Transition API ä¼šè‡ªåŠ¨ç®¡ç†åŠ¨ç”»çš„å¼€å§‹å’Œç»“æŸã€‚
- **æé«˜æ€§èƒ½**ï¼šç”±äºåŠ¨ç”»ç”±æµè§ˆå™¨æœ¬åœ°å¤„ç†ï¼Œå› æ­¤èƒ½å¤Ÿè·å¾—æ›´é«˜çš„æ€§èƒ½å’Œæµç•…åº¦ã€‚
- **ç»Ÿä¸€è¿‡æ¸¡**ï¼šå¯ä»¥åœ¨é¡µé¢åˆ‡æ¢ã€å…ƒç´ å˜åŒ–ç­‰å¤šç§åœºæ™¯ä¸‹ç»Ÿä¸€å®ç°è¿‡æ¸¡åŠ¨ç”»æ•ˆæœã€‚

### æµè§ˆå™¨æ”¯æŒ

ç›®å‰ï¼ŒView Transition API å¤„äºå®éªŒæ€§é˜¶æ®µï¼Œæ”¯æŒåº¦æ­£åœ¨é€æ¸æå‡ã€‚ç°ä»£æµè§ˆå™¨å¦‚ Chrome 110+ å·²ç»å¼€å§‹æ”¯æŒè¯¥ APIï¼Œä¸è¿‡å…¶ä»–æµè§ˆå™¨å¦‚ Firefox å’Œ Safari å¯èƒ½ä»åœ¨å¼€å‘ä¸­ã€‚å¯ä»¥é€šè¿‡ `feature-detection` æ£€æŸ¥å½“å‰æµè§ˆå™¨æ˜¯å¦æ”¯æŒè¯¥åŠŸèƒ½ã€‚

### æ€»ç»“

View Transition API æ˜¯ Web åŠ¨ç”»å¼€å‘çš„ä¸€ä¸ªå¼ºå¤§å·¥å…·ï¼Œèƒ½å¤Ÿå¤§å¹…ç®€åŒ–é¡µé¢è¿‡æ¸¡æ•ˆæœçš„å®ç°ï¼Œå°¤å…¶é€‚ç”¨äºéœ€è¦åœ¨å‰åçŠ¶æ€é—´æä¾›å¹³æ»‘è¿‡æ¸¡çš„åœºæ™¯ã€‚å®ƒæå‡äº† Web åº”ç”¨çš„ç”¨æˆ·ä½“éªŒï¼Œè®©é¡µé¢åˆ‡æ¢ã€çŠ¶æ€å˜åŒ–æ›´åŠ æµç•…è‡ªç„¶ã€‚

</details>

## 2024-09-18 21:09:59

å†³å®šé‡æ–°å­¦ä¹ ts

### æ–°å¢å­—ä½“ Whisper

ç­¾åå­—ä½“ <span class="font-whisper">Whisper</span>

<blockquote>
  <div class="font-whisper m-0 p-0 leading-none">
    From fairest creatures we desire increase,
    <br />
    That thereby beauty's rose might never die,
    <br />
    But as the riper should by time decease,
    <br />
    His tender heir might bear his memory:
    <br />
    But thou, contending with old age and death,
    <br />
    To hide thyself, diedst not leave me so.
    <br />
    Thy self thy foe, to thy sweet self too cruel,
    <br />
    Thou that art now the world's fresh ornament,
    <br />
    And only herald of the gaudy spring,
    <br />
    Wilt thou, upon the high and giddy mast,
    <br />
    Seal up thy lips, and drown the whole world in tears?
    <br />
    O, let me not be made a fool of thee,
    <br />
    To be so cruel, and yet so fair!
    <br />
  </div>
</blockquote>

### show code

<details>
<summary>ä»Šå¤©å†™äº†ä¸€ä¸ªè¿˜æœ‰ç‚¹ä¸é”™çš„ä»£ç </summary>

```js
socket = new WebSocket(`ws://${host}/websocket/position/ajn404`);
let lastExecutionTime = 0; // ä¸Šæ¬¡æ‰§è¡Œæ—¶é—´
let cache = [];
let processing = false;
const cacheMap = new Map();

socket.addEventListener("message", function (event) {
  const parsedData = JSON.parse(event.data);

  // å¤„ç†è­¦å‘Šé€šçŸ¥
  if (parsedData.method === "warning") {
    showNotification(parsedData);
    return;
  }

  const currentTime = Date.now(); // è·å–å½“å‰æ—¶é—´
  // å¦‚æœè·ç¦»ä¸Šæ¬¡æ‰§è¡Œæ—¶é—´å°äº 100msï¼Œåˆ™ç»§ç»­ç¼“å­˜æ•°æ®
  if (currentTime - lastExecutionTime < 100) {
    cacheMap.set(parsedData.params.tagId, parsedData.params); // ç”¨ tagId ä½œä¸ºé”®ï¼Œå»é‡å­˜å‚¨æ•°æ®
    return;
  }
  lastExecutionTime = currentTime; // æ›´æ–°ä¸Šæ¬¡æ‰§è¡Œæ—¶é—´
  cacheMap.set(parsedData.params.tagId, parsedData.params); // ç”¨ tagId ä½œä¸ºé”®ï¼Œå»é‡å­˜å‚¨æ•°æ®

  // å¦‚æœæ­£åœ¨å¤„ç†ç¼“å­˜ä¸­çš„æ•°æ®ï¼Œåˆ™ä¸å†å¤„ç†
  if (processing) return;
  processing = true; // æ ‡è®°ä¸ºæ­£åœ¨å¤„ç†

  setTimeout(() => {
    // å°† Map è½¬æ¢ä¸ºæ•°ç»„ï¼Œå–å‡ºæ‰€æœ‰çš„ç¼“å­˜æ•°æ®
    cache = Array.from(cacheMap.values());

    // è¿‡æ»¤å¹¶è·å–è½¦è¾†å’Œäººå‘˜çš„æ›´æ–°æ•°æ®
    const updateData = getGraphicData(
      cache.filter(item => item.entityType === "car"),
      "car"
    );

    const updateDataMember = getGraphicData(
      cache.filter(item => item.entityType === "staff"),
      "member"
    );

    // æ›´æ–°è½¦è¾†ä½ç½®
    if (updateData && updateData.length > 0) {
      vehicleLocation.locationView.update(updateData);
    }

    // æ›´æ–°äººå‘˜ä½ç½®
    if (updateDataMember && updateDataMember.length > 0) {
      memberLocation.locationView.update(updateDataMember);
    }

    cacheMap.clear(); // æ¸…ç©º Map ä»¥ä¿è¯ç¼“å­˜ä¸é‡å¤

    if (!memberLocation.positionGroupGraphics) {
      cache = [...updateDataMember];
    }

    if (!vehicleLocation.positionGroupGraphics) {
      cache = [...cache, ...updateData];
    }

    // å¤„ç†å®Œæˆåæ¸…ç©ºç¼“å­˜å¹¶é‡ç½®æ ‡è®°

    processing = false;

    console.log(cache, updateDataMember, updateData);
  }, 0); // å¼‚æ­¥å¤„ç†ï¼Œä¿è¯ä¸ä¼šé˜»å¡æ¶ˆæ¯æ¥æ”¶
});
```

</details>

### Visual Viewport API

<details>
<summary>ä»€ä¹ˆæ˜¯Visual Viewport API</summary>

Visual Viewport API æ˜¯ä¸€ç§æœºåˆ¶ï¼Œå…è®¸å¼€å‘è€…æŸ¥è¯¢å’Œä¿®æ”¹çª—å£å¯è§†åŒºåŸŸçš„å±æ€§ã€‚ [1](https://developer.mozilla.org/en-US/docs/Web/API/Visual_Viewport_API) å¯è§†åŒºåŸŸæ˜¯æŒ‡å±å¹•ä¸Šé™¤å»å±å¹•é”®ç›˜ã€ç¼©æ”¾åŒºåŸŸå¤–ä»¥åŠå…¶ä»–ä¸éšé¡µé¢ç¼©æ”¾çš„å±å¹•å…ƒç´ åï¼Œå®é™…å¯è§çš„éƒ¨åˆ†ã€‚ [1](https://developer.mozilla.org/en-US/docs/Web/API/Visual_Viewport_API)

ç§»åŠ¨ç½‘é¡µåŒ…å«ä¸¤ä¸ªè§†å£ï¼šå¸ƒå±€è§†å£å’Œå¯è§†è§†å£ã€‚ [1](https://developer.mozilla.org/en-US/docs/Web/API/Visual_Viewport_API) å¸ƒå±€è§†å£æ¶µç›–é¡µé¢ä¸Šçš„æ‰€æœ‰å…ƒç´ ï¼Œè€Œå¯è§†è§†å£æ˜¯å±å¹•ä¸Šå®é™…å¯è§çš„éƒ¨åˆ†ã€‚ [1](https://developer.mozilla.org/en-US/docs/Web/API/Visual_Viewport_API)[6](https://github.com/WICG/visual-viewport) å½“ç”¨æˆ·æ”¾å¤§é¡µé¢æ—¶ï¼Œå¯è§†è§†å£ä¼šç¼©å°ï¼Œä½†å¸ƒå±€è§†å£ä¿æŒä¸å˜ã€‚ [1](https://developer.mozilla.org/en-US/docs/Web/API/Visual_Viewport_API) ç”¨æˆ·ç•Œé¢åŠŸèƒ½ï¼ˆå¦‚å±å¹•é”®ç›˜ï¼‰å¯ä»¥ç¼©å°å¯è§†è§†å£ï¼Œè€Œä¸ä¼šå½±å“å¸ƒå±€è§†å£ã€‚ [1](https://developer.mozilla.org/en-US/docs/Web/API/Visual_Viewport_API) Visual Viewport API å…è®¸å¼€å‘è€…ç›¸å¯¹äºå±å¹•ä¸Šæ˜¾ç¤ºçš„å†…å®¹å®šä½å…ƒç´ ï¼Œä»è€Œè§£å†³å¸ƒå±€è§†å£å’Œå¯è§†è§†å£ä¸ä¸€è‡´çš„é—®é¢˜ã€‚ [1](https://developer.mozilla.org/en-US/docs/Web/API/Visual_Viewport_API)

</details>

## 2024-09-23 14:15:19

### ä»Šæ—¥è‹±è¯­

<div class="second">
  I <span class="use">use</span> <span class="nestjs">Nest.Js</span> at work but{" "}
  <span class="dislike">donâ€™t like it</span>, too much{" "}
  <span class="boilerplate">boilerplate</span>. I like{" "}
  <span class="express">express</span> more, very <span class="easy">easy</span>{" "}
  to use with <span class="ts">TS</span> too.
</div>

## 2024-09-24 14:27:16

### ä»Šæ—¥ç±»å‹ä½“æ“

- Get Return Type

```ts
type MyReturnType<T extends (...args: unknown[]) => unknown> = T extends (
  ...args: unknown[]
) => infer R
  ? R
  : never;
```

<details>
<summary>è§£é‡Š</summary>

è¿™ä¸ªé—®é¢˜æ¶‰åŠåˆ° TypeScript ä¸­çš„æ¡ä»¶ç±»å‹å’Œæ¨æ–­ç±»å‹ã€‚è®©æˆ‘ä»¬é€è¡Œè§£æè¿™æ®µä»£ç ï¼Œçœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œä»¥åŠå®ƒçš„ä¸»è¦ç›®æ ‡æ˜¯ä»€ä¹ˆã€‚

### ä»£ç è§£æ

```typescript
type MyReturnType<T extends (...args: unknown[]) => unknown> = T extends (
  ...args: unknown[]
) => infer R
  ? R
  : never;
```

1. **`type MyReturnType<T extends (...args: unknown[]) => unknown>`**:

   - è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªç±»å‹åˆ«å `MyReturnType`ï¼Œå®ƒæ¥å—ä¸€ä¸ªç±»å‹å‚æ•° `T`ã€‚
   - `T` è¢«çº¦æŸä¸ºä¸€ä¸ªå‡½æ•°ç±»å‹ï¼Œå‡½æ•°å¯ä»¥æ¥å—ä»»æ„æ•°é‡çš„å‚æ•°ï¼ˆ`...args: unknown[]`ï¼‰ï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªæœªçŸ¥ç±»å‹çš„å€¼ï¼ˆ`=> unknown`ï¼‰ã€‚

2. **`T extends (...args: unknown[]) => infer R`**:

   - è¿™æ˜¯ä¸€ä¸ªæ¡ä»¶ç±»å‹ï¼Œæ£€æŸ¥ `T` æ˜¯å¦ç¬¦åˆå‡½æ•°ç±»å‹çš„ç»“æ„ã€‚
   - `infer R` æ˜¯ TypeScript çš„ä¸€ç§ç±»å‹æ¨æ–­æœºåˆ¶ï¼Œå®ƒä¼šä» `T` ä¸­æ¨æ–­å‡ºè¿”å›å€¼çš„ç±»å‹ï¼Œå¹¶å°†å…¶å‘½åä¸º `R`ã€‚

3. **`? R : never`**:
   - å¦‚æœ `T` ç¬¦åˆå‡½æ•°ç±»å‹çš„ç»“æ„ï¼Œé‚£ä¹ˆ `MyReturnType` çš„ç»“æœå°±æ˜¯ `R`ï¼ˆå³å‡½æ•°çš„è¿”å›å€¼ç±»å‹ï¼‰ã€‚
   - å¦‚æœ `T` ä¸ç¬¦åˆè¿™ä¸ªç»“æ„ï¼Œåˆ™è¿”å› `never`ï¼Œè¡¨ç¤ºè¿™ä¸ªç±»å‹æ˜¯ä¸å¯ç”¨çš„ã€‚

### ä¸»è¦ç›®æ ‡

`MyReturnType` çš„ä¸»è¦ç›®æ ‡æ˜¯ä»ç»™å®šçš„å‡½æ•°ç±»å‹ `T` ä¸­æå–å‡ºå…¶è¿”å›å€¼çš„ç±»å‹ã€‚è¿™åœ¨ TypeScript ä¸­éå¸¸æœ‰ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†é«˜é˜¶å‡½æ•°æˆ–éœ€è¦æ ¹æ®å‡½æ•°ç±»å‹åŠ¨æ€ç”Ÿæˆç±»å‹çš„åœºæ™¯ä¸­ã€‚

### ç¤ºä¾‹

è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£è¿™ä¸ªç±»å‹çš„ç”¨æ³•ï¼š

```typescript
function exampleFunction(): number {
  return 42;
}

type ResultType = MyReturnType<typeof exampleFunction>; // ResultType å°†è¢«æ¨æ–­ä¸º number
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`exampleFunction` æ˜¯ä¸€ä¸ªè¿”å› `number` çš„å‡½æ•°ã€‚é€šè¿‡ `MyReturnType`ï¼Œæˆ‘ä»¬å¯ä»¥æå–å‡ºå®ƒçš„è¿”å›å€¼ç±»å‹ï¼Œ`ResultType` å°†è¢«æ¨æ–­ä¸º `number`ã€‚

### æ€»ç»“

`MyReturnType` æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©ä½ åœ¨ TypeScript ä¸­æ›´å¥½åœ°å¤„ç†å‡½æ•°ç±»å‹ï¼Œæå–è¿”å›å€¼ç±»å‹ã€‚å®ƒåˆ©ç”¨äº†æ¡ä»¶ç±»å‹å’Œç±»å‹æ¨æ–­çš„ç‰¹æ€§ï¼Œä½¿å¾—ç±»å‹ç³»ç»Ÿæ›´åŠ çµæ´»å’Œå¼ºå¤§ã€‚å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£è¿™æ®µä»£ç çš„åŠŸèƒ½å’Œæ•ˆæœï¼å¦‚æœè¿˜æœ‰å…¶ä»–é—®é¢˜ï¼Œéšæ—¶é—®æˆ‘å“¦ï¼ğŸ˜„

</details>

### ä»Šæ—¥è‹±è¯­

<blockquote>
  Fabric is a <span class="fabric">JSON schema</span> for describing{" "}
  <span class="cesiumjs">materials in CesiumJS </span>.Materials represent the
  appearance of an object such as <span class="polygons">polygons</span> ,
  <span class="polylines">polylines</span>,{" "}
  <span class="ellipsoids">ellipsoids</span>, and{" "}
  <span class="sensors">sensors</span>.<br />
  Note: For details about applying{" "}
  <span class="custom-materials">custom materials</span> to{" "}
  <span class="d_models">3D models</span>or{" "}
  <span class="d_tiles">3D Tiles</span>, use the{" "}
  <span class="custom-shader-guide">Custom Shader Guide</span> instead.
  <br />
  Materials can be as simple as draping an image over an object, or applying a
  pattern such as <span class="stripes">stripes</span>or a{" "}
  <span class="checkerboard">checkerboard</span>. Using Fabric and{" "}
  <span class="glsl"> GLSL </span>, new materials can be scripted from scratch
  or created by combining existing materials in a hierarchy; for example,{" "}
  <span class="wet-bricks"> wet crumbling bricks </span> can be created with a
  combination of <span class="procedural-brick"> procedural brick </span> ,{" "}
  <span class="bump-map">bump map</span>, and{" "}
  <span class="specular-map"> specular map </span> materials.
</blockquote>

<blockquote>
Fabricæ˜¯ä¸€ä¸ªç”¨äºæè¿°CesiumJSä¸­ææ–™çš„JSONæ¶æ„ã€‚ææ–™è¡¨ç¤ºå¯¹è±¡çš„å¤–è§‚ï¼Œä¾‹å¦‚å¤šè¾¹å½¢ã€æŠ˜çº¿ã€æ¤­çƒä½“å’Œä¼ æ„Ÿå™¨ã€‚

æ³¨æ„ï¼šæœ‰å…³å°†è‡ªå®šä¹‰ææ–™åº”ç”¨äº3Dæ¨¡å‹æˆ–3D Tilesçš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·ä½¿ç”¨è‡ªå®šä¹‰ç€è‰²å™¨æŒ‡å—ã€‚

ææ–™å¯ä»¥ç®€å•åˆ°ä»…ä»…æ˜¯å°†å›¾åƒè¦†ç›–åœ¨å¯¹è±¡ä¸Šï¼Œæˆ–è€…åº”ç”¨å¦‚æ¡çº¹æˆ–æ£‹ç›˜æ ¼ç­‰å›¾æ¡ˆã€‚ä½¿ç”¨Fabricå’ŒGLSLï¼Œå¯ä»¥ä»å¤´å¼€å§‹ç¼–å†™æ–°çš„ææ–™ï¼Œæˆ–è€…é€šè¿‡ç»„åˆç°æœ‰ææ–™åˆ›å»ºå±‚æ¬¡ç»“æ„çš„æ–°ææ–™ï¼›ä¾‹å¦‚ï¼Œå¯ä»¥é€šè¿‡ç¨‹åºç”Ÿæˆçš„ç –å—ã€å‡¹å‡¸è´´å›¾å’Œé«˜å…‰è´´å›¾ææ–™çš„ç»„åˆæ¥åˆ›å»ºæ¹¿æ¶¦çš„ç ´ç¢ç –å—ã€‚

</blockquote>

### ä»Šæ—¥å‘ç°

ä¹‹å‰æ€»æƒ³ç€åœ¨vscodeé‡Œæ”¾æµè§ˆå™¨ï¼Œæ²¡æƒ³åˆ°...

<img src="/assets/gif/workspace.gif" class="3/4" />

### ä»Šæ—¥cesium

- è‡ªå®šä¹‰shader

<details>
<summary>Click to expand</summary>

import CustomShaderDemo from "@components/react/cesium/customShader/demo.tsx";

<CustomShaderDemo client:visible />

</details>

## 2024-09-25 09:20:52

### ä»Šæ—¥ç±»å‹ä½“æ“

- æ‰‹å†™<span class="Omit">Omit</span>\<T,K>

<details>
<summary>`type MyOmit<T, K extends keyof T> = {[P in keyof T as P extends K ? never : P]: T[P]}`</summary>

å¥½çš„ï¼Œè®©æˆ‘ä»¬æ¥æ·±å…¥ç†è§£è¿™ä¸ª `MyOmit` ç±»å‹çš„å®šä¹‰ã€‚

### `MyOmit` ç±»å‹çš„ç›®çš„

`MyOmit` æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„ TypeScript ç±»å‹ï¼Œç”¨äºä»ä¸€ä¸ªå¯¹è±¡ç±»å‹ `T` ä¸­æ’é™¤æŒ‡å®šçš„é”® `K`ã€‚æ¢å¥è¯è¯´ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªæ–°ç±»å‹ï¼Œè¯¥ç±»å‹ä¸ `T` ç›¸åŒï¼Œä½†ä¸åŒ…å« `K` ä¸­æŒ‡å®šçš„å±æ€§ã€‚

### ä»£ç è§£æ

```typescript
type MyOmit<T, K extends keyof T> = {
  [P in keyof T as P extends K ? never : P]: T[P];
};
```

#### é€è¡Œè§£æ

1. **`type MyOmit<T, K extends keyof T>`**:

   - è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªç±»å‹ `MyOmit`ï¼Œå®ƒæ¥å—ä¸¤ä¸ªç±»å‹å‚æ•°ï¼š
     - `T`ï¼šè¡¨ç¤ºè¦æ“ä½œçš„å¯¹è±¡ç±»å‹ã€‚
     - `K`ï¼šè¡¨ç¤ºè¦æ’é™¤çš„é”®ï¼Œ`K` å¿…é¡»æ˜¯ `T` çš„é”®ä¹‹ä¸€ï¼ˆ`K extends keyof T`ï¼‰ã€‚

2. **`{ [P in keyof T as P extends K ? never : P]: T[P] }`**:
   - è¿™æ˜¯ä¸€ä¸ªæ˜ å°„ç±»å‹ï¼ˆMapped Typeï¼‰ï¼Œç”¨äºæ„å»ºæ–°ç±»å‹ã€‚
   - `P in keyof T`ï¼šéå† `T` çš„æ‰€æœ‰é”®ã€‚
   - `as P extends K ? never : P`ï¼šè¿™æ˜¯ä¸€ä¸ªæ¡ä»¶ç±»å‹ï¼Œç”¨äºå†³å®šæ˜¯å¦ä¿ç•™å½“å‰é”® `P`ã€‚
     - å¦‚æœ `P` æ˜¯ `K` ä¸­çš„ä¸€ä¸ªé”®ï¼ˆå³è¦æ’é™¤çš„é”®ï¼‰ï¼Œåˆ™è¿”å› `never`ï¼Œè¡¨ç¤ºä¸ä¿ç•™è¿™ä¸ªé”®ã€‚
     - å¦åˆ™ï¼Œä¿ç•™è¿™ä¸ªé”® `P`ã€‚
   - `T[P]`ï¼šè¡¨ç¤ºæ–°ç±»å‹ä¸­å¯¹åº”é”® `P` çš„å€¼ç±»å‹ã€‚

### æ•´ä½“æ•ˆæœ

é€šè¿‡è¿™ä¸ªå®šä¹‰ï¼Œ`MyOmit` ä¼šåˆ›å»ºä¸€ä¸ªæ–°ç±»å‹ï¼ŒåŒ…å« `T` ä¸­æ‰€æœ‰çš„é”®ï¼Œé™¤äº†é‚£äº›åœ¨ `K` ä¸­æŒ‡å®šçš„é”®ã€‚ä¾‹å¦‚ï¼š

```typescript
type Person = {
  name: string;
  age: number;
  address: string;
};

type OmittedPerson = MyOmit<Person, "age" | "address">;
// OmittedPerson çš„ç±»å‹ä¸º { name: string }
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`OmittedPerson` ç±»å‹å°†åªåŒ…å« `name` å±æ€§ï¼Œå› ä¸º `age` å’Œ `address` è¢«æ’é™¤äº†ã€‚

### æ€»ç»“

`MyOmit` æ˜¯ä¸€ä¸ªéå¸¸å®ç”¨çš„å·¥å…·ç±»å‹ï¼Œå¯ä»¥å¸®åŠ©ä½ åœ¨ TypeScript ä¸­çµæ´»åœ°å¤„ç†å¯¹è±¡ç±»å‹ï¼Œæ’é™¤ä¸éœ€è¦çš„å±æ€§ã€‚é€šè¿‡ä½¿ç”¨æ˜ å°„ç±»å‹å’Œæ¡ä»¶ç±»å‹ï¼Œ`MyOmit` æä¾›äº†ä¸€ç§ä¼˜é›…çš„æ–¹å¼æ¥åˆ›å»ºæ–°çš„ç±»å‹ã€‚å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ TypeScript çš„ç±»å‹ç³»ç»Ÿï¼å¦‚æœè¿˜æœ‰å…¶ä»–é—®é¢˜ï¼Œéšæ—¶é—®æˆ‘å“¦ï¼

</details>

### ä»Šæ—¥è‹±è¯­

<details>
<summary>wasm intro</summary>

WebAssembly, or WASM for short, is a new technology for running portable programs in a safe and efficient manner <span class="primarily">primarily</span> aimed at the web platform. Similarly to ASM.js, WASM aims at a low level-of abstraction suitable as an intermediate representation of a higher-level program â€” i.e. WebAssembly code is intended to be generated by compilers rather than being written by humans. The W3C community group includes representatives from the largest web-browser companies, including Google, Microsoft, Apple and Mozilla making this whole thing rather exciting.

WebAssemblyï¼ˆç®€ç§° WASMï¼‰æ˜¯ä¸€ç§æ–°æŠ€æœ¯ï¼Œæ—¨åœ¨ä»¥å®‰å…¨å’Œé«˜æ•ˆçš„æ–¹å¼åœ¨ç½‘ç»œå¹³å°ä¸Šè¿è¡Œå¯ç§»æ¤ç¨‹åºã€‚ä¸ ASM.js ç±»ä¼¼ï¼ŒWASM æ—¨åœ¨æä¾›ä¸€ç§ä½æŠ½è±¡çº§åˆ«çš„è¡¨ç¤ºï¼Œé€‚åˆä½œä¸ºæ›´é«˜å±‚æ¬¡ç¨‹åºçš„ä¸­é—´è¡¨ç¤ºâ€”â€”å³ WebAssembly ä»£ç ä¸»è¦æ˜¯ç”±ç¼–è¯‘å™¨ç”Ÿæˆï¼Œè€Œä¸æ˜¯ç”±äººæ‰‹åŠ¨ç¼–å†™çš„ã€‚

WASM çš„è®¾è®¡ç›®æ ‡æ˜¯å®ç°æ¥è¿‘åŸç”Ÿçš„æ‰§è¡Œé€Ÿåº¦ï¼ŒåŒæ—¶ä¿æŒä¸ç°æœ‰ Web æŠ€æœ¯çš„å…¼å®¹æ€§ã€‚WASM çš„å¼€å‘å¾—åˆ°äº† W3C ç¤¾åŒºå°ç»„çš„æ”¯æŒï¼Œè¯¥å°ç»„åŒ…æ‹¬æ¥è‡ª Googleã€Microsoftã€Apple å’Œ Mozilla ç­‰ä¸»è¦æµè§ˆå™¨å…¬å¸çš„ä»£è¡¨ï¼Œè¿™ä½¿å¾—è¿™ä¸€æŠ€æœ¯çš„å‘å±•å……æ»¡äº†æœŸå¾…ã€‚

é€šè¿‡ WebAssemblyï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨ Cã€C++ã€Rust ç­‰è¯­è¨€ç¼–å†™é«˜æ€§èƒ½çš„ä»£ç ï¼Œå¹¶å°†å…¶ç¼–è¯‘ä¸º WebAssembly æ ¼å¼ï¼Œä»è€Œåœ¨æµè§ˆå™¨ä¸­è¿è¡Œã€‚è¿™ç§æ–¹å¼ä¸ä»…æé«˜äº† Web åº”ç”¨çš„æ€§èƒ½ï¼Œè¿˜æ‰©å±•äº† Web å¹³å°çš„èƒ½åŠ›ï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿæ„å»ºæ›´å¤æ‚çš„åº”ç”¨ç¨‹åºï¼Œå¦‚æ¸¸æˆã€å›¾å½¢å¤„ç†å’Œç§‘å­¦è®¡ç®—ç­‰ã€‚

If youâ€™re reading this chances are youâ€™re already familiar with WASM to some extent. If you arenâ€™t, this would be a good time to check out webassembly.org. At the time of publishing this article, WebAssembly has just reached the Browser Preview milestone, meaning that version 1 of WebAssembly will very likely be what the current draft describes. The specifics of this article are for version mvp-13.

å¦‚æœä½ æ­£åœ¨é˜…è¯»è¿™ç¯‡æ–‡ç« ï¼Œé‚£ä¹ˆä½ å¾ˆå¯èƒ½å¯¹ WebAssemblyï¼ˆWASMï¼‰å·²ç»æœ‰ä¸€å®šçš„äº†è§£ã€‚å¦‚æœä½ è¿˜ä¸ç†Ÿæ‚‰ï¼Œè¿™æ­£æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ—¶æœºå»æŸ¥çœ‹ webassembly.orgã€‚åœ¨æœ¬æ–‡å‘å¸ƒæ—¶ï¼ŒWebAssembly åˆšåˆšè¾¾åˆ°äº†æµè§ˆå™¨é¢„è§ˆçš„é‡Œç¨‹ç¢‘ï¼Œè¿™æ„å‘³ç€ WebAssembly çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬å¾ˆå¯èƒ½å°±æ˜¯å½“å‰è‰æ¡ˆæ‰€æè¿°çš„å†…å®¹ã€‚æœ¬æ–‡çš„å…·ä½“å†…å®¹æ˜¯é’ˆå¯¹ç‰ˆæœ¬ mvp-13 çš„ã€‚

</details>

<DriverNoText
  client:load
  elements='[
          {"element":".fabric","popover":{"title":"JSON schema","description":"ç”¨äºæè¿°æ•°æ®ç»“æ„çš„æ ¼å¼ï¼Œä¾¿äºæ•°æ®çš„äº¤æ¢å’Œå­˜å‚¨ã€‚"}},
          {"element":".cesiumjs","popover":{"title":"materials in CesiumJS","description":"CesiumJSä¸­çš„ææ–™ï¼Œç”¨äºå®šä¹‰3Då¯¹è±¡çš„å¤–è§‚ã€‚"}},
          {"element":".polygons","popover":{"title":"polygons","description":"å¤šè¾¹å½¢ï¼Œè¡¨ç¤ºäºŒç»´å¹³é¢ä¸Šçš„å°é—­å½¢çŠ¶ã€‚"}},
          {"element":".polylines","popover":{"title":"polylines","description":"æŠ˜çº¿ï¼Œç”±å¤šä¸ªçº¿æ®µè¿æ¥è€Œæˆçš„å›¾å½¢ã€‚"}},
          {"element":".ellipsoids","popover":{"title":"ellipsoids","description":"æ¤­çƒä½“ï¼Œä¸‰ç»´ç©ºé—´ä¸­çš„ä¸€ç§æ›²é¢ã€‚"}},
          {"element":".sensors","popover":{"title":"sensors","description":"ä¼ æ„Ÿå™¨ï¼Œç”¨äºæ”¶é›†ç¯å¢ƒæ•°æ®çš„è®¾å¤‡ã€‚"}},
          {"element":".custom-materials","popover":{"title":"custom materials","description":"è‡ªå®šä¹‰ææ–™ï¼Œç”¨æˆ·å®šä¹‰çš„ææ–™ç±»å‹ã€‚"}},
          {"element":".d_models","popover":{"title":"3D models","description":"ä¸‰ç»´æ¨¡å‹ï¼Œè¡¨ç¤ºç‰©ä½“çš„ä¸‰ç»´å½¢æ€ã€‚"}},
          {"element":".d_tiles","popover":{"title":"3D Tiles","description":"ç”¨äºé«˜æ•ˆä¼ è¾“å’Œæ¸²æŸ“å¤§è§„æ¨¡3DåŸå¸‚å’Œå»ºç­‘æ•°æ®çš„æ ¼å¼ã€‚"}},
          {"element":".custom-shader-guide","popover":{"title":"Custom Shader Guide","description":"è‡ªå®šä¹‰ç€è‰²å™¨æŒ‡å—ï¼Œæä¾›å¦‚ä½•åˆ›å»ºå’Œåº”ç”¨è‡ªå®šä¹‰ç€è‰²å™¨çš„è¯¦ç»†ä¿¡æ¯ã€‚"}},
          {"element":".stripes","popover":{"title":"stripes","description":"æ¡çº¹å›¾æ¡ˆï¼Œäº¤æ›¿çš„é¢œè‰²æˆ–çº¹ç†ã€‚"}},
          {"element":".checkerboard","popover":{"title":"checkerboard","description":"æ£‹ç›˜æ ¼å›¾æ¡ˆï¼Œäº¤æ›¿çš„é»‘ç™½æ–¹å—ã€‚"}},
          {"element":".glsl","popover":{"title":"GLSL","description":"OpenGLç€è‰²è¯­è¨€ï¼Œç”¨äºç¼–å†™å›¾å½¢æ¸²æŸ“çš„ç€è‰²å™¨ã€‚"}},
          {"element":".wet-bricks","popover":{"title":"wet crumbling bricks","description":"æ¹¿æ¶¦çš„ç ´ç¢ç –å—ï¼Œè¡¨ç¤ºä¸€ç§ç‰¹å®šçš„ææ–™æ•ˆæœã€‚"}},
          {"element":".procedural-brick","popover":{"title":"procedural brick","description":"ç¨‹åºç”Ÿæˆçš„ç –å—ææ–™ï¼Œç”¨äºåˆ›å»ºå¤æ‚çš„è¡¨é¢æ•ˆæœã€‚"}},
          {"element":".bump-map","popover":{"title":"bump map","description":"å‡¹å‡¸è´´å›¾ï¼Œç”¨äºåœ¨ä¸å¢åŠ å‡ ä½•ä½“çš„æƒ…å†µä¸‹æ·»åŠ è¡¨é¢ç»†èŠ‚ã€‚"}},
          {"element":".specular-map","popover":{"title":"specular map","description":"é«˜å…‰è´´å›¾ï¼Œç”¨äºå®šä¹‰è¡¨é¢åå°„å…‰çš„å¼ºåº¦ã€‚"}},
          {"element":".use","popover":{"title":"use","description":"è¡¨ç¤ºåº”ç”¨æˆ–ä½¿ç”¨æŸç‰©ï¼Œé€šå¸¸æŒ‡å·¥ä½œæˆ–å¼€å‘ä¸­çš„å®è·µã€‚"}},
          {"element":".nestjs","popover":{"title":"Nest.Js","description":"ä¸€ç§æ¸è¿›å¼çš„Node.jsæ¡†æ¶ï¼Œä¸“ä¸ºæ„å»ºå¯æ‰©å±•çš„æœåŠ¡å™¨ç«¯åº”ç”¨è€Œè®¾è®¡ï¼Œç»“åˆäº†é¢å‘å¯¹è±¡å’Œå‡½æ•°å¼ç¼–ç¨‹ã€‚"}},
          {"element":".dislike","popover":{"title":"donâ€™t like it","description":"è¡¨è¾¾å¯¹æŸäº‹ç‰©çš„åæ„Ÿæˆ–ä¸æ»¡ã€‚æ­¤å¤„æŒ‡ä½œè€…ä¸å–œæ¬¢Nest.Jsã€‚"}},
          {"element":".boilerplate","popover":{"title":"boilerplate","description":"æŒ‡é‡å¤çš„ã€å†—ä½™çš„ä»£ç ï¼Œé€šå¸¸æ˜¯å¼€å‘è€…è®¤ä¸ºä¸å¿…è¦æˆ–ç¹ççš„éƒ¨åˆ†ã€‚"}},
          {"element":".express","popover":{"title":"express","description":"ä¸€ä¸ªç®€æ´ä¸”çµæ´»çš„Node.jsæ¡†æ¶ï¼Œç”¨äºæ„å»ºæœåŠ¡å™¨ç«¯åº”ç”¨ï¼Œå¼€å‘è€…å¸¸ç§°å…¶ä¸ºè½»é‡ã€å¿«é€Ÿã€‚"}},
          {"element":".easy","popover":{"title":"easy","description":"è¡¨ç¤ºç®€å•ã€æ–¹ä¾¿ï¼Œæ­¤å¤„æŒ‡Express.jsæ¯”Nest.Jsæ›´åŠ å®¹æ˜“ä½¿ç”¨ã€‚"}},
          {"element":".ts","popover":{"title":"TS","description":"TypeScriptçš„ç®€ç§°ï¼Œæ˜¯JavaScriptçš„è¶…é›†ï¼Œæ·»åŠ äº†é™æ€ç±»å‹æ”¯æŒã€‚"}},
          {"element":".primarily","popover":{"title":"primarily","description":"Primarilyçš„ä¸­æ–‡ç¿»è¯‘æ˜¯â€œä¸»è¦â€æˆ–â€œé¦–è¦åœ°â€ã€‚å®ƒé€šå¸¸ç”¨äºå¼ºè°ƒæŸäº‹ç‰©çš„ä¸»è¦ç›®çš„æˆ–åŠŸèƒ½ã€‚åœ¨è®¨è®º WebAssembly çš„èƒŒæ™¯æ—¶ï¼Œå¯ä»¥è¿™æ ·ä½¿ç”¨ï¼šè‹±æ–‡ï¼š WebAssembly, or WASM for short, is a new technology for running portable programs in a safe and efficient manner primarily aimed at the web platform.ä¸­æ–‡ç¿»è¯‘ï¼š WebAssemblyï¼ˆç®€ç§° WASMï¼‰æ˜¯ä¸€ç§æ–°æŠ€æœ¯ï¼Œæ—¨åœ¨ä»¥å®‰å…¨å’Œé«˜æ•ˆçš„æ–¹å¼è¿è¡Œå¯ç§»æ¤ç¨‹åºï¼Œä¸»è¦é¢å‘ç½‘ç»œå¹³å°ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œâ€œprimarilyâ€ å¼ºè°ƒäº† WebAssembly çš„ä¸»è¦ç›®æ ‡æ˜¯ä¸ºç½‘ç»œå¹³å°æœåŠ¡ã€‚"}}
        ]'
/>

### ä»Šæ—¥æ¢ç´¢

> [lume](https://lume.io/) > [lume demo page](https://docs.lume.io/examples/disco-helmet/example.html) > [yew](https://yew.rs/)

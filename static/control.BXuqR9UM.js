import{j as i}from"./jsx-runtime.DZ3s2XAB.js";import{r as c}from"./index.D4IXJ7me.js";/* empty css                         */import{Button as R}from"./button.Bu1Rz1rf.js";import{A as I,a as N}from"./alert.Bt-tNuQl.js";import{R as x}from"./react-icons.esm.Bm3uWd-S.js";import"./_sentry-release-injection-file.B-UwqLso.js";import{V as D,S as L,C as j,h as p,I as M}from"./Viewer.sNypZuuW.js";import"./_commonjsHelpers.DqoTaOmB.js";import"./index.CEsCW6vM.js";import"./index.Dr6BPF-b.js";import"./utils.CQ2vwKer.js";(function(){try{var r=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},t=new r.Error().stack;t&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[t]="088f44aa-eb53-4b9b-a4c0-3e5061168722",r._sentryDebugIdIdentifier="sentry-dbid-088f44aa-eb53-4b9b-a4c0-3e5061168722")}catch{}})();M.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIwOWRkMzFlYS0yMDVhLTRkNzYtYWJmMC1hMmE1NjljN2MyNjMiLCJpZCI6NzMzNDQsImlhdCI6MTYzNjgxNDEzNX0.Q2MfD_lkQgsJ-R3NPfYjS9QA9q_j4Py8DktYKsPmZNg";function Y(){const r=c.useRef(null),t=c.useRef(null),u=c.useRef(null);let m=c.useRef(null),f=c.useRef(null);const[s,h]=c.useState(!0),o=c.useRef({looking:!1,moveForward:!1,moveBackward:!1,moveUp:!1,moveDown:!1,moveLeft:!1,moveRight:!1}),k=c.useCallback(()=>{if(!u.current)return;const n=u.current.screenSpaceCameraController;n.enableRotate=!s,n.enableTranslate=!s,n.enableZoom=!s,n.enableTilt=!s,n.enableLook=!s,h(d=>!d)},[s]);return c.useEffect(()=>{if(r.current&&!t.current){t.current=new D(r.current,{terrainProvider:void 0,baseLayerPicker:!1,geocoder:!1,homeButton:!1,sceneModePicker:!1,navigationHelpButton:!1,animation:!1,timeline:!1,fullscreenButton:!1}),t.current._cesiumWidget._creditContainer.parentNode.removeChild(t.current._cesiumWidget._creditContainer),u.current=t.current.scene;const n=t.current.canvas;n.setAttribute("tabindex","0"),n.onclick=()=>n.focus();const d=new L(n);d.setInputAction(e=>{o.current.looking=!0,m.current=j.clone(e.position),f.current=m.current},p.LEFT_DOWN),d.setInputAction(e=>{m.current=e.endPosition},p.MOUSE_MOVE),d.setInputAction(()=>{o.current.looking=!1},p.LEFT_UP);const v=e=>{switch(e){case"KeyW":return"moveForward";case"KeyS":return"moveBackward";case"KeyQ":return"moveUp";case"KeyE":return"moveDown";case"KeyD":return"moveRight";case"KeyA":return"moveLeft";default:return}};document.addEventListener("keydown",e=>{const a=v(e.code);a&&(o.current[a]=!0)}),document.addEventListener("keyup",e=>{const a=v(e.code);a&&(o.current[a]=!1)});const y=u.current.globe.ellipsoid;t.current.clock.onTick.addEventListener(()=>{const e=t.current.camera,a=n.clientWidth,b=n.clientHeight;if(o.current.looking){const C=(m.current.x-f.current.x)/a,E=-(m.current.y-f.current.y)/b,g=.05;e.lookRight(C*g),e.lookUp(E*g)}const l=y.cartesianToCartographic(e.position).height/100;o.current.moveForward&&e.moveForward(l),o.current.moveBackward&&e.moveBackward(l),o.current.moveUp&&e.moveUp(l),o.current.moveDown&&e.moveDown(l),o.current.moveLeft&&e.moveLeft(l),o.current.moveRight&&e.moveRight(l)});const w=e=>{e.stopPropagation()};return r.current.addEventListener("wheel",w),()=>{t.current.destroy(),t.current=null,document.removeEventListener("keydown",()=>{}),document.removeEventListener("keyup",()=>{})}}},[]),i.jsxs("div",{children:[i.jsx("div",{onDoubleClick:()=>{r.current&&(document.fullscreenElement?document.exitFullscreen():r.current.requestFullscreen())},ref:r,style:{width:"100%",height:"500px",userSelect:"none"}}),i.jsx(R,{onClick:k,className:"mt-4",children:`${s?"关闭":"打开"}原生相机控制`}),!s&&i.jsxs(I,{className:"mt-4",children:[i.jsx(x,{className:"h-4 w-4"}),i.jsx(N,{children:i.jsx("pre",{children:"试试使用qwe asd控制相机"})})]})]})}export{Y as default};
//# sourceMappingURL=control.BXuqR9UM.js.map

import"./_sentry-release-injection-file.B-UwqLso.js";import{v as no}from"./runtime-dom.esm-bundler.CwDmcoWR.js";import{s as dt,B as ki,h as eo,G as ro,H as Si,d as Ei,o as ve,m as io,u as ao,I as fr,J as oo,K as so,E as uo,L as co,M as lo,p as fo,i as ho,F as go,N as po,t as mo,O as _o,z as yo,P as vo,Q as xo,D as bo,r as wo,A as Mo,U as ko,V as So,W as Eo,x as Ao,v as Ro,X as Po,y as Io,Y as No,l as Co,w as To}from"./transform.Cz8yado1.js";import{i as Ai,F as zo,b as Oo,d as $o,c as Bo,a as Lo,f as qo,g as Do,h as Fo,n as Yo,o as Go}from"./defaultLocale.BMuxjawy.js";import{s as Xo,p as It}from"./pointer.Kth1cJfI.js";import{d as Ri,y as Pi}from"./nodrag.gN7VjRWd.js";import{d as Vo,s as Wo,z as Ho}from"./zoom.7ZYa1j7w.js";import{p as In,t as Hn,k as hn,o as Uo,e as jo,f as Ii,j as Ko,a as Zo,q as Jo,r as Qo,s as ts,u as ns,v as es,b as rs,d as is,i as as,w as os,x as ss,y as us,l as cs,z as ls,m as fs}from"./linear.BndfXy2v.js";import{a as vt}from"./ascending.CsD5ogAT.js";import{bR as hs,bc as ln,D as Nn,Z as Ni,bS as ds,bT as gs,X as Ci,W as Ti,Y as zi,m as xe,by as pn,bU as pt,bV as xt,bW as hr,bX as Kt,bY as F,bZ as H,b_ as L,b$ as Oi,c0 as Lt,c1 as ht,c2 as ps,c3 as dr,c4 as ms,c5 as _s,c6 as yt,c7 as be,c8 as we,c9 as Le,ca as Cn,bz as qe,cb as ys,cc as yn,cd as gr,ce as vs,cf as pr,cg as xs,ch as bs,ci as ws,cj as Ms,ck as $i,C as Bi,cl as Li,bu as ks,bO as Ss,cm as Es,cn as As,co as Rs,cp as Ps,bM as Is,bN as Ns,bL as Cs,cq as Ts,bK as zs,cr as Os,cs as $s,ct as Bs,cu as Ls,bJ as qs,cv as Ds,bI as Fs,cw as Ys,bH as Gs,cx as Xs,bG as Vs,cy as Ws,bF as Hs,cz as Us,bE as js,cA as Ks,bD as Zs,cB as Js,bC as Qs,cC as tu,bw as nu,cD as eu,cE as ru,bB as iu,cF as au,bx as ou,bA as su,cG as uu,cH as cu,bP as lu,bQ as fu,cI as hu,cJ as du,cK as gu,cL as pu,ai as mu,a9 as _u,av as yu,aw as vu,at as xu,au as bu,ax as wu,aj as Mu,ak as ku,bh as Su,cM as Eu,bg as Au,cN as Ru,ar as Pu,bi as Iu,aq as Nu,ay as Cu,an as Tu,aa as zu,ab as Ou,as as $u,aA as Bu,az as Lu,ac as qu,aB as Du,al as Fu,ad as Yu,ae as Gu,aC as Xu,af as Vu,ag as Wu,am as Hu,aH as Uu,ah as ju,ao as Ku,ap as Zu,aE as Ju,aD as Qu,aF as tc,aG as nc,cO as ec,cP as rc,V as ic,U as ac,cQ as oc,cR as sc,S as uc,p as cc,cS as lc,bf as fc,cT as hc,cU as dc,aI as gc,cV as pc,bv as mc,_ as _c,bp as yc,bm as vc,bk as xc,bl as bc,cW as wc,bj as Mc,b8 as kc,ba as Sc,bq as Ec,bb as Ac,bd as Rc,cX as Pc,cY as Ic,cZ as Nc,c_ as Cc,c$ as Tc,d0 as zc,b9 as Oc,be as $c,bn as Bc,bo as Lc,$ as qc,aS as Dc,aJ as Fc,aY as Yc,aZ as Gc,a0 as Xc,a_ as Vc,aT as Wc,aU as Hc,a1 as Uc,a$ as jc,aV as Kc,aK as Zc,a2 as Jc,a3 as Qc,a4 as tl,aL as nl,b0 as el,b1 as rl,aM as il,b2 as al,aW as ol,aN as sl,aO as ul,b3 as cl,aP as ll,aQ as fl,aX as hl,a5 as dl,a6 as gl,a7 as pl,aR as ml,a8 as _l,b4 as yl,b5 as vl,b6 as xl,b7 as bl,br as wl,R as Ml,d1 as kl,E as Sl,F as El,G as Al,H as Rl,I as Pl,J as Il,K as Nl,L as Cl,M as Tl,N as mr,O as zl,P as Ol,Q as $l,bt as _r,bs as Bl,b as Ll,d2 as ql,B as Dl,d3 as Fl,d4 as Yl,g as Gl,d5 as Xl,a as Vl,d6 as Wl,d7 as Hl,d8 as yr,d9 as vr,t as Ul,da as jl,c as Kl,db as Zl,j as Jl,dc as Ql,dd as tf,h as nf,de as ef,s as xr,df as br,i as wr,dg as Mr,f as rf,dh as af,di as of,dj as sf,d as uf,dk as cf,e as lf,dl as ff,k as hf,dm as df,n as gf,dn as pf,dp as mf,dq as _f,w as yf,dr as vf,l as xf,ds as bf,u as wf,dt as Mf,o as kf,du as Sf,z as Ef,dv as Af,x as Rf,dw as Pf,y as kr,dx as Sr,v as If,dy as Nf,dz as Cf,dA as Tf,q as zf,dB as Of,r as $f,dC as Bf,A as Lf,dD as qf,T as Df}from"./symbol.C3Vo_426.js";import{r as Bt}from"./range.D-5Q8ioH.js";import{g as Ff,r as Yf}from"./reverse.CJyOsb0K.js";import{I as qt,a as Gf,i as Xf,o as Vf}from"./ordinal.D9ljPjiG.js";import{b as Wf,c as Hf,e as Uf,a as jf,i as Kf,w as Zf}from"./rainbow.DjUF6Jfe.js";import{D as Jf,V as Qf}from"./delaunay.Cuv_kXMt.js";import{e as qi,a as Di,b as Fi,d as th,f as nh,g as eh,h as rh,i as ih,j as ah,c as oh,k as sh,l as uh,m as ch,n as lh,o as fh,t as hh}from"./autoType.BOF6Cg8k.js";import{N as De,c as dh,h as gh}from"./index.B81Z-UaN.js";import{c as Ut,q as Yi,j as Er,l as ph,m as mh,s as _h,x as yh,y as vh}from"./y.Bvvcn8Rw.js";import{i as Gi,a as xh}from"./init.BEQ4XkHb.js";import{p as Xi,P as bh,a as wh}from"./path.C6h6bzIp.js";import{d as Mn}from"./drag.JY6HRth5.js";import{i as Mh}from"./zoom.B6wIwFkC.js";import{s as kh}from"./category10.CPFRveg8.js";import{a as Sh}from"./arc.CvKiGV2e.js";import{w as Fe,a as z,t as ee,e as Ar}from"./path.B_4UUwUb.js";/* empty css                                                                       */import{_ as Eh}from"./_plugin-vue_export-helper.C8tdCacw.js";import{C as re,aa as Ah,H as Y,K as Rh,F as Ph,ab as Ih,D as _t,J as rn,u as Rr,v as Pr,G as ie,ac as Nh,O as Ch}from"./runtime-core.esm-bundler.BKs9EmSS.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},n=new t.Error().stack;n&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[n]="84bd9382-db85-41a2-9938-922cc634871c",t._sentryDebugIdIdentifier="sentry-dbid-84bd9382-db85-41a2-9938-922cc634871c")}catch{}})();function Th(t,n){if(!((n=+n)>=0))throw new RangeError("invalid r");let r=t.length;if(!((r=Math.floor(r))>=0))throw new RangeError("invalid length");if(!r||!n)return t;const e=Ye(n),i=t.slice();return e(t,i,0,r,1),e(i,t,0,r,1),e(t,i,0,r,1),t}const Vi=Wi(Ye),zh=Wi(Oh);function Wi(t){return function(n,r,e=r){if(!((r=+r)>=0))throw new RangeError("invalid rx");if(!((e=+e)>=0))throw new RangeError("invalid ry");let{data:i,width:a,height:o}=n;if(!((a=Math.floor(a))>=0))throw new RangeError("invalid width");if(!((o=Math.floor(o!==void 0?o:i.length/a))>=0))throw new RangeError("invalid height");if(!a||!o||!r&&!e)return n;const c=r&&t(r),u=e&&t(e),s=i.slice();return c&&u?(Ft(c,s,i,a,o),Ft(c,i,s,a,o),Ft(c,s,i,a,o),Yt(u,i,s,a,o),Yt(u,s,i,a,o),Yt(u,i,s,a,o)):c?(Ft(c,i,s,a,o),Ft(c,s,i,a,o),Ft(c,i,s,a,o)):u&&(Yt(u,i,s,a,o),Yt(u,s,i,a,o),Yt(u,i,s,a,o)),n}}function Ft(t,n,r,e,i){for(let a=0,o=e*i;a<o;)t(n,r,a,a+=e,1)}function Yt(t,n,r,e,i){for(let a=0,o=e*i;a<e;++a)t(n,r,a,a+o,e)}function Oh(t){const n=Ye(t);return(r,e,i,a,o)=>{i<<=2,a<<=2,o<<=2,n(r,e,i+0,a+0,o),n(r,e,i+1,a+1,o),n(r,e,i+2,a+2,o),n(r,e,i+3,a+3,o)}}function Ye(t){const n=Math.floor(t);if(n===t)return $h(t);const r=t-n,e=2*t+1;return(i,a,o,c,u)=>{if(!((c-=u)>=o))return;let s=n*a[o];const l=u*n,d=l+u;for(let f=o,m=o+l;f<m;f+=u)s+=a[Math.min(c,f)];for(let f=o,m=c;f<=m;f+=u)s+=a[Math.min(c,f+l)],i[f]=(s+r*(a[Math.max(o,f-d)]+a[Math.min(c,f+d)]))/e,s-=a[Math.max(o,f-l)]}}function $h(t){const n=2*t+1;return(r,e,i,a,o)=>{if(!((a-=o)>=i))return;let c=t*e[i];const u=o*t;for(let s=i,l=i+u;s<l;s+=o)c+=e[Math.min(a,s)];for(let s=i,l=a;s<=l;s+=o)c+=e[Math.min(a,s+u)],r[s]=c/n,c-=e[Math.max(i,s-u)]}}function Un(t,n){let r=0;if(n===void 0)for(let e of t)e!=null&&(e=+e)>=e&&++r;else{let e=-1;for(let i of t)(i=n(i,++e,t))!=null&&(i=+i)>=i&&++r}return r}var Bh=Array.prototype,Lh=Bh.slice;function ae(t){return()=>t}function Ge(t,n,r){let e;for(;;){const i=In(t,n,r);if(i===e||i===0||!isFinite(i))return[t,n];i>0?(t=Math.floor(t/i)*i,n=Math.ceil(n/i)*i):i<0&&(t=Math.ceil(t*i)/i,n=Math.floor(n*i)/i),e=i}}function Xe(t){return Math.max(1,Math.ceil(Math.log(Un(t))/Math.LN2)+1)}function Ir(){var t=hs,n=ln,r=Xe;function e(i){Array.isArray(i)||(i=Array.from(i));var a,o=i.length,c,u,s=new Array(o);for(a=0;a<o;++a)s[a]=t(i[a],a,i);var l=n(s),d=l[0],f=l[1],m=r(s,d,f);if(!Array.isArray(m)){const g=f,_=+m;if(n===ln&&([d,f]=Ge(d,f,_)),m=Hn(d,f,_),m[0]<=d&&(u=In(d,f,_)),m[m.length-1]>=f)if(g>=f&&n===ln){const b=In(d,f,_);isFinite(b)&&(b>0?f=(Math.floor(f/b)+1)*b:b<0&&(f=(Math.ceil(f*-b)+1)/-b))}else m.pop()}for(var v=m.length,x=0,h=v;m[x]<=d;)++x;for(;m[h-1]>f;)--h;(x||h<v)&&(m=m.slice(x,h),v=h-x);var p=new Array(v+1),y;for(a=0;a<=v;++a)y=p[a]=[],y.x0=a>0?m[a-1]:d,y.x1=a<v?m[a]:f;if(isFinite(u)){if(u>0)for(a=0;a<o;++a)(c=s[a])!=null&&d<=c&&c<=f&&p[Math.min(v,Math.floor((c-d)/u))].push(i[a]);else if(u<0){for(a=0;a<o;++a)if((c=s[a])!=null&&d<=c&&c<=f){const g=Math.floor((d-c)*u);p[Math.min(v,g+(m[g]<=c))].push(i[a])}}}else for(a=0;a<o;++a)(c=s[a])!=null&&d<=c&&c<=f&&p[hn(m,c,0,v)].push(i[a]);return p}return e.value=function(i){return arguments.length?(t=typeof i=="function"?i:ae(i),e):t},e.domain=function(i){return arguments.length?(n=typeof i=="function"?i:ae([i[0],i[1]]),e):n},e.thresholds=function(i){return arguments.length?(r=typeof i=="function"?i:ae(Array.isArray(i)?Lh.call(i):i),e):r},e}function qh(t,n,r){const e=Un(t),i=Nn(t,.75)-Nn(t,.25);return e&&i?Math.ceil((r-n)/(2*i*Math.pow(e,-1/3))):1}function Dh(t,n,r){const e=Un(t),i=Ni(t);return e&&i?Math.ceil((r-n)*Math.cbrt(e)/(3.49*i)):1}function Fh(t,n=vt){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let r=Array.from(t);const e=new Float64Array(r.length);n.length!==2&&(r=r.map(n),n=vt);const i=(c,u)=>n(r[c],r[u]);let a,o;return t=Uint32Array.from(r,(c,u)=>u),t.sort(n===vt?(c,u)=>ds(r[c],r[u]):gs(i)),t.forEach((c,u)=>{const s=i(c,a===void 0?c:a);s>=0?((a===void 0||s>0)&&(a=c,o=u),e[c]=o):e[c]=NaN}),e}function Yh(t,n=vt){let r,e=!1;if(n.length===1){let i;for(const a of t){const o=n(a);(e?vt(o,i)<0:vt(o,o)===0)&&(r=a,i=o,e=!0)}}else for(const i of t)(e?n(i,r)<0:n(i,i)===0)&&(r=i,e=!0);return r}function Hi(t,n=vt){if(n.length===1)return Ci(t,n);let r,e=-1,i=-1;for(const a of t)++i,(e<0?n(a,a)===0:n(a,r)<0)&&(r=a,e=i);return e}function Gh(t,n=vt){if(n.length===1)return Ti(t,n);let r,e=-1,i=-1;for(const a of t)++i,(e<0?n(a,a)===0:n(a,r)>0)&&(r=a,e=i);return e}function Xh(t,n){const r=Hi(t,n);return r<0?void 0:r}const Vh=Ui(Math.random);function Ui(t){return function(r,e=0,i=r.length){let a=i-(e=+e);for(;a;){const o=t()*a--|0,c=r[a+e];r[a+e]=r[o+e],r[o+e]=c}return r}}function ji(t){if(!(a=t.length))return[];for(var n=-1,r=zi(t,Wh),e=new Array(r);++n<r;)for(var i=-1,a,o=e[n]=new Array(a);++i<a;)o[i]=t[i][n];return e}function Wh(t){return t.length}function Hh(){return ji(arguments)}function Uh(t,n){if(typeof n!="function")throw new TypeError("test is not a function");let r=-1;for(const e of t)if(!n(e,++r,t))return!1;return!0}function jh(t,n){if(typeof n!="function")throw new TypeError("test is not a function");let r=-1;for(const e of t)if(n(e,++r,t))return!0;return!1}function Kh(t,n){if(typeof n!="function")throw new TypeError("test is not a function");const r=[];let e=-1;for(const i of t)n(i,++e,t)&&r.push(i);return r}function Zh(t,n){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof n!="function")throw new TypeError("mapper is not a function");return Array.from(t,(r,e)=>n(r,e,t))}function Jh(t,n,r){if(typeof n!="function")throw new TypeError("reducer is not a function");const e=t[Symbol.iterator]();let i,a,o=-1;if(arguments.length<3){if({done:i,value:r}=e.next(),i)return;++o}for(;{done:i,value:a}=e.next(),!i;)r=n(r,a,++o,t);return r}function Qh(t,...n){t=new qt(t);for(const r of n)for(const e of r)t.delete(e);return t}function td(t,n){const r=n[Symbol.iterator](),e=new qt;for(const i of t){if(e.has(i))return!1;let a,o;for(;({value:a,done:o}=r.next())&&!o;){if(Object.is(i,a))return!1;e.add(a)}}return!0}function nd(t,...n){t=new qt(t),n=n.map(ed);t:for(const r of t)for(const e of n)if(!e.has(r)){t.delete(r);continue t}return t}function ed(t){return t instanceof qt?t:new qt(t)}function Ki(t,n){const r=t[Symbol.iterator](),e=new Set;for(const i of n){const a=Nr(i);if(e.has(a))continue;let o,c;for(;{value:o,done:c}=r.next();){if(c)return!1;const u=Nr(o);if(e.add(u),Object.is(a,u))break}}return!0}function Nr(t){return t!==null&&typeof t=="object"?t.valueOf():t}function rd(t,n){return Ki(n,t)}function id(...t){const n=new qt;for(const r of t)for(const e of r)n.add(e);return n}function ad(t){return dt(ki(t).call(document.documentElement))}var od=0;function Zi(){return new Me}function Me(){this._="@"+(++od).toString(36)}Me.prototype=Zi.prototype={constructor:Me,get:function(t){for(var n=this._;!(n in t);)if(!(t=t.parentNode))return;return t[n]},set:function(t,n){return t[this._]=n},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};function sd(t,n){return t.target&&(t=Xo(t),n===void 0&&(n=t.currentTarget),t=t.touches||[t]),Array.from(t,r=>It(r,n))}function ud(t){var n=t.length;return function(r){return t[Math.max(0,Math.min(n-1,Math.floor(r*n)))]}}function cd(t,n){var r=eo(+t,+n);return function(e){var i=r(e);return i-360*Math.floor(i/360)}}function ld(t,n,r){var e=new ro,i=n;return n==null?(e.restart(t,n,r),e):(e._restart=e.restart,e.restart=function(a,o,c){o=+o,c=c==null?Si():+c,e._restart(function u(s){s+=i,e._restart(u,i+=o,c),a(s)},o,c)},e.restart(t,n,r),e)}const fd=t=>+t;function hd(t){return t*t}function dd(t){return t*(2-t)}function Cr(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}var Ve=3,gd=function t(n){n=+n;function r(e){return Math.pow(e,n)}return r.exponent=t,r}(Ve),pd=function t(n){n=+n;function r(e){return 1-Math.pow(1-e,n)}return r.exponent=t,r}(Ve),Tr=function t(n){n=+n;function r(e){return((e*=2)<=1?Math.pow(e,n):2-Math.pow(2-e,n))/2}return r.exponent=t,r}(Ve),Ji=Math.PI,Qi=Ji/2;function md(t){return+t==1?1:1-Math.cos(t*Qi)}function _d(t){return Math.sin(t*Qi)}function zr(t){return(1-Math.cos(Ji*t))/2}function Nt(t){return(Math.pow(2,-10*t)-.0009765625)*1.0009775171065494}function yd(t){return Nt(1-+t)}function vd(t){return 1-Nt(t)}function Or(t){return((t*=2)<=1?Nt(1-t):2-Nt(t-1))/2}function xd(t){return 1-Math.sqrt(1-t*t)}function bd(t){return Math.sqrt(1- --t*t)}function $r(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var ke=4/11,wd=6/11,Md=8/11,kd=3/4,Sd=9/11,Ed=10/11,Ad=15/16,Rd=21/22,Pd=63/64,vn=1/ke/ke;function Id(t){return 1-dn(1-t)}function dn(t){return(t=+t)<ke?vn*t*t:t<Md?vn*(t-=wd)*t+kd:t<Ed?vn*(t-=Sd)*t+Ad:vn*(t-=Rd)*t+Pd}function Nd(t){return((t*=2)<=1?1-dn(1-t):dn(t-1)+1)/2}var We=1.70158,Cd=function t(n){n=+n;function r(e){return(e=+e)*e*(n*(e-1)+e)}return r.overshoot=t,r}(We),Td=function t(n){n=+n;function r(e){return--e*e*((e+1)*n+e)+1}return r.overshoot=t,r}(We),Br=function t(n){n=+n;function r(e){return((e*=2)<1?e*e*((n+1)*e-n):(e-=2)*e*((n+1)*e+n)+2)/2}return r.overshoot=t,r}(We),Zt=2*Math.PI,He=1,Ue=.3,zd=function t(n,r){var e=Math.asin(1/(n=Math.max(1,n)))*(r/=Zt);function i(a){return n*Nt(- --a)*Math.sin((e-a)/r)}return i.amplitude=function(a){return t(a,r*Zt)},i.period=function(a){return t(n,a)},i}(He,Ue),Lr=function t(n,r){var e=Math.asin(1/(n=Math.max(1,n)))*(r/=Zt);function i(a){return 1-n*Nt(a=+a)*Math.sin((a+e)/r)}return i.amplitude=function(a){return t(a,r*Zt)},i.period=function(a){return t(n,a)},i}(He,Ue),Od=function t(n,r){var e=Math.asin(1/(n=Math.max(1,n)))*(r/=Zt);function i(a){return((a=a*2-1)<0?n*Nt(-a)*Math.sin((e-a)/r):2-n*Nt(a)*Math.sin((e+a)/r))/2}return i.amplitude=function(a){return t(a,r*Zt)},i.period=function(a){return t(n,a)},i}(He,Ue);const oe=t=>()=>t;function $d(t,{sourceEvent:n,target:r,selection:e,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},selection:{value:e,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function Bd(t){t.stopImmediatePropagation()}function se(t){t.preventDefault(),t.stopImmediatePropagation()}var qr={name:"drag"},ue={name:"space"},Gt={name:"handle"},Xt={name:"center"};const{abs:Dr,max:et,min:rt}=Math;function Fr(t){return[+t[0],+t[1]]}function Se(t){return[Fr(t[0]),Fr(t[1])]}var kn={name:"x",handles:["w","e"].map(gn),input:function(t,n){return t==null?null:[[+t[0],n[0][1]],[+t[1],n[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Sn={name:"y",handles:["n","s"].map(gn),input:function(t,n){return t==null?null:[[n[0][0],+t[0]],[n[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Ld={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(gn),input:function(t){return t==null?null:Se(t)},output:function(t){return t}},wt={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Yr={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Gr={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},qd={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Dd={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function gn(t){return{type:t}}function Fd(t){return!t.ctrlKey&&!t.button}function Yd(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Gd(){return navigator.maxTouchPoints||"ontouchstart"in this}function ce(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Xd(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Vd(t){var n=t.__brush;return n?n.dim.output(n.selection):null}function Wd(){return je(kn)}function Hd(){return je(Sn)}function Ud(){return je(Ld)}function je(t){var n=Yd,r=Fd,e=Gd,i=!0,a=Ei("start","brush","end"),o=6,c;function u(h){var p=h.property("__brush",x).selectAll(".overlay").data([gn("overlay")]);p.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",wt.overlay).merge(p).each(function(){var g=ce(this).extent;dt(this).attr("x",g[0][0]).attr("y",g[0][1]).attr("width",g[1][0]-g[0][0]).attr("height",g[1][1]-g[0][1])}),h.selectAll(".selection").data([gn("selection")]).enter().append("rect").attr("class","selection").attr("cursor",wt.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var y=h.selectAll(".handle").data(t.handles,function(g){return g.type});y.exit().remove(),y.enter().append("rect").attr("class",function(g){return"handle handle--"+g.type}).attr("cursor",function(g){return wt[g.type]}),h.each(s).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",f).filter(e).on("touchstart.brush",f).on("touchmove.brush",m).on("touchend.brush touchcancel.brush",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(h,p,y){h.tween?h.on("start.brush",function(g){l(this,arguments).beforestart().start(g)}).on("interrupt.brush end.brush",function(g){l(this,arguments).end(g)}).tween("brush",function(){var g=this,_=g.__brush,b=l(g,arguments),w=_.selection,R=t.input(typeof p=="function"?p.apply(this,arguments):p,_.extent),E=Ai(w,R);function C(k){_.selection=k===1&&R===null?null:E(k),s.call(g),b.brush()}return w!==null&&R!==null?C:C(1)}):h.each(function(){var g=this,_=arguments,b=g.__brush,w=t.input(typeof p=="function"?p.apply(g,_):p,b.extent),R=l(g,_).beforestart();ve(g),b.selection=w===null?null:w,s.call(g),R.start(y).brush(y).end(y)})},u.clear=function(h,p){u.move(h,null,p)};function s(){var h=dt(this),p=ce(this).selection;p?(h.selectAll(".selection").style("display",null).attr("x",p[0][0]).attr("y",p[0][1]).attr("width",p[1][0]-p[0][0]).attr("height",p[1][1]-p[0][1]),h.selectAll(".handle").style("display",null).attr("x",function(y){return y.type[y.type.length-1]==="e"?p[1][0]-o/2:p[0][0]-o/2}).attr("y",function(y){return y.type[0]==="s"?p[1][1]-o/2:p[0][1]-o/2}).attr("width",function(y){return y.type==="n"||y.type==="s"?p[1][0]-p[0][0]+o:o}).attr("height",function(y){return y.type==="e"||y.type==="w"?p[1][1]-p[0][1]+o:o})):h.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function l(h,p,y){var g=h.__brush.emitter;return g&&(!y||!g.clean)?g:new d(h,p,y)}function d(h,p,y){this.that=h,this.args=p,this.state=h.__brush,this.active=0,this.clean=y}d.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(h,p){return this.starting?(this.starting=!1,this.emit("start",h,p)):this.emit("brush",h),this},brush:function(h,p){return this.emit("brush",h,p),this},end:function(h,p){return--this.active===0&&(delete this.state.emitter,this.emit("end",h,p)),this},emit:function(h,p,y){var g=dt(this.that).datum();a.call(h,this.that,new $d(h,{sourceEvent:p,target:u,selection:t.output(this.state.selection),mode:y,dispatch:a}),g)}};function f(h){if(c&&!h.touches||!r.apply(this,arguments))return;var p=this,y=h.target.__data__.type,g=(i&&h.metaKey?y="overlay":y)==="selection"?qr:i&&h.altKey?Xt:Gt,_=t===Sn?null:qd[y],b=t===kn?null:Dd[y],w=ce(p),R=w.extent,E=w.selection,C=R[0][0],k,A,$=R[0][1],T,Z,ft=R[1][0],U,j,gt=R[1][1],J,K,X=0,V=0,M,I=_&&b&&i&&h.shiftKey,B,q,S=Array.from(h.touches||[h],N=>{const Q=N.identifier;return N=It(N,p),N.point0=N.slice(),N.identifier=Q,N});ve(p);var P=l(p,arguments,!0).beforestart();if(y==="overlay"){E&&(M=!0);const N=[S[0],S[1]||S[0]];w.selection=E=[[k=t===Sn?C:rt(N[0][0],N[1][0]),T=t===kn?$:rt(N[0][1],N[1][1])],[U=t===Sn?ft:et(N[0][0],N[1][0]),J=t===kn?gt:et(N[0][1],N[1][1])]],S.length>1&&Et(h)}else k=E[0][0],T=E[0][1],U=E[1][0],J=E[1][1];A=k,Z=T,j=U,K=J;var O=dt(p).attr("pointer-events","none"),D=O.selectAll(".overlay").attr("cursor",wt[y]);if(h.touches)P.moved=Dt,P.ended=st;else{var tt=dt(h.view).on("mousemove.brush",Dt,!0).on("mouseup.brush",st,!0);i&&tt.on("keydown.brush",nn,!0).on("keyup.brush",to,!0),Ri(h.view)}s.call(p),P.start(h,g.name);function Dt(N){for(const Q of N.changedTouches||[N])for(const en of S)en.identifier===Q.identifier&&(en.cur=It(Q,p));if(I&&!B&&!q&&S.length===1){const Q=S[0];Dr(Q.cur[0]-Q[0])>Dr(Q.cur[1]-Q[1])?q=!0:B=!0}for(const Q of S)Q.cur&&(Q[0]=Q.cur[0],Q[1]=Q.cur[1]);M=!0,se(N),Et(N)}function Et(N){const Q=S[0],en=Q.point0;var At;switch(X=Q[0]-en[0],V=Q[1]-en[1],g){case ue:case qr:{_&&(X=et(C-k,rt(ft-U,X)),A=k+X,j=U+X),b&&(V=et($-T,rt(gt-J,V)),Z=T+V,K=J+V);break}case Gt:{S[1]?(_&&(A=et(C,rt(ft,S[0][0])),j=et(C,rt(ft,S[1][0])),_=1),b&&(Z=et($,rt(gt,S[0][1])),K=et($,rt(gt,S[1][1])),b=1)):(_<0?(X=et(C-k,rt(ft-k,X)),A=k+X,j=U):_>0&&(X=et(C-U,rt(ft-U,X)),A=k,j=U+X),b<0?(V=et($-T,rt(gt-T,V)),Z=T+V,K=J):b>0&&(V=et($-J,rt(gt-J,V)),Z=T,K=J+V));break}case Xt:{_&&(A=et(C,rt(ft,k-X*_)),j=et(C,rt(ft,U+X*_))),b&&(Z=et($,rt(gt,T-V*b)),K=et($,rt(gt,J+V*b)));break}}j<A&&(_*=-1,At=k,k=U,U=At,At=A,A=j,j=At,y in Yr&&D.attr("cursor",wt[y=Yr[y]])),K<Z&&(b*=-1,At=T,T=J,J=At,At=Z,Z=K,K=At,y in Gr&&D.attr("cursor",wt[y=Gr[y]])),w.selection&&(E=w.selection),B&&(A=E[0][0],j=E[1][0]),q&&(Z=E[0][1],K=E[1][1]),(E[0][0]!==A||E[0][1]!==Z||E[1][0]!==j||E[1][1]!==K)&&(w.selection=[[A,Z],[j,K]],s.call(p),P.brush(N,g.name))}function st(N){if(Bd(N),N.touches){if(N.touches.length)return;c&&clearTimeout(c),c=setTimeout(function(){c=null},500)}else Pi(N.view,M),tt.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);O.attr("pointer-events","all"),D.attr("cursor",wt.overlay),w.selection&&(E=w.selection),Xd(E)&&(w.selection=null,s.call(p)),P.end(N,g.name)}function nn(N){switch(N.keyCode){case 16:{I=_&&b;break}case 18:{g===Gt&&(_&&(U=j-X*_,k=A+X*_),b&&(J=K-V*b,T=Z+V*b),g=Xt,Et(N));break}case 32:{(g===Gt||g===Xt)&&(_<0?U=j-X:_>0&&(k=A-X),b<0?J=K-V:b>0&&(T=Z-V),g=ue,D.attr("cursor",wt.selection),Et(N));break}default:return}se(N)}function to(N){switch(N.keyCode){case 16:{I&&(B=q=I=!1,Et(N));break}case 18:{g===Xt&&(_<0?U=j:_>0&&(k=A),b<0?J=K:b>0&&(T=Z),g=Gt,Et(N));break}case 32:{g===ue&&(N.altKey?(_&&(U=j-X*_,k=A+X*_),b&&(J=K-V*b,T=Z+V*b),g=Xt):(_<0?U=j:_>0&&(k=A),b<0?J=K:b>0&&(T=Z),g=Gt),D.attr("cursor",wt[y]),Et(N));break}default:return}se(N)}}function m(h){l(this,arguments).moved(h)}function v(h){l(this,arguments).ended(h)}function x(){var h=this.__brush||{selection:null};return h.extent=Se(n.apply(this,arguments)),h.dim=t,h}return u.extent=function(h){return arguments.length?(n=typeof h=="function"?h:oe(Se(h)),u):n},u.filter=function(h){return arguments.length?(r=typeof h=="function"?h:oe(!!h),u):r},u.touchable=function(h){return arguments.length?(e=typeof h=="function"?h:oe(!!h),u):e},u.handleSize=function(h){return arguments.length?(o=+h,u):o},u.keyModifiers=function(h){return arguments.length?(i=!!h,u):i},u.on=function(){var h=a.on.apply(a,arguments);return h===a?u:h},u}var Xr=Math.abs,Vt=Math.cos,Wt=Math.sin,ta=Math.PI,xn=ta/2,Vr=ta*2,Wr=Math.max,le=1e-12;function fe(t,n){return Array.from({length:n-t},(r,e)=>t+e)}function jd(t){return function(n,r){return t(n.source.value+n.target.value,r.source.value+r.target.value)}}function Kd(){return Ke(!1,!1)}function Zd(){return Ke(!1,!0)}function Jd(){return Ke(!0,!1)}function Ke(t,n){var r=0,e=null,i=null,a=null;function o(c){var u=c.length,s=new Array(u),l=fe(0,u),d=new Array(u*u),f=new Array(u),m=0,v;c=Float64Array.from({length:u*u},n?(x,h)=>c[h%u][h/u|0]:(x,h)=>c[h/u|0][h%u]);for(let x=0;x<u;++x){let h=0;for(let p=0;p<u;++p)h+=c[x*u+p]+t*c[p*u+x];m+=s[x]=h}m=Wr(0,Vr-r*u)/m,v=m?r:Vr/u;{let x=0;e&&l.sort((h,p)=>e(s[h],s[p]));for(const h of l){const p=x;if(t){const y=fe(~u+1,u).filter(g=>g<0?c[~g*u+h]:c[h*u+g]);i&&y.sort((g,_)=>i(g<0?-c[~g*u+h]:c[h*u+g],_<0?-c[~_*u+h]:c[h*u+_]));for(const g of y)if(g<0){const _=d[~g*u+h]||(d[~g*u+h]={source:null,target:null});_.target={index:h,startAngle:x,endAngle:x+=c[~g*u+h]*m,value:c[~g*u+h]}}else{const _=d[h*u+g]||(d[h*u+g]={source:null,target:null});_.source={index:h,startAngle:x,endAngle:x+=c[h*u+g]*m,value:c[h*u+g]}}f[h]={index:h,startAngle:p,endAngle:x,value:s[h]}}else{const y=fe(0,u).filter(g=>c[h*u+g]||c[g*u+h]);i&&y.sort((g,_)=>i(c[h*u+g],c[h*u+_]));for(const g of y){let _;if(h<g?(_=d[h*u+g]||(d[h*u+g]={source:null,target:null}),_.source={index:h,startAngle:x,endAngle:x+=c[h*u+g]*m,value:c[h*u+g]}):(_=d[g*u+h]||(d[g*u+h]={source:null,target:null}),_.target={index:h,startAngle:x,endAngle:x+=c[h*u+g]*m,value:c[h*u+g]},h===g&&(_.source=_.target)),_.source&&_.target&&_.source.value<_.target.value){const b=_.source;_.source=_.target,_.target=b}}f[h]={index:h,startAngle:p,endAngle:x,value:s[h]}}x+=v}}return d=Object.values(d),d.groups=f,a?d.sort(a):d}return o.padAngle=function(c){return arguments.length?(r=Wr(0,c),o):r},o.sortGroups=function(c){return arguments.length?(e=c,o):e},o.sortSubgroups=function(c){return arguments.length?(i=c,o):i},o.sortChords=function(c){return arguments.length?(c==null?a=null:(a=jd(c))._=c,o):a&&a._},o}var Qd=Array.prototype.slice;function Tt(t){return function(){return t}}function t1(t){return t.source}function n1(t){return t.target}function Hr(t){return t.radius}function e1(t){return t.startAngle}function r1(t){return t.endAngle}function i1(){return 0}function a1(){return 10}function na(t){var n=t1,r=n1,e=Hr,i=Hr,a=e1,o=r1,c=i1,u=null;function s(){var l,d=n.apply(this,arguments),f=r.apply(this,arguments),m=c.apply(this,arguments)/2,v=Qd.call(arguments),x=+e.apply(this,(v[0]=d,v)),h=a.apply(this,v)-xn,p=o.apply(this,v)-xn,y=+i.apply(this,(v[0]=f,v)),g=a.apply(this,v)-xn,_=o.apply(this,v)-xn;if(u||(u=l=Xi()),m>le&&(Xr(p-h)>m*2+le?p>h?(h+=m,p-=m):(h-=m,p+=m):h=p=(h+p)/2,Xr(_-g)>m*2+le?_>g?(g+=m,_-=m):(g-=m,_+=m):g=_=(g+_)/2),u.moveTo(x*Vt(h),x*Wt(h)),u.arc(0,0,x,h,p),h!==g||p!==_)if(t){var b=+t.apply(this,arguments),w=y-b,R=(g+_)/2;u.quadraticCurveTo(0,0,w*Vt(g),w*Wt(g)),u.lineTo(y*Vt(R),y*Wt(R)),u.lineTo(w*Vt(_),w*Wt(_))}else u.quadraticCurveTo(0,0,y*Vt(g),y*Wt(g)),u.arc(0,0,y,g,_);if(u.quadraticCurveTo(0,0,x*Vt(h),x*Wt(h)),u.closePath(),l)return u=null,l+""||null}return t&&(s.headRadius=function(l){return arguments.length?(t=typeof l=="function"?l:Tt(+l),s):t}),s.radius=function(l){return arguments.length?(e=i=typeof l=="function"?l:Tt(+l),s):e},s.sourceRadius=function(l){return arguments.length?(e=typeof l=="function"?l:Tt(+l),s):e},s.targetRadius=function(l){return arguments.length?(i=typeof l=="function"?l:Tt(+l),s):i},s.startAngle=function(l){return arguments.length?(a=typeof l=="function"?l:Tt(+l),s):a},s.endAngle=function(l){return arguments.length?(o=typeof l=="function"?l:Tt(+l),s):o},s.padAngle=function(l){return arguments.length?(c=typeof l=="function"?l:Tt(+l),s):c},s.source=function(l){return arguments.length?(n=l,s):n},s.target=function(l){return arguments.length?(r=l,s):r},s.context=function(l){return arguments.length?(u=l??null,s):u},s}function o1(){return na()}function s1(){return na(a1)}var u1=Array.prototype,ea=u1.slice;function c1(t,n){return t-n}function l1(t){for(var n=0,r=t.length,e=t[r-1][1]*t[0][0]-t[r-1][0]*t[0][1];++n<r;)e+=t[n-1][1]*t[n][0]-t[n-1][0]*t[n][1];return e}const Rt=t=>()=>t;function f1(t,n){for(var r=-1,e=n.length,i;++r<e;)if(i=h1(t,n[r]))return i;return 0}function h1(t,n){for(var r=n[0],e=n[1],i=-1,a=0,o=t.length,c=o-1;a<o;c=a++){var u=t[a],s=u[0],l=u[1],d=t[c],f=d[0],m=d[1];if(d1(u,d,n))return 0;l>e!=m>e&&r<(f-s)*(e-l)/(m-l)+s&&(i=-i)}return i}function d1(t,n,r){var e;return g1(t,n,r)&&p1(t[e=+(t[0]===n[0])],r[e],n[e])}function g1(t,n,r){return(n[0]-t[0])*(r[1]-t[1])===(r[0]-t[0])*(n[1]-t[1])}function p1(t,n,r){return t<=n&&n<=r||r<=n&&n<=t}function m1(){}var Mt=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Ee(){var t=1,n=1,r=Xe,e=u;function i(s){var l=r(s);if(Array.isArray(l))l=l.slice().sort(c1);else{const d=ln(s,_1);for(l=Hn(...Ge(d[0],d[1],l),l);l[l.length-1]>=d[1];)l.pop();for(;l[1]<d[0];)l.shift()}return l.map(d=>a(s,d))}function a(s,l){const d=l==null?NaN:+l;if(isNaN(d))throw new Error(`invalid value: ${l}`);var f=[],m=[];return o(s,d,function(v){e(v,s,d),l1(v)>0?f.push([v]):m.push(v)}),m.forEach(function(v){for(var x=0,h=f.length,p;x<h;++x)if(f1((p=f[x])[0],v)!==-1){p.push(v);return}}),{type:"MultiPolygon",value:l,coordinates:f}}function o(s,l,d){var f=new Array,m=new Array,v,x,h,p,y,g;for(v=x=-1,p=zt(s[0],l),Mt[p<<1].forEach(_);++v<t-1;)h=p,p=zt(s[v+1],l),Mt[h|p<<1].forEach(_);for(Mt[p<<0].forEach(_);++x<n-1;){for(v=-1,p=zt(s[x*t+t],l),y=zt(s[x*t],l),Mt[p<<1|y<<2].forEach(_);++v<t-1;)h=p,p=zt(s[x*t+t+v+1],l),g=y,y=zt(s[x*t+v+1],l),Mt[h|p<<1|y<<2|g<<3].forEach(_);Mt[p|y<<3].forEach(_)}for(v=-1,y=s[x*t]>=l,Mt[y<<2].forEach(_);++v<t-1;)g=y,y=zt(s[x*t+v+1],l),Mt[y<<2|g<<3].forEach(_);Mt[y<<3].forEach(_);function _(b){var w=[b[0][0]+v,b[0][1]+x],R=[b[1][0]+v,b[1][1]+x],E=c(w),C=c(R),k,A;(k=m[E])?(A=f[C])?(delete m[k.end],delete f[A.start],k===A?(k.ring.push(R),d(k.ring)):f[k.start]=m[A.end]={start:k.start,end:A.end,ring:k.ring.concat(A.ring)}):(delete m[k.end],k.ring.push(R),m[k.end=C]=k):(k=f[C])?(A=m[E])?(delete f[k.start],delete m[A.end],k===A?(k.ring.push(R),d(k.ring)):f[A.start]=m[k.end]={start:A.start,end:k.end,ring:A.ring.concat(k.ring)}):(delete f[k.start],k.ring.unshift(w),f[k.start=E]=k):f[E]=m[C]={start:E,end:C,ring:[w,R]}}}function c(s){return s[0]*2+s[1]*(t+1)*4}function u(s,l,d){s.forEach(function(f){var m=f[0],v=f[1],x=m|0,h=v|0,p=he(l[h*t+x]);m>0&&m<t&&x===m&&(f[0]=Ur(m,he(l[h*t+x-1]),p,d)),v>0&&v<n&&h===v&&(f[1]=Ur(v,he(l[(h-1)*t+x]),p,d))})}return i.contour=a,i.size=function(s){if(!arguments.length)return[t,n];var l=Math.floor(s[0]),d=Math.floor(s[1]);if(!(l>=0&&d>=0))throw new Error("invalid size");return t=l,n=d,i},i.thresholds=function(s){return arguments.length?(r=typeof s=="function"?s:Array.isArray(s)?Rt(ea.call(s)):Rt(s),i):r},i.smooth=function(s){return arguments.length?(e=s?u:m1,i):e===u},i}function _1(t){return isFinite(t)?t:NaN}function zt(t,n){return t==null?!1:+t>=n}function he(t){return t==null||isNaN(t=+t)?-1/0:t}function Ur(t,n,r,e){const i=e-n,a=r-n,o=isFinite(i)||isFinite(a)?i/a:Math.sign(i)/Math.sign(a);return isNaN(o)?t:t+o-.5}function y1(t){return t[0]}function v1(t){return t[1]}function x1(){return 1}function b1(){var t=y1,n=v1,r=x1,e=960,i=500,a=20,o=2,c=a*3,u=e+c*2>>o,s=i+c*2>>o,l=Rt(20);function d(y){var g=new Float32Array(u*s),_=Math.pow(2,-o),b=-1;for(const T of y){var w=(t(T,++b,y)+c)*_,R=(n(T,b,y)+c)*_,E=+r(T,b,y);if(E&&w>=0&&w<u&&R>=0&&R<s){var C=Math.floor(w),k=Math.floor(R),A=w-C-.5,$=R-k-.5;g[C+k*u]+=(1-A)*(1-$)*E,g[C+1+k*u]+=A*(1-$)*E,g[C+1+(k+1)*u]+=A*$*E,g[C+(k+1)*u]+=(1-A)*$*E}}return Vi({data:g,width:u,height:s},a*_),g}function f(y){var g=d(y),_=l(g),b=Math.pow(2,2*o);return Array.isArray(_)||(_=Hn(Number.MIN_VALUE,xe(g)/b,_)),Ee().size([u,s]).thresholds(_.map(w=>w*b))(g).map((w,R)=>(w.value=+_[R],m(w)))}f.contours=function(y){var g=d(y),_=Ee().size([u,s]),b=Math.pow(2,2*o),w=R=>{R=+R;var E=m(_.contour(g,R*b));return E.value=R,E};return Object.defineProperty(w,"max",{get:()=>xe(g)/b}),w};function m(y){return y.coordinates.forEach(v),y}function v(y){y.forEach(x)}function x(y){y.forEach(h)}function h(y){y[0]=y[0]*Math.pow(2,o)-c,y[1]=y[1]*Math.pow(2,o)-c}function p(){return c=a*3,u=e+c*2>>o,s=i+c*2>>o,f}return f.x=function(y){return arguments.length?(t=typeof y=="function"?y:Rt(+y),f):t},f.y=function(y){return arguments.length?(n=typeof y=="function"?y:Rt(+y),f):n},f.weight=function(y){return arguments.length?(r=typeof y=="function"?y:Rt(+y),f):r},f.size=function(y){if(!arguments.length)return[e,i];var g=+y[0],_=+y[1];if(!(g>=0&&_>=0))throw new Error("invalid size");return e=g,i=_,p()},f.cellSize=function(y){if(!arguments.length)return 1<<o;if(!((y=+y)>=1))throw new Error("invalid cell size");return o=Math.floor(Math.log(y)/Math.LN2),p()},f.thresholds=function(y){return arguments.length?(l=typeof y=="function"?y:Array.isArray(y)?Rt(ea.call(y)):Rt(y),f):l},f.bandwidth=function(y){if(!arguments.length)return Math.sqrt(a*(a+1));if(!((y=+y)>=0))throw new Error("invalid bandwidth");return a=(Math.sqrt(4*y*y+1)-1)/2,p()},f}function w1(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function M1(t,n){return fetch(t,n).then(w1)}function k1(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function S1(t,n){return fetch(t,n).then(k1)}function E1(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function jn(t,n){return fetch(t,n).then(E1)}function ra(t){return function(n,r,e){return arguments.length===2&&typeof r=="function"&&(e=r,r=void 0),jn(n,r).then(function(i){return t(i,e)})}}function A1(t,n,r,e){arguments.length===3&&typeof r=="function"&&(e=r,r=void 0);var i=qi(t);return jn(n,r).then(function(a){return i.parse(a,e)})}var R1=ra(Fi),P1=ra(Di);function I1(t,n){return new Promise(function(r,e){var i=new Image;for(var a in n)i[a]=n[a];i.onerror=e,i.onload=function(){r(i)},i.src=t})}function N1(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function C1(t,n){return fetch(t,n).then(N1)}function Ze(t){return(n,r)=>jn(n,r).then(e=>new DOMParser().parseFromString(e,t))}const T1=Ze("application/xml");var z1=Ze("text/html"),O1=Ze("image/svg+xml");function $1(t,n){var r,e=1;t==null&&(t=0),n==null&&(n=0);function i(){var a,o=r.length,c,u=0,s=0;for(a=0;a<o;++a)c=r[a],u+=c.x,s+=c.y;for(u=(u/o-t)*e,s=(s/o-n)*e,a=0;a<o;++a)c=r[a],c.x-=u,c.y-=s}return i.initialize=function(a){r=a},i.x=function(a){return arguments.length?(t=+a,i):t},i.y=function(a){return arguments.length?(n=+a,i):n},i.strength=function(a){return arguments.length?(e=+a,i):e},i}function B1(t){return t.x+t.vx}function L1(t){return t.y+t.vy}function q1(t){var n,r,e,i=1,a=1;typeof t!="function"&&(t=Ut(t==null?1:+t));function o(){for(var s,l=n.length,d,f,m,v,x,h,p=0;p<a;++p)for(d=Yi(n,B1,L1).visitAfter(c),s=0;s<l;++s)f=n[s],x=r[f.index],h=x*x,m=f.x+f.vx,v=f.y+f.vy,d.visit(y);function y(g,_,b,w,R){var E=g.data,C=g.r,k=x+C;if(E){if(E.index>f.index){var A=m-E.x-E.vx,$=v-E.y-E.vy,T=A*A+$*$;T<k*k&&(A===0&&(A=Er(e),T+=A*A),$===0&&($=Er(e),T+=$*$),T=(k-(T=Math.sqrt(T)))/T*i,f.vx+=(A*=T)*(k=(C*=C)/(h+C)),f.vy+=($*=T)*k,E.vx-=A*(k=1-k),E.vy-=$*k)}return}return _>m+k||w<m-k||b>v+k||R<v-k}}function c(s){if(s.data)return s.r=r[s.data.index];for(var l=s.r=0;l<4;++l)s[l]&&s[l].r>s.r&&(s.r=s[l].r)}function u(){if(n){var s,l=n.length,d;for(r=new Array(l),s=0;s<l;++s)d=n[s],r[d.index]=+t(d,s,n)}}return o.initialize=function(s,l){n=s,e=l,u()},o.iterations=function(s){return arguments.length?(a=+s,o):a},o.strength=function(s){return arguments.length?(i=+s,o):i},o.radius=function(s){return arguments.length?(t=typeof s=="function"?s:Ut(+s),u(),o):t},o}function D1(t,n,r){var e,i=Ut(.1),a,o;typeof t!="function"&&(t=Ut(+t)),n==null&&(n=0),r==null&&(r=0);function c(s){for(var l=0,d=e.length;l<d;++l){var f=e[l],m=f.x-n||1e-6,v=f.y-r||1e-6,x=Math.sqrt(m*m+v*v),h=(o[l]-x)*a[l]*s/x;f.vx+=m*h,f.vy+=v*h}}function u(){if(e){var s,l=e.length;for(a=new Array(l),o=new Array(l),s=0;s<l;++s)o[s]=+t(e[s],s,e),a[s]=isNaN(o[s])?0:+i(e[s],s,e)}}return c.initialize=function(s){e=s,u()},c.strength=function(s){return arguments.length?(i=typeof s=="function"?s:Ut(+s),u(),c):i},c.radius=function(s){return arguments.length?(t=typeof s=="function"?s:Ut(+s),u(),c):t},c.x=function(s){return arguments.length?(n=+s,c):n},c.y=function(s){return arguments.length?(r=+s,c):r},c}var Tn=new xt,zn=new xt,ia,aa,Ae,Re,Pe,bt={point:pt,lineStart:pt,lineEnd:pt,polygonStart:function(){Tn=new xt,bt.lineStart=F1,bt.lineEnd=Y1},polygonEnd:function(){var t=+Tn;zn.add(t<0?hr+t:t),this.lineStart=this.lineEnd=this.point=pt},sphere:function(){zn.add(hr)}};function F1(){bt.point=G1}function Y1(){oa(ia,aa)}function G1(t,n){bt.point=oa,ia=t,aa=n,t*=L,n*=L,Ae=t,Re=H(n=n/2+Oi),Pe=F(n)}function oa(t,n){t*=L,n*=L,n=n/2+Oi;var r=t-Ae,e=r>=0?1:-1,i=e*r,a=H(n),o=F(n),c=Pe*o,u=Re*a+c*H(i),s=c*e*F(i);Tn.add(Kt(s,u)),Ae=t,Re=a,Pe=o}function X1(t){return zn=new xt,pn(t,bt),zn*2}var G,ut,W,lt,Ot,sa,ua,jt,fn,Pt,St,kt={point:Ie,lineStart:jr,lineEnd:Kr,polygonStart:function(){kt.point=la,kt.lineStart=V1,kt.lineEnd=W1,fn=new xt,bt.polygonStart()},polygonEnd:function(){bt.polygonEnd(),kt.point=Ie,kt.lineStart=jr,kt.lineEnd=Kr,Tn<0?(G=-(W=180),ut=-(lt=90)):fn>ht?lt=90:fn<-1e-6&&(ut=-90),St[0]=G,St[1]=W},sphere:function(){G=-(W=180),ut=-(lt=90)}};function Ie(t,n){Pt.push(St=[G=t,W=t]),n<ut&&(ut=n),n>lt&&(lt=n)}function ca(t,n){var r=ps([t*L,n*L]);if(jt){var e=dr(jt,r),i=[e[1],-e[0],0],a=dr(i,e);ms(a),a=_s(a);var o=t-Ot,c=o>0?1:-1,u=a[0]*yt*c,s,l=Lt(o)>180;l^(c*Ot<u&&u<c*t)?(s=a[1]*yt,s>lt&&(lt=s)):(u=(u+360)%360-180,l^(c*Ot<u&&u<c*t)?(s=-a[1]*yt,s<ut&&(ut=s)):(n<ut&&(ut=n),n>lt&&(lt=n))),l?t<Ot?ct(G,t)>ct(G,W)&&(W=t):ct(t,W)>ct(G,W)&&(G=t):W>=G?(t<G&&(G=t),t>W&&(W=t)):t>Ot?ct(G,t)>ct(G,W)&&(W=t):ct(t,W)>ct(G,W)&&(G=t)}else Pt.push(St=[G=t,W=t]);n<ut&&(ut=n),n>lt&&(lt=n),jt=r,Ot=t}function jr(){kt.point=ca}function Kr(){St[0]=G,St[1]=W,kt.point=Ie,jt=null}function la(t,n){if(jt){var r=t-Ot;fn.add(Lt(r)>180?r+(r>0?360:-360):r)}else sa=t,ua=n;bt.point(t,n),ca(t,n)}function V1(){bt.lineStart()}function W1(){la(sa,ua),bt.lineEnd(),Lt(fn)>ht&&(G=-(W=180)),St[0]=G,St[1]=W,jt=null}function ct(t,n){return(n-=t)<0?n+360:n}function H1(t,n){return t[0]-n[0]}function Zr(t,n){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}function U1(t){var n,r,e,i,a,o,c;if(lt=W=-(G=ut=1/0),Pt=[],pn(t,kt),r=Pt.length){for(Pt.sort(H1),n=1,e=Pt[0],a=[e];n<r;++n)i=Pt[n],Zr(e,i[0])||Zr(e,i[1])?(ct(e[0],i[1])>ct(e[0],e[1])&&(e[1]=i[1]),ct(i[0],e[1])>ct(e[0],e[1])&&(e[0]=i[0])):a.push(e=i);for(o=-1/0,r=a.length-1,n=0,e=a[r];n<=r;e=i,++n)i=a[n],(c=ct(e[1],i[0]))>o&&(o=c,G=i[0],W=e[1])}return Pt=St=null,G===1/0||ut===1/0?[[NaN,NaN],[NaN,NaN]]:[[G,ut],[W,lt]]}var on,On,$n,Bn,Ln,qn,Dn,Fn,Ne,Ce,Te,fa,ha,it,at,ot,mt={sphere:pt,point:Je,lineStart:Jr,lineEnd:Qr,polygonStart:function(){mt.lineStart=Z1,mt.lineEnd=J1},polygonEnd:function(){mt.lineStart=Jr,mt.lineEnd=Qr}};function Je(t,n){t*=L,n*=L;var r=H(n);mn(r*H(t),r*F(t),F(n))}function mn(t,n,r){++on,$n+=(t-$n)/on,Bn+=(n-Bn)/on,Ln+=(r-Ln)/on}function Jr(){mt.point=j1}function j1(t,n){t*=L,n*=L;var r=H(n);it=r*H(t),at=r*F(t),ot=F(n),mt.point=K1,mn(it,at,ot)}function K1(t,n){t*=L,n*=L;var r=H(n),e=r*H(t),i=r*F(t),a=F(n),o=Kt(Cn((o=at*a-ot*i)*o+(o=ot*e-it*a)*o+(o=it*i-at*e)*o),it*e+at*i+ot*a);On+=o,qn+=o*(it+(it=e)),Dn+=o*(at+(at=i)),Fn+=o*(ot+(ot=a)),mn(it,at,ot)}function Qr(){mt.point=Je}function Z1(){mt.point=Q1}function J1(){da(fa,ha),mt.point=Je}function Q1(t,n){fa=t,ha=n,t*=L,n*=L,mt.point=da;var r=H(n);it=r*H(t),at=r*F(t),ot=F(n),mn(it,at,ot)}function da(t,n){t*=L,n*=L;var r=H(n),e=r*H(t),i=r*F(t),a=F(n),o=at*a-ot*i,c=ot*e-it*a,u=it*i-at*e,s=we(o,c,u),l=Le(s),d=s&&-l/s;Ne.add(d*o),Ce.add(d*c),Te.add(d*u),On+=l,qn+=l*(it+(it=e)),Dn+=l*(at+(at=i)),Fn+=l*(ot+(ot=a)),mn(it,at,ot)}function t0(t){on=On=$n=Bn=Ln=qn=Dn=Fn=0,Ne=new xt,Ce=new xt,Te=new xt,pn(t,mt);var n=+Ne,r=+Ce,e=+Te,i=we(n,r,e);return i<be&&(n=qn,r=Dn,e=Fn,On<ht&&(n=$n,r=Bn,e=Ln),i=we(n,r,e),i<be)?[NaN,NaN]:[Kt(r,n)*yt,Le(e/i)*yt]}function n0(){var t=0,n=0,r=960,e=500,i,a,o;return o={stream:function(c){return i&&a===c?i:i=qe(t,n,r,e)(a=c)},extent:function(c){return arguments.length?(t=+c[0][0],n=+c[0][1],r=+c[1][0],e=+c[1][1],i=a=null,o):[[t,n],[r,e]]}}}var ze,Oe,En,An,Jt={sphere:pt,point:pt,lineStart:e0,lineEnd:pt,polygonStart:pt,polygonEnd:pt};function e0(){Jt.point=i0,Jt.lineEnd=r0}function r0(){Jt.point=Jt.lineEnd=pt}function i0(t,n){t*=L,n*=L,Oe=t,En=F(n),An=H(n),Jt.point=a0}function a0(t,n){t*=L,n*=L;var r=F(n),e=H(n),i=Lt(t-Oe),a=H(i),o=F(i),c=e*o,u=An*r-En*e*a,s=En*r+An*e*a;ze.add(Kt(Cn(c*c+u*u),s)),Oe=t,En=r,An=e}function ga(t){return ze=new xt,pn(t,Jt),+ze}var $e=[null,null],o0={type:"LineString",coordinates:$e};function Yn(t,n){return $e[0]=t,$e[1]=n,ga(o0)}var ti={Feature:function(t,n){return Gn(t.geometry,n)},FeatureCollection:function(t,n){for(var r=t.features,e=-1,i=r.length;++e<i;)if(Gn(r[e].geometry,n))return!0;return!1}},ni={Sphere:function(){return!0},Point:function(t,n){return ei(t.coordinates,n)},MultiPoint:function(t,n){for(var r=t.coordinates,e=-1,i=r.length;++e<i;)if(ei(r[e],n))return!0;return!1},LineString:function(t,n){return ri(t.coordinates,n)},MultiLineString:function(t,n){for(var r=t.coordinates,e=-1,i=r.length;++e<i;)if(ri(r[e],n))return!0;return!1},Polygon:function(t,n){return ii(t.coordinates,n)},MultiPolygon:function(t,n){for(var r=t.coordinates,e=-1,i=r.length;++e<i;)if(ii(r[e],n))return!0;return!1},GeometryCollection:function(t,n){for(var r=t.geometries,e=-1,i=r.length;++e<i;)if(Gn(r[e],n))return!0;return!1}};function Gn(t,n){return t&&ni.hasOwnProperty(t.type)?ni[t.type](t,n):!1}function ei(t,n){return Yn(t,n)===0}function ri(t,n){for(var r,e,i,a=0,o=t.length;a<o;a++){if(e=Yn(t[a],n),e===0||a>0&&(i=Yn(t[a],t[a-1]),i>0&&r<=i&&e<=i&&(r+e-i)*(1-Math.pow((r-e)/i,2))<be*i))return!0;r=e}return!1}function ii(t,n){return!!ys(t.map(s0),pa(n))}function s0(t){return t=t.map(pa),t.pop(),t}function pa(t){return[t[0]*L,t[1]*L]}function u0(t,n){return(t&&ti.hasOwnProperty(t.type)?ti[t.type]:Gn)(t,n)}function ai(t,n,r){var e=Bt(t,n-ht,r).concat(n);return function(i){return e.map(function(a){return[i,a]})}}function oi(t,n,r){var e=Bt(t,n-ht,r).concat(n);return function(i){return e.map(function(a){return[a,i]})}}function ma(){var t,n,r,e,i,a,o,c,u=10,s=u,l=90,d=360,f,m,v,x,h=2.5;function p(){return{type:"MultiLineString",coordinates:y()}}function y(){return Bt(yn(e/l)*l,r,l).map(v).concat(Bt(yn(c/d)*d,o,d).map(x)).concat(Bt(yn(n/u)*u,t,u).filter(function(g){return Lt(g%l)>ht}).map(f)).concat(Bt(yn(a/s)*s,i,s).filter(function(g){return Lt(g%d)>ht}).map(m))}return p.lines=function(){return y().map(function(g){return{type:"LineString",coordinates:g}})},p.outline=function(){return{type:"Polygon",coordinates:[v(e).concat(x(o).slice(1),v(r).reverse().slice(1),x(c).reverse().slice(1))]}},p.extent=function(g){return arguments.length?p.extentMajor(g).extentMinor(g):p.extentMinor()},p.extentMajor=function(g){return arguments.length?(e=+g[0][0],r=+g[1][0],c=+g[0][1],o=+g[1][1],e>r&&(g=e,e=r,r=g),c>o&&(g=c,c=o,o=g),p.precision(h)):[[e,c],[r,o]]},p.extentMinor=function(g){return arguments.length?(n=+g[0][0],t=+g[1][0],a=+g[0][1],i=+g[1][1],n>t&&(g=n,n=t,t=g),a>i&&(g=a,a=i,i=g),p.precision(h)):[[n,a],[t,i]]},p.step=function(g){return arguments.length?p.stepMajor(g).stepMinor(g):p.stepMinor()},p.stepMajor=function(g){return arguments.length?(l=+g[0],d=+g[1],p):[l,d]},p.stepMinor=function(g){return arguments.length?(u=+g[0],s=+g[1],p):[u,s]},p.precision=function(g){return arguments.length?(h=+g,f=ai(a,i,90),m=oi(n,t,h),v=ai(c,o,90),x=oi(e,r,h),p):h},p.extentMajor([[-180,-90+ht],[180,90-ht]]).extentMinor([[-180,-80-ht],[180,80+ht]])}function c0(){return ma()()}function l0(t,n){var r=t[0]*L,e=t[1]*L,i=n[0]*L,a=n[1]*L,o=H(e),c=F(e),u=H(a),s=F(a),l=o*H(r),d=o*F(r),f=u*H(i),m=u*F(i),v=2*Le(Cn(gr(a-e)+o*u*gr(i-r))),x=F(v),h=v?function(p){var y=F(p*=v)/x,g=F(v-p)/x,_=g*l+y*f,b=g*d+y*m,w=g*c+y*s;return[Kt(b,_)*yt,Kt(w,Cn(_*_+b*b))*yt]}:function(){return[r*yt,e*yt]};return h.distance=v,h}function f0(){var t=1,n=0,r=0,e=1,i=1,a=0,o,c,u=null,s,l,d,f=1,m=1,v=vs({point:function(_,b){var w=g([_,b]);this.stream.point(w[0],w[1])}}),x=pr,h,p;function y(){return f=t*e,m=t*i,h=p=null,g}function g(_){var b=_[0]*f,w=_[1]*m;if(a){var R=w*o-b*c;b=b*o+w*c,w=R}return[b+n,w+r]}return g.invert=function(_){var b=_[0]-n,w=_[1]-r;if(a){var R=w*o+b*c;b=b*o-w*c,w=R}return[b/f,w/m]},g.stream=function(_){return h&&p===_?h:h=v(x(p=_))},g.postclip=function(_){return arguments.length?(x=_,u=s=l=d=null,y()):x},g.clipExtent=function(_){return arguments.length?(x=_==null?(u=s=l=d=null,pr):qe(u=+_[0][0],s=+_[0][1],l=+_[1][0],d=+_[1][1]),y()):u==null?null:[[u,s],[l,d]]},g.scale=function(_){return arguments.length?(t=+_,y()):t},g.translate=function(_){return arguments.length?(n=+_[0],r=+_[1],y()):[n,r]},g.angle=function(_){return arguments.length?(a=_%360*L,c=F(a),o=H(a),y()):a*yt},g.reflectX=function(_){return arguments.length?(e=_?-1:1,y()):e<0},g.reflectY=function(_){return arguments.length?(i=_?-1:1,y()):i<0},g.fitExtent=function(_,b){return xs(g,_,b)},g.fitSize=function(_,b){return bs(g,_,b)},g.fitWidth=function(_,b){return ws(g,_,b)},g.fitHeight=function(_,b){return Ms(g,_,b)},g}function Qe(t,n){var r=n*n,e=r*r;return[t*(.8707-.131979*r+e*(-.013791+e*(.003971*r-.001529*e))),n*(1.007226+r*(.015085+e*(-.044475+.028874*r-.005916*e)))]}Qe.invert=function(t,n){var r=n,e=25,i;do{var a=r*r,o=a*a;r-=i=(r*(1.007226+a*(.015085+o*(-.044475+.028874*a-.005916*o)))-n)/(1.007226+a*(.015085*3+o*(-.044475*7+.028874*9*a-.005916*11*o)))}while(Lt(i)>ht&&--e>0);return[t/(.8707+(a=r*r)*(-.131979+a*(-.013791+a*a*a*(.003971-.001529*a)))),r]};function h0(){return $i(Qe).scale(175.295)}function d0(t,n){return t.parent===n.parent?1:2}function g0(t){return t.reduce(p0,0)/t.length}function p0(t,n){return t+n.x}function m0(t){return 1+t.reduce(_0,0)}function _0(t,n){return Math.max(t,n.y)}function y0(t){for(var n;n=t.children;)t=n[0];return t}function v0(t){for(var n;n=t.children;)t=n[n.length-1];return t}function x0(){var t=d0,n=1,r=1,e=!1;function i(a){var o,c=0;a.eachAfter(function(f){var m=f.children;m?(f.x=g0(m),f.y=m0(m)):(f.x=o?c+=t(f,o):0,f.y=0,o=f)});var u=y0(a),s=v0(a),l=u.x-t(u,s)/2,d=s.x+t(s,u)/2;return a.eachAfter(e?function(f){f.x=(f.x-a.x)*n,f.y=(a.y-f.y)*r}:function(f){f.x=(f.x-l)/(d-l)*n,f.y=(1-(a.y?f.y/a.y:1))*r})}return i.separation=function(a){return arguments.length?(t=a,i):t},i.size=function(a){return arguments.length?(e=!1,n=+a[0],r=+a[1],i):e?null:[n,r]},i.nodeSize=function(a){return arguments.length?(e=!0,n=+a[0],r=+a[1],i):e?[n,r]:null},i}function Rn(t){return t==null?null:_a(t)}function _a(t){if(typeof t!="function")throw new Error;return t}function $t(){return 0}function Ht(t){return function(){return t}}const b0=1664525,w0=1013904223,si=4294967296;function tr(){let t=1;return()=>(t=(b0*t+w0)%si)/si}function M0(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function k0(t,n){let r=t.length,e,i;for(;r;)i=n()*r--|0,e=t[r],t[r]=t[i],t[i]=e;return t}function S0(t){return ya(t,tr())}function ya(t,n){for(var r=0,e=(t=k0(Array.from(t),n)).length,i=[],a,o;r<e;)a=t[r],o&&va(o,a)?++r:(o=A0(i=E0(i,a)),r=0);return o}function E0(t,n){var r,e;if(de(n,t))return[n];for(r=0;r<t.length;++r)if(bn(n,t[r])&&de(sn(t[r],n),t))return[t[r],n];for(r=0;r<t.length-1;++r)for(e=r+1;e<t.length;++e)if(bn(sn(t[r],t[e]),n)&&bn(sn(t[r],n),t[e])&&bn(sn(t[e],n),t[r])&&de(xa(t[r],t[e],n),t))return[t[r],t[e],n];throw new Error}function bn(t,n){var r=t.r-n.r,e=n.x-t.x,i=n.y-t.y;return r<0||r*r<e*e+i*i}function va(t,n){var r=t.r-n.r+Math.max(t.r,n.r,1)*1e-9,e=n.x-t.x,i=n.y-t.y;return r>0&&r*r>e*e+i*i}function de(t,n){for(var r=0;r<n.length;++r)if(!va(t,n[r]))return!1;return!0}function A0(t){switch(t.length){case 1:return R0(t[0]);case 2:return sn(t[0],t[1]);case 3:return xa(t[0],t[1],t[2])}}function R0(t){return{x:t.x,y:t.y,r:t.r}}function sn(t,n){var r=t.x,e=t.y,i=t.r,a=n.x,o=n.y,c=n.r,u=a-r,s=o-e,l=c-i,d=Math.sqrt(u*u+s*s);return{x:(r+a+u/d*l)/2,y:(e+o+s/d*l)/2,r:(d+i+c)/2}}function xa(t,n,r){var e=t.x,i=t.y,a=t.r,o=n.x,c=n.y,u=n.r,s=r.x,l=r.y,d=r.r,f=e-o,m=e-s,v=i-c,x=i-l,h=u-a,p=d-a,y=e*e+i*i-a*a,g=y-o*o-c*c+u*u,_=y-s*s-l*l+d*d,b=m*v-f*x,w=(v*_-x*g)/(b*2)-e,R=(x*h-v*p)/b,E=(m*g-f*_)/(b*2)-i,C=(f*p-m*h)/b,k=R*R+C*C-1,A=2*(a+w*R+E*C),$=w*w+E*E-a*a,T=-(Math.abs(k)>1e-6?(A+Math.sqrt(A*A-4*k*$))/(2*k):$/A);return{x:e+w+R*T,y:i+E+C*T,r:T}}function ui(t,n,r){var e=t.x-n.x,i,a,o=t.y-n.y,c,u,s=e*e+o*o;s?(a=n.r+r.r,a*=a,u=t.r+r.r,u*=u,a>u?(i=(s+u-a)/(2*s),c=Math.sqrt(Math.max(0,u/s-i*i)),r.x=t.x-i*e-c*o,r.y=t.y-i*o+c*e):(i=(s+a-u)/(2*s),c=Math.sqrt(Math.max(0,a/s-i*i)),r.x=n.x+i*e-c*o,r.y=n.y+i*o+c*e)):(r.x=n.x+r.r,r.y=n.y)}function ci(t,n){var r=t.r+n.r-1e-6,e=n.x-t.x,i=n.y-t.y;return r>0&&r*r>e*e+i*i}function li(t){var n=t._,r=t.next._,e=n.r+r.r,i=(n.x*r.r+r.x*n.r)/e,a=(n.y*r.r+r.y*n.r)/e;return i*i+a*a}function wn(t){this._=t,this.next=null,this.previous=null}function ba(t,n){if(!(a=(t=M0(t)).length))return 0;var r,e,i,a,o,c,u,s,l,d,f;if(r=t[0],r.x=0,r.y=0,!(a>1))return r.r;if(e=t[1],r.x=-e.r,e.x=r.r,e.y=0,!(a>2))return r.r+e.r;ui(e,r,i=t[2]),r=new wn(r),e=new wn(e),i=new wn(i),r.next=i.previous=e,e.next=r.previous=i,i.next=e.previous=r;t:for(u=3;u<a;++u){ui(r._,e._,i=t[u]),i=new wn(i),s=e.next,l=r.previous,d=e._.r,f=r._.r;do if(d<=f){if(ci(s._,i._)){e=s,r.next=e,e.previous=r,--u;continue t}d+=s._.r,s=s.next}else{if(ci(l._,i._)){r=l,r.next=e,e.previous=r,--u;continue t}f+=l._.r,l=l.previous}while(s!==l.next);for(i.previous=r,i.next=e,r.next=e.previous=e=i,o=li(r);(i=i.next)!==e;)(c=li(i))<o&&(r=i,o=c);e=r.next}for(r=[e._],i=e;(i=i.next)!==e;)r.push(i._);for(i=ya(r,n),u=0;u<a;++u)r=t[u],r.x-=i.x,r.y-=i.y;return i.r}function P0(t){return ba(t,tr()),t}function I0(t){return Math.sqrt(t.value)}function N0(){var t=null,n=1,r=1,e=$t;function i(a){const o=tr();return a.x=n/2,a.y=r/2,t?a.eachBefore(fi(t)).eachAfter(ge(e,.5,o)).eachBefore(hi(1)):a.eachBefore(fi(I0)).eachAfter(ge($t,1,o)).eachAfter(ge(e,a.r/Math.min(n,r),o)).eachBefore(hi(Math.min(n,r)/(2*a.r))),a}return i.radius=function(a){return arguments.length?(t=Rn(a),i):t},i.size=function(a){return arguments.length?(n=+a[0],r=+a[1],i):[n,r]},i.padding=function(a){return arguments.length?(e=typeof a=="function"?a:Ht(+a),i):e},i}function fi(t){return function(n){n.children||(n.r=Math.max(0,+t(n)||0))}}function ge(t,n,r){return function(e){if(i=e.children){var i,a,o=i.length,c=t(e)*n||0,u;if(c)for(a=0;a<o;++a)i[a].r+=c;if(u=ba(i,r),c)for(a=0;a<o;++a)i[a].r-=c;e.r=u+c}}}function hi(t){return function(n){var r=n.parent;n.r*=t,r&&(n.x=r.x+t*n.x,n.y=r.y+t*n.y)}}function wa(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function _n(t,n,r,e,i){for(var a=t.children,o,c=-1,u=a.length,s=t.value&&(e-n)/t.value;++c<u;)o=a[c],o.y0=r,o.y1=i,o.x0=n,o.x1=n+=o.value*s}function C0(){var t=1,n=1,r=0,e=!1;function i(o){var c=o.height+1;return o.x0=o.y0=r,o.x1=t,o.y1=n/c,o.eachBefore(a(n,c)),e&&o.eachBefore(wa),o}function a(o,c){return function(u){u.children&&_n(u,u.x0,o*(u.depth+1)/c,u.x1,o*(u.depth+2)/c);var s=u.x0,l=u.y0,d=u.x1-r,f=u.y1-r;d<s&&(s=d=(s+d)/2),f<l&&(l=f=(l+f)/2),u.x0=s,u.y0=l,u.x1=d,u.y1=f}}return i.round=function(o){return arguments.length?(e=!!o,i):e},i.size=function(o){return arguments.length?(t=+o[0],n=+o[1],i):[t,n]},i.padding=function(o){return arguments.length?(r=+o,i):r},i}var T0={depth:-1},di={},pe={};function z0(t){return t.id}function O0(t){return t.parentId}function $0(){var t=z0,n=O0,r;function e(i){var a=Array.from(i),o=t,c=n,u,s,l,d,f,m,v,x,h=new Map;if(r!=null){const p=a.map((_,b)=>B0(r(_,b,i))),y=p.map(gi),g=new Set(p).add("");for(const _ of y)g.has(_)||(g.add(_),p.push(_),y.push(gi(_)),a.push(pe));o=(_,b)=>p[b],c=(_,b)=>y[b]}for(l=0,u=a.length;l<u;++l)s=a[l],m=a[l]=new De(s),(v=o(s,l,i))!=null&&(v+="")&&(x=m.id=v,h.set(x,h.has(x)?di:m)),(v=c(s,l,i))!=null&&(v+="")&&(m.parent=v);for(l=0;l<u;++l)if(m=a[l],v=m.parent){if(f=h.get(v),!f)throw new Error("missing: "+v);if(f===di)throw new Error("ambiguous: "+v);f.children?f.children.push(m):f.children=[m],m.parent=f}else{if(d)throw new Error("multiple roots");d=m}if(!d)throw new Error("no root");if(r!=null){for(;d.data===pe&&d.children.length===1;)d=d.children[0],--u;for(let p=a.length-1;p>=0&&(m=a[p],m.data===pe);--p)m.data=null}if(d.parent=T0,d.eachBefore(function(p){p.depth=p.parent.depth+1,--u}).eachBefore(dh),d.parent=null,u>0)throw new Error("cycle");return d}return e.id=function(i){return arguments.length?(t=Rn(i),e):t},e.parentId=function(i){return arguments.length?(n=Rn(i),e):n},e.path=function(i){return arguments.length?(r=Rn(i),e):r},e}function B0(t){t=`${t}`;let n=t.length;return Be(t,n-1)&&!Be(t,n-2)&&(t=t.slice(0,-1)),t[0]==="/"?t:`/${t}`}function gi(t){let n=t.length;if(n<2)return"";for(;--n>1&&!Be(t,n););return t.slice(0,n)}function Be(t,n){if(t[n]==="/"){let r=0;for(;n>0&&t[--n]==="\\";)++r;if(!(r&1))return!0}return!1}function L0(t,n){return t.parent===n.parent?1:2}function me(t){var n=t.children;return n?n[0]:t.t}function _e(t){var n=t.children;return n?n[n.length-1]:t.t}function q0(t,n,r){var e=r/(n.i-t.i);n.c-=e,n.s+=r,t.c+=e,n.z+=r,n.m+=r}function D0(t){for(var n=0,r=0,e=t.children,i=e.length,a;--i>=0;)a=e[i],a.z+=n,a.m+=n,n+=a.s+(r+=a.c)}function F0(t,n,r){return t.a.parent===n.parent?t.a:r}function Pn(t,n){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=n}Pn.prototype=Object.create(De.prototype);function Y0(t){for(var n=new Pn(t,0),r,e=[n],i,a,o,c;r=e.pop();)if(a=r._.children)for(r.children=new Array(c=a.length),o=c-1;o>=0;--o)e.push(i=r.children[o]=new Pn(a[o],o)),i.parent=r;return(n.parent=new Pn(null,0)).children=[n],n}function G0(){var t=L0,n=1,r=1,e=null;function i(s){var l=Y0(s);if(l.eachAfter(a),l.parent.m=-l.z,l.eachBefore(o),e)s.eachBefore(u);else{var d=s,f=s,m=s;s.eachBefore(function(y){y.x<d.x&&(d=y),y.x>f.x&&(f=y),y.depth>m.depth&&(m=y)});var v=d===f?1:t(d,f)/2,x=v-d.x,h=n/(f.x+v+x),p=r/(m.depth||1);s.eachBefore(function(y){y.x=(y.x+x)*h,y.y=y.depth*p})}return s}function a(s){var l=s.children,d=s.parent.children,f=s.i?d[s.i-1]:null;if(l){D0(s);var m=(l[0].z+l[l.length-1].z)/2;f?(s.z=f.z+t(s._,f._),s.m=s.z-m):s.z=m}else f&&(s.z=f.z+t(s._,f._));s.parent.A=c(s,f,s.parent.A||d[0])}function o(s){s._.x=s.z+s.parent.m,s.m+=s.parent.m}function c(s,l,d){if(l){for(var f=s,m=s,v=l,x=f.parent.children[0],h=f.m,p=m.m,y=v.m,g=x.m,_;v=_e(v),f=me(f),v&&f;)x=me(x),m=_e(m),m.a=s,_=v.z+y-f.z-h+t(v._,f._),_>0&&(q0(F0(v,s,d),s,_),h+=_,p+=_),y+=v.m,h+=f.m,g+=x.m,p+=m.m;v&&!_e(m)&&(m.t=v,m.m+=y-p),f&&!me(x)&&(x.t=f,x.m+=h-g,d=s)}return d}function u(s){s.x*=n,s.y=s.depth*r}return i.separation=function(s){return arguments.length?(t=s,i):t},i.size=function(s){return arguments.length?(e=!1,n=+s[0],r=+s[1],i):e?null:[n,r]},i.nodeSize=function(s){return arguments.length?(e=!0,n=+s[0],r=+s[1],i):e?[n,r]:null},i}function Kn(t,n,r,e,i){for(var a=t.children,o,c=-1,u=a.length,s=t.value&&(i-r)/t.value;++c<u;)o=a[c],o.x0=n,o.x1=e,o.y0=r,o.y1=r+=o.value*s}var Ma=(1+Math.sqrt(5))/2;function ka(t,n,r,e,i,a){for(var o=[],c=n.children,u,s,l=0,d=0,f=c.length,m,v,x=n.value,h,p,y,g,_,b,w;l<f;){m=i-r,v=a-e;do h=c[d++].value;while(!h&&d<f);for(p=y=h,b=Math.max(v/m,m/v)/(x*t),w=h*h*b,_=Math.max(y/w,w/p);d<f;++d){if(h+=s=c[d].value,s<p&&(p=s),s>y&&(y=s),w=h*h*b,g=Math.max(y/w,w/p),g>_){h-=s;break}_=g}o.push(u={value:h,dice:m<v,children:c.slice(l,d)}),u.dice?_n(u,r,e,i,x?e+=v*h/x:a):Kn(u,r,e,x?r+=m*h/x:i,a),x-=h,l=d}return o}const Sa=function t(n){function r(e,i,a,o,c){ka(n,e,i,a,o,c)}return r.ratio=function(e){return t((e=+e)>1?e:1)},r}(Ma);function X0(){var t=Sa,n=!1,r=1,e=1,i=[0],a=$t,o=$t,c=$t,u=$t,s=$t;function l(f){return f.x0=f.y0=0,f.x1=r,f.y1=e,f.eachBefore(d),i=[0],n&&f.eachBefore(wa),f}function d(f){var m=i[f.depth],v=f.x0+m,x=f.y0+m,h=f.x1-m,p=f.y1-m;h<v&&(v=h=(v+h)/2),p<x&&(x=p=(x+p)/2),f.x0=v,f.y0=x,f.x1=h,f.y1=p,f.children&&(m=i[f.depth+1]=a(f)/2,v+=s(f)-m,x+=o(f)-m,h-=c(f)-m,p-=u(f)-m,h<v&&(v=h=(v+h)/2),p<x&&(x=p=(x+p)/2),t(f,v,x,h,p))}return l.round=function(f){return arguments.length?(n=!!f,l):n},l.size=function(f){return arguments.length?(r=+f[0],e=+f[1],l):[r,e]},l.tile=function(f){return arguments.length?(t=_a(f),l):t},l.padding=function(f){return arguments.length?l.paddingInner(f).paddingOuter(f):l.paddingInner()},l.paddingInner=function(f){return arguments.length?(a=typeof f=="function"?f:Ht(+f),l):a},l.paddingOuter=function(f){return arguments.length?l.paddingTop(f).paddingRight(f).paddingBottom(f).paddingLeft(f):l.paddingTop()},l.paddingTop=function(f){return arguments.length?(o=typeof f=="function"?f:Ht(+f),l):o},l.paddingRight=function(f){return arguments.length?(c=typeof f=="function"?f:Ht(+f),l):c},l.paddingBottom=function(f){return arguments.length?(u=typeof f=="function"?f:Ht(+f),l):u},l.paddingLeft=function(f){return arguments.length?(s=typeof f=="function"?f:Ht(+f),l):s},l}function V0(t,n,r,e,i){var a=t.children,o,c=a.length,u,s=new Array(c+1);for(s[0]=u=o=0;o<c;++o)s[o+1]=u+=a[o].value;l(0,c,t.value,n,r,e,i);function l(d,f,m,v,x,h,p){if(d>=f-1){var y=a[d];y.x0=v,y.y0=x,y.x1=h,y.y1=p;return}for(var g=s[d],_=m/2+g,b=d+1,w=f-1;b<w;){var R=b+w>>>1;s[R]<_?b=R+1:w=R}_-s[b-1]<s[b]-_&&d+1<b&&--b;var E=s[b]-g,C=m-E;if(h-v>p-x){var k=m?(v*C+h*E)/m:h;l(d,b,E,v,x,k,p),l(b,f,C,k,x,h,p)}else{var A=m?(x*C+p*E)/m:p;l(d,b,E,v,x,h,A),l(b,f,C,v,A,h,p)}}}function W0(t,n,r,e,i){(t.depth&1?Kn:_n)(t,n,r,e,i)}const H0=function t(n){function r(e,i,a,o,c){if((u=e._squarify)&&u.ratio===n)for(var u,s,l,d,f=-1,m,v=u.length,x=e.value;++f<v;){for(s=u[f],l=s.children,d=s.value=0,m=l.length;d<m;++d)s.value+=l[d].value;s.dice?_n(s,i,a,o,x?a+=(c-a)*s.value/x:c):Kn(s,i,a,x?i+=(o-i)*s.value/x:o,c),x-=s.value}else e._squarify=u=ka(n,e,i,a,o,c),u.ratio=n}return r.ratio=function(e){return t((e=+e)>1?e:1)},r}(Ma);function U0(t){for(var n=-1,r=t.length,e,i=t[r-1],a=0;++n<r;)e=i,i=t[n],a+=e[1]*i[0]-e[0]*i[1];return a/2}function j0(t){for(var n=-1,r=t.length,e=0,i=0,a,o=t[r-1],c,u=0;++n<r;)a=o,o=t[n],u+=c=a[0]*o[1]-o[0]*a[1],e+=(a[0]+o[0])*c,i+=(a[1]+o[1])*c;return u*=3,[e/u,i/u]}function K0(t,n,r){return(n[0]-t[0])*(r[1]-t[1])-(n[1]-t[1])*(r[0]-t[0])}function Z0(t,n){return t[0]-n[0]||t[1]-n[1]}function pi(t){const n=t.length,r=[0,1];let e=2,i;for(i=2;i<n;++i){for(;e>1&&K0(t[r[e-2]],t[r[e-1]],t[i])<=0;)--e;r[e++]=i}return r.slice(0,e)}function J0(t){if((r=t.length)<3)return null;var n,r,e=new Array(r),i=new Array(r);for(n=0;n<r;++n)e[n]=[+t[n][0],+t[n][1],n];for(e.sort(Z0),n=0;n<r;++n)i[n]=[e[n][0],-e[n][1]];var a=pi(e),o=pi(i),c=o[0]===a[0],u=o[o.length-1]===a[a.length-1],s=[];for(n=a.length-1;n>=0;--n)s.push(t[e[a[n]][2]]);for(n=+c;n<o.length-u;++n)s.push(t[e[o[n]][2]]);return s}function Q0(t,n){for(var r=t.length,e=t[r-1],i=n[0],a=n[1],o=e[0],c=e[1],u,s,l=!1,d=0;d<r;++d)e=t[d],u=e[0],s=e[1],s>a!=c>a&&i<(o-u)*(a-s)/(c-s)+u&&(l=!l),o=u,c=s;return l}function tg(t){for(var n=-1,r=t.length,e=t[r-1],i,a,o=e[0],c=e[1],u=0;++n<r;)i=o,a=c,e=t[n],o=e[0],c=e[1],i-=o,a-=c,u+=Math.hypot(i,a);return u}const nt=Math.random,ng=function t(n){function r(e,i){return e=e==null?0:+e,i=i==null?1:+i,arguments.length===1?(i=e,e=0):i-=e,function(){return n()*i+e}}return r.source=t,r}(nt),eg=function t(n){function r(e,i){return arguments.length<2&&(i=e,e=0),e=Math.floor(e),i=Math.floor(i)-e,function(){return Math.floor(n()*i+e)}}return r.source=t,r}(nt),nr=function t(n){function r(e,i){var a,o;return e=e==null?0:+e,i=i==null?1:+i,function(){var c;if(a!=null)c=a,a=null;else do a=n()*2-1,c=n()*2-1,o=a*a+c*c;while(!o||o>1);return e+i*c*Math.sqrt(-2*Math.log(o)/o)}}return r.source=t,r}(nt),rg=function t(n){var r=nr.source(n);function e(){var i=r.apply(this,arguments);return function(){return Math.exp(i())}}return e.source=t,e}(nt),Ea=function t(n){function r(e){return(e=+e)<=0?()=>0:function(){for(var i=0,a=e;a>1;--a)i+=n();return i+a*n()}}return r.source=t,r}(nt),ig=function t(n){var r=Ea.source(n);function e(i){if((i=+i)==0)return n;var a=r(i);return function(){return a()/i}}return e.source=t,e}(nt),ag=function t(n){function r(e){return function(){return-Math.log1p(-n())/e}}return r.source=t,r}(nt),og=function t(n){function r(e){if((e=+e)<0)throw new RangeError("invalid alpha");return e=1/-e,function(){return Math.pow(1-n(),e)}}return r.source=t,r}(nt),sg=function t(n){function r(e){if((e=+e)<0||e>1)throw new RangeError("invalid p");return function(){return Math.floor(n()+e)}}return r.source=t,r}(nt),Aa=function t(n){function r(e){if((e=+e)<0||e>1)throw new RangeError("invalid p");return e===0?()=>1/0:e===1?()=>1:(e=Math.log1p(-e),function(){return 1+Math.floor(Math.log1p(-n())/e)})}return r.source=t,r}(nt),er=function t(n){var r=nr.source(n)();function e(i,a){if((i=+i)<0)throw new RangeError("invalid k");if(i===0)return()=>0;if(a=a==null?1:+a,i===1)return()=>-Math.log1p(-n())*a;var o=(i<1?i+1:i)-1/3,c=1/(3*Math.sqrt(o)),u=i<1?()=>Math.pow(n(),1/i):()=>1;return function(){do{do var s=r(),l=1+c*s;while(l<=0);l*=l*l;var d=1-n()}while(d>=1-.0331*s*s*s*s&&Math.log(d)>=.5*s*s+o*(1-l+Math.log(l)));return o*l*u()*a}}return e.source=t,e}(nt),Ra=function t(n){var r=er.source(n);function e(i,a){var o=r(i),c=r(a);return function(){var u=o();return u===0?0:u/(u+c())}}return e.source=t,e}(nt),Pa=function t(n){var r=Aa.source(n),e=Ra.source(n);function i(a,o){return a=+a,(o=+o)>=1?()=>a:o<=0?()=>0:function(){for(var c=0,u=a,s=o;u*s>16&&u*(1-s)>16;){var l=Math.floor((u+1)*s),d=e(l,u-l+1)();d<=s?(c+=l,u-=l,s=(s-d)/(1-d)):(u=l-1,s/=d)}for(var f=s<.5,m=f?s:1-s,v=r(m),x=v(),h=0;x<=u;++h)x+=v();return c+(f?h:u-h)}}return i.source=t,i}(nt),ug=function t(n){function r(e,i,a){var o;return(e=+e)==0?o=c=>-Math.log(c):(e=1/e,o=c=>Math.pow(c,e)),i=i==null?0:+i,a=a==null?1:+a,function(){return i+a*o(-Math.log1p(-n()))}}return r.source=t,r}(nt),cg=function t(n){function r(e,i){return e=e==null?0:+e,i=i==null?1:+i,function(){return e+i*Math.tan(Math.PI*n())}}return r.source=t,r}(nt),lg=function t(n){function r(e,i){return e=e==null?0:+e,i=i==null?1:+i,function(){var a=n();return e+i*Math.log(a/(1-a))}}return r.source=t,r}(nt),fg=function t(n){var r=er.source(n),e=Pa.source(n);function i(a){return function(){for(var o=0,c=a;c>16;){var u=Math.floor(.875*c),s=r(u)();if(s>c)return o+e(u-1,c/s)();o+=u,c-=s}for(var l=-Math.log1p(-n()),d=0;l<=c;++d)l-=Math.log1p(-n());return o+d}}return i.source=t,i}(nt),hg=1664525,dg=1013904223,mi=1/4294967296;function gg(t=Math.random()){let n=(0<=t&&t<1?t/mi:Math.abs(t))|0;return()=>(n=hg*n+dg|0,mi*(n>>>0))}function _i(t){return Math.sign(t)*t*t}function pg(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Ia(){var t=Uo(),n=[0,1],r=!1,e;function i(a){var o=pg(t(a));return isNaN(o)?e:r?Math.round(o):o}return i.invert=function(a){return t.invert(_i(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((n=Array.from(a,jo)).map(_i)),i):n.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(r=!!a,i):r},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(e=a,i):e},i.copy=function(){return Ia(t.domain(),n).round(r).clamp(t.clamp()).unknown(e)},Gi.apply(i,arguments),Ii(i)}function Na(){var t=0,n=1,r=1,e=[.5],i=[0,1],a;function o(u){return u!=null&&u<=u?i[hn(e,u,0,r)]:a}function c(){var u=-1;for(e=new Array(r);++u<r;)e[u]=((u+1)*n-(u-r)*t)/(r+1);return o}return o.domain=function(u){return arguments.length?([t,n]=u,t=+t,n=+n,c()):[t,n]},o.range=function(u){return arguments.length?(r=(i=Array.from(u)).length-1,c()):i.slice()},o.invertExtent=function(u){var s=i.indexOf(u);return s<0?[NaN,NaN]:s<1?[t,e[0]]:s>=r?[e[r-1],n]:[e[s-1],e[s]]},o.unknown=function(u){return arguments.length&&(a=u),o},o.thresholds=function(){return e.slice()},o.copy=function(){return Na().domain([t,n]).range(i).unknown(a)},Gi.apply(Ii(o),arguments)}var Ca="%Y-%m-%dT%H:%M:%S.%LZ";function mg(t){return t.toISOString()}var _g=Date.prototype.toISOString?mg:Bi(Ca);function yg(t){var n=new Date(t);return isNaN(n)?null:n}var vg=+new Date("2000-01-01T00:00:00.000Z")?yg:Li(Ca);function Ta(){var t=[],n=Ko;function r(e){if(e!=null&&!isNaN(e=+e))return n((hn(t,e,1)-1)/(t.length-1))}return r.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let i of e)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(vt),r},r.interpolator=function(e){return arguments.length?(n=e,r):n},r.range=function(){return t.map((e,i)=>n(i/(t.length-1)))},r.quantiles=function(e){return Array.from({length:e+1},(i,a)=>Nn(t,a/e))},r.copy=function(){return Ta(n).domain(t)},xh.apply(r,arguments)}var xg=Array.prototype.slice;function Zn(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function za(t){this._context=t}za.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n);break}}};function Jn(t){return new za(t)}function rr(t){return t[0]}function ir(t){return t[1]}function ar(t,n){var r=z(!0),e=null,i=Jn,a=null,o=Fe(c);t=typeof t=="function"?t:t===void 0?rr:z(t),n=typeof n=="function"?n:n===void 0?ir:z(n);function c(u){var s,l=(u=Zn(u)).length,d,f=!1,m;for(e==null&&(a=i(m=o())),s=0;s<=l;++s)!(s<l&&r(d=u[s],s,u))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+t(d,s,u),+n(d,s,u));if(m)return a=null,m+""||null}return c.x=function(u){return arguments.length?(t=typeof u=="function"?u:z(+u),c):t},c.y=function(u){return arguments.length?(n=typeof u=="function"?u:z(+u),c):n},c.defined=function(u){return arguments.length?(r=typeof u=="function"?u:z(!!u),c):r},c.curve=function(u){return arguments.length?(i=u,e!=null&&(a=i(e)),c):i},c.context=function(u){return arguments.length?(u==null?e=a=null:a=i(e=u),c):e},c}function Oa(t,n,r){var e=null,i=z(!0),a=null,o=Jn,c=null,u=Fe(s);t=typeof t=="function"?t:t===void 0?rr:z(+t),n=typeof n=="function"?n:n===void 0?z(0):z(+n),r=typeof r=="function"?r:r===void 0?ir:z(+r);function s(d){var f,m,v,x=(d=Zn(d)).length,h,p=!1,y,g=new Array(x),_=new Array(x);for(a==null&&(c=o(y=u())),f=0;f<=x;++f){if(!(f<x&&i(h=d[f],f,d))===p)if(p=!p)m=f,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),v=f-1;v>=m;--v)c.point(g[v],_[v]);c.lineEnd(),c.areaEnd()}p&&(g[f]=+t(h,f,d),_[f]=+n(h,f,d),c.point(e?+e(h,f,d):g[f],r?+r(h,f,d):_[f]))}if(y)return c=null,y+""||null}function l(){return ar().defined(i).curve(o).context(a)}return s.x=function(d){return arguments.length?(t=typeof d=="function"?d:z(+d),e=null,s):t},s.x0=function(d){return arguments.length?(t=typeof d=="function"?d:z(+d),s):t},s.x1=function(d){return arguments.length?(e=d==null?null:typeof d=="function"?d:z(+d),s):e},s.y=function(d){return arguments.length?(n=typeof d=="function"?d:z(+d),r=null,s):n},s.y0=function(d){return arguments.length?(n=typeof d=="function"?d:z(+d),s):n},s.y1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:z(+d),s):r},s.lineX0=s.lineY0=function(){return l().x(t).y(n)},s.lineY1=function(){return l().x(t).y(r)},s.lineX1=function(){return l().x(e).y(n)},s.defined=function(d){return arguments.length?(i=typeof d=="function"?d:z(!!d),s):i},s.curve=function(d){return arguments.length?(o=d,a!=null&&(c=o(a)),s):o},s.context=function(d){return arguments.length?(d==null?a=c=null:c=o(a=d),s):a},s}function bg(t,n){return n<t?-1:n>t?1:n>=t?0:NaN}function wg(t){return t}function Mg(){var t=wg,n=bg,r=null,e=z(0),i=z(ee),a=z(0);function o(c){var u,s=(c=Zn(c)).length,l,d,f=0,m=new Array(s),v=new Array(s),x=+e.apply(this,arguments),h=Math.min(ee,Math.max(-ee,i.apply(this,arguments)-x)),p,y=Math.min(Math.abs(h)/s,a.apply(this,arguments)),g=y*(h<0?-1:1),_;for(u=0;u<s;++u)(_=v[m[u]=u]=+t(c[u],u,c))>0&&(f+=_);for(n!=null?m.sort(function(b,w){return n(v[b],v[w])}):r!=null&&m.sort(function(b,w){return r(c[b],c[w])}),u=0,d=f?(h-s*g)/f:0;u<s;++u,x=p)l=m[u],_=v[l],p=x+(_>0?_*d:0)+g,v[l]={data:c[l],index:u,value:_,startAngle:x,endAngle:p,padAngle:y};return v}return o.value=function(c){return arguments.length?(t=typeof c=="function"?c:z(+c),o):t},o.sortValues=function(c){return arguments.length?(n=c,r=null,o):n},o.sort=function(c){return arguments.length?(r=c,n=null,o):r},o.startAngle=function(c){return arguments.length?(e=typeof c=="function"?c:z(+c),o):e},o.endAngle=function(c){return arguments.length?(i=typeof c=="function"?c:z(+c),o):i},o.padAngle=function(c){return arguments.length?(a=typeof c=="function"?c:z(+c),o):a},o}var $a=or(Jn);function Ba(t){this._curve=t}Ba.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,n){this._curve.point(n*Math.sin(t),n*-Math.cos(t))}};function or(t){function n(r){return new Ba(t(r))}return n._curve=t,n}function un(t){var n=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(r){return arguments.length?n(or(r)):n()._curve},t}function yi(){return un(ar().curve($a))}function vi(){var t=Oa().curve($a),n=t.curve,r=t.lineX0,e=t.lineX1,i=t.lineY0,a=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return un(r())},delete t.lineX0,t.lineEndAngle=function(){return un(e())},delete t.lineX1,t.lineInnerRadius=function(){return un(i())},delete t.lineY0,t.lineOuterRadius=function(){return un(a())},delete t.lineY1,t.curve=function(o){return arguments.length?n(or(o)):n()._curve},t}function cn(t,n){return[(n=+n)*Math.cos(t-=Math.PI/2),n*Math.sin(t)]}class La{constructor(n,r){this._context=n,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(n,r){switch(n=+n,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+n)/2,this._y0,this._x0,r,n,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,n,this._y0,n,r);break}}this._x0=n,this._y0=r}}class kg{constructor(n){this._context=n}lineStart(){this._point=0}lineEnd(){}point(n,r){if(n=+n,r=+r,this._point===0)this._point=1;else{const e=cn(this._x0,this._y0),i=cn(this._x0,this._y0=(this._y0+r)/2),a=cn(n,this._y0),o=cn(n,r);this._context.moveTo(...e),this._context.bezierCurveTo(...i,...a,...o)}this._x0=n,this._y0=r}}function qa(t){return new La(t,!0)}function Da(t){return new La(t,!1)}function Sg(t){return new kg(t)}function Eg(t){return t.source}function Ag(t){return t.target}function Qn(t){let n=Eg,r=Ag,e=rr,i=ir,a=null,o=null,c=Fe(u);function u(){let s;const l=xg.call(arguments),d=n.apply(this,l),f=r.apply(this,l);if(a==null&&(o=t(s=c())),o.lineStart(),l[0]=d,o.point(+e.apply(this,l),+i.apply(this,l)),l[0]=f,o.point(+e.apply(this,l),+i.apply(this,l)),o.lineEnd(),s)return o=null,s+""||null}return u.source=function(s){return arguments.length?(n=s,u):n},u.target=function(s){return arguments.length?(r=s,u):r},u.x=function(s){return arguments.length?(e=typeof s=="function"?s:z(+s),u):e},u.y=function(s){return arguments.length?(i=typeof s=="function"?s:z(+s),u):i},u.context=function(s){return arguments.length?(s==null?a=o=null:o=t(a=s),u):a},u}function Rg(){return Qn(qa)}function Pg(){return Qn(Da)}function Ig(){const t=Qn(Sg);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}function Ct(){}function Xn(t,n,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+n)/6,(t._y0+4*t._y1+r)/6)}function te(t){this._context=t}te.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Xn(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Xn(this,t,n);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};function Ng(t){return new te(t)}function Fa(t){this._context=t}Fa.prototype={areaStart:Ct,areaEnd:Ct,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x2=t,this._y2=n;break;case 1:this._point=2,this._x3=t,this._y3=n;break;case 2:this._point=3,this._x4=t,this._y4=n,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+n)/6);break;default:Xn(this,t,n);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};function Cg(t){return new Fa(t)}function Ya(t){this._context=t}Ya.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,e=(this._y0+4*this._y1+n)/6;this._line?this._context.lineTo(r,e):this._context.moveTo(r,e);break;case 3:this._point=4;default:Xn(this,t,n);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};function Tg(t){return new Ya(t)}function Ga(t,n){this._basis=new te(t),this._beta=n}Ga.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,n=this._y,r=t.length-1;if(r>0)for(var e=t[0],i=n[0],a=t[r]-e,o=n[r]-i,c=-1,u;++c<=r;)u=c/r,this._basis.point(this._beta*t[c]+(1-this._beta)*(e+u*a),this._beta*n[c]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,n){this._x.push(+t),this._y.push(+n)}};const zg=function t(n){function r(e){return n===1?new te(e):new Ga(e,n)}return r.beta=function(e){return t(+e)},r}(.85);function Vn(t,n,r){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-r),t._x2,t._y2)}function sr(t,n){this._context=t,this._k=(1-n)/6}sr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Vn(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:Vn(this,t,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const Og=function t(n){function r(e){return new sr(e,n)}return r.tension=function(e){return t(+e)},r}(0);function ur(t,n){this._context=t,this._k=(1-n)/6}ur.prototype={areaStart:Ct,areaEnd:Ct,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:Vn(this,t,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const $g=function t(n){function r(e){return new ur(e,n)}return r.tension=function(e){return t(+e)},r}(0);function cr(t,n){this._context=t,this._k=(1-n)/6}cr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Vn(this,t,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const Bg=function t(n){function r(e){return new cr(e,n)}return r.tension=function(e){return t(+e)},r}(0);function lr(t,n,r){var e=t._x1,i=t._y1,a=t._x2,o=t._y2;if(t._l01_a>Ar){var c=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);e=(e*c-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*c-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>Ar){var s=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*s+t._x1*t._l23_2a-n*t._l12_2a)/l,o=(o*s+t._y1*t._l23_2a-r*t._l12_2a)/l}t._context.bezierCurveTo(e,i,a,o,t._x2,t._y2)}function Xa(t,n){this._context=t,this._alpha=n}Xa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var r=this._x2-t,e=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+e*e,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:lr(this,t,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const Lg=function t(n){function r(e){return n?new Xa(e,n):new sr(e,0)}return r.alpha=function(e){return t(+e)},r}(.5);function Va(t,n){this._context=t,this._alpha=n}Va.prototype={areaStart:Ct,areaEnd:Ct,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,n){if(t=+t,n=+n,this._point){var r=this._x2-t,e=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+e*e,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:lr(this,t,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const qg=function t(n){function r(e){return n?new Va(e,n):new ur(e,0)}return r.alpha=function(e){return t(+e)},r}(.5);function Wa(t,n){this._context=t,this._alpha=n}Wa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var r=this._x2-t,e=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+e*e,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:lr(this,t,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const Dg=function t(n){function r(e){return n?new Wa(e,n):new cr(e,0)}return r.alpha=function(e){return t(+e)},r}(.5);function Ha(t){this._context=t}Ha.prototype={areaStart:Ct,areaEnd:Ct,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,n){t=+t,n=+n,this._point?this._context.lineTo(t,n):(this._point=1,this._context.moveTo(t,n))}};function Fg(t){return new Ha(t)}function xi(t){return t<0?-1:1}function bi(t,n,r){var e=t._x1-t._x0,i=n-t._x1,a=(t._y1-t._y0)/(e||i<0&&-0),o=(r-t._y1)/(i||e<0&&-0),c=(a*i+o*e)/(e+i);return(xi(a)+xi(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(c))||0}function wi(t,n){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-n)/2:n}function ye(t,n,r){var e=t._x0,i=t._y0,a=t._x1,o=t._y1,c=(a-e)/3;t._context.bezierCurveTo(e+c,i+c*n,a-c,o-c*r,a,o)}function Wn(t){this._context=t}Wn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ye(this,this._t0,wi(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var r=NaN;if(t=+t,n=+n,!(t===this._x1&&n===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,ye(this,wi(this,r=bi(this,t,n)),r);break;default:ye(this,this._t0,r=bi(this,t,n));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=r}}};function Ua(t){this._context=new ja(t)}(Ua.prototype=Object.create(Wn.prototype)).point=function(t,n){Wn.prototype.point.call(this,n,t)};function ja(t){this._context=t}ja.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,r,e,i,a){this._context.bezierCurveTo(n,t,e,r,a,i)}};function Yg(t){return new Wn(t)}function Gg(t){return new Ua(t)}function Ka(t){this._context=t}Ka.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,n=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],n[0]):this._context.moveTo(t[0],n[0]),r===2)this._context.lineTo(t[1],n[1]);else for(var e=Mi(t),i=Mi(n),a=0,o=1;o<r;++a,++o)this._context.bezierCurveTo(e[0][a],i[0][a],e[1][a],i[1][a],t[o],n[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,n){this._x.push(+t),this._y.push(+n)}};function Mi(t){var n,r=t.length-1,e,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],n=1;n<r-1;++n)i[n]=1,a[n]=4,o[n]=4*t[n]+2*t[n+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*t[r-1]+t[r],n=1;n<r;++n)e=i[n]/a[n-1],a[n]-=e,o[n]-=e*o[n-1];for(i[r-1]=o[r-1]/a[r-1],n=r-2;n>=0;--n)i[n]=(o[n]-i[n+1])/a[n];for(a[r-1]=(t[r]+i[r-1])/2,n=0;n<r-1;++n)a[n]=2*t[n+1]-i[n+1];return[i,a]}function Xg(t){return new Ka(t)}function ne(t,n){this._context=t,this._t=n}ne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(t,n);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,n)}break}}this._x=t,this._y=n}};function Vg(t){return new ne(t,.5)}function Wg(t){return new ne(t,0)}function Hg(t){return new ne(t,1)}function Qt(t,n){if((o=t.length)>1)for(var r=1,e,i,a=t[n[0]],o,c=a.length;r<o;++r)for(i=a,a=t[n[r]],e=0;e<c;++e)a[e][1]+=a[e][0]=isNaN(i[e][1])?i[e][0]:i[e][1]}function tn(t){for(var n=t.length,r=new Array(n);--n>=0;)r[n]=n;return r}function Ug(t,n){return t[n]}function jg(t){const n=[];return n.key=t,n}function Kg(){var t=z([]),n=tn,r=Qt,e=Ug;function i(a){var o=Array.from(t.apply(this,arguments),jg),c,u=o.length,s=-1,l;for(const d of a)for(c=0,++s;c<u;++c)(o[c][s]=[0,+e(d,o[c].key,s,a)]).data=d;for(c=0,l=Zn(n(o));c<u;++c)o[l[c]].index=c;return r(o,l),o}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:z(Array.from(a)),i):t},i.value=function(a){return arguments.length?(e=typeof a=="function"?a:z(+a),i):e},i.order=function(a){return arguments.length?(n=a==null?tn:typeof a=="function"?a:z(Array.from(a)),i):n},i.offset=function(a){return arguments.length?(r=a??Qt,i):r},i}function Zg(t,n){if((e=t.length)>0){for(var r,e,i=0,a=t[0].length,o;i<a;++i){for(o=r=0;r<e;++r)o+=t[r][i][1]||0;if(o)for(r=0;r<e;++r)t[r][i][1]/=o}Qt(t,n)}}function Jg(t,n){if((u=t.length)>0)for(var r,e=0,i,a,o,c,u,s=t[n[0]].length;e<s;++e)for(o=c=0,r=0;r<u;++r)(a=(i=t[n[r]][e])[1]-i[0])>0?(i[0]=o,i[1]=o+=a):a<0?(i[1]=c,i[0]=c+=a):(i[0]=0,i[1]=a)}function Qg(t,n){if((i=t.length)>0){for(var r=0,e=t[n[0]],i,a=e.length;r<a;++r){for(var o=0,c=0;o<i;++o)c+=t[o][r][1]||0;e[r][1]+=e[r][0]=-c/2}Qt(t,n)}}function tp(t,n){if(!(!((o=t.length)>0)||!((a=(i=t[n[0]]).length)>0))){for(var r=0,e=1,i,a,o;e<a;++e){for(var c=0,u=0,s=0;c<o;++c){for(var l=t[n[c]],d=l[e][1]||0,f=l[e-1][1]||0,m=(d-f)/2,v=0;v<c;++v){var x=t[n[v]],h=x[e][1]||0,p=x[e-1][1]||0;m+=h-p}u+=d,s+=m*d}i[e-1][1]+=i[e-1][0]=r,u&&(r-=s/u)}i[e-1][1]+=i[e-1][0]=r,Qt(t,n)}}function Za(t){var n=t.map(np);return tn(t).sort(function(r,e){return n[r]-n[e]})}function np(t){for(var n=-1,r=0,e=t.length,i,a=-1/0;++n<e;)(i=+t[n][1])>a&&(a=i,r=n);return r}function Ja(t){var n=t.map(Qa);return tn(t).sort(function(r,e){return n[r]-n[e]})}function Qa(t){for(var n=0,r=-1,e=t.length,i;++r<e;)(i=+t[r][1])&&(n+=i);return n}function ep(t){return Ja(t).reverse()}function rp(t){var n=t.length,r,e,i=t.map(Qa),a=Za(t),o=0,c=0,u=[],s=[];for(r=0;r<n;++r)e=a[r],o<c?(o+=i[e],u.push(e)):(c+=i[e],s.push(e));return s.reverse().concat(u)}function ip(t){return tn(t).reverse()}const ap=Object.freeze(Object.defineProperty({__proto__:null,Adder:xt,Delaunay:Jf,FormatSpecifier:zo,InternMap:Gf,InternSet:qt,Node:De,Path:bh,Voronoi:Qf,ZoomTransform:io,active:Vo,arc:Sh,area:Oa,areaRadial:vi,ascending:vt,autoType:th,axisBottom:Zo,axisLeft:Jo,axisRight:Qo,axisTop:ts,bin:Ir,bisect:hn,bisectCenter:ns,bisectLeft:es,bisectRight:hn,bisector:rs,blob:M1,blur:Th,blur2:Vi,blurImage:zh,brush:Ud,brushSelection:Vd,brushX:Wd,brushY:Hd,buffer:S1,chord:Kd,chordDirected:Jd,chordTranspose:Zd,cluster:x0,color:ao,contourDensity:b1,contours:Ee,count:Un,create:ad,creator:ki,cross:ks,csv:R1,csvFormat:nh,csvFormatBody:eh,csvFormatRow:rh,csvFormatRows:ih,csvFormatValue:ah,csvParse:Fi,csvParseRows:oh,cubehelix:Wf,cumsum:Ss,curveBasis:Ng,curveBasisClosed:Cg,curveBasisOpen:Tg,curveBumpX:qa,curveBumpY:Da,curveBundle:zg,curveCardinal:Og,curveCardinalClosed:$g,curveCardinalOpen:Bg,curveCatmullRom:Lg,curveCatmullRomClosed:qg,curveCatmullRomOpen:Dg,curveLinear:Jn,curveLinearClosed:Fg,curveMonotoneX:Yg,curveMonotoneY:Gg,curveNatural:Xg,curveStep:Vg,curveStepAfter:Hg,curveStepBefore:Wg,descending:is,deviation:Ni,difference:Qh,disjoint:td,dispatch:Ei,drag:Mn,dragDisable:Ri,dragEnable:Pi,dsv:A1,dsvFormat:qi,easeBack:Br,easeBackIn:Cd,easeBackInOut:Br,easeBackOut:Td,easeBounce:dn,easeBounceIn:Id,easeBounceInOut:Nd,easeBounceOut:dn,easeCircle:$r,easeCircleIn:xd,easeCircleInOut:$r,easeCircleOut:bd,easeCubic:fr,easeCubicIn:oo,easeCubicInOut:fr,easeCubicOut:so,easeElastic:Lr,easeElasticIn:zd,easeElasticInOut:Od,easeElasticOut:Lr,easeExp:Or,easeExpIn:yd,easeExpInOut:Or,easeExpOut:vd,easeLinear:fd,easePoly:Tr,easePolyIn:gd,easePolyInOut:Tr,easePolyOut:pd,easeQuad:Cr,easeQuadIn:hd,easeQuadInOut:Cr,easeQuadOut:dd,easeSin:zr,easeSinIn:md,easeSinInOut:zr,easeSinOut:_d,every:Uh,extent:ln,fcumsum:Es,filter:Kh,flatGroup:As,flatRollup:Rs,forceCenter:$1,forceCollide:q1,forceLink:ph,forceManyBody:mh,forceRadial:D1,forceSimulation:_h,forceX:yh,forceY:vh,get format(){return Oo},formatDefaultLocale:$o,formatLocale:Bo,get formatPrefix(){return Lo},formatSpecifier:qo,fsum:Ps,geoAlbers:Is,geoAlbersUsa:Ns,geoArea:X1,geoAzimuthalEqualArea:Cs,geoAzimuthalEqualAreaRaw:Ts,geoAzimuthalEquidistant:zs,geoAzimuthalEquidistantRaw:Os,geoBounds:U1,geoCentroid:t0,geoCircle:$s,geoClipAntimeridian:Bs,geoClipCircle:Ls,geoClipExtent:n0,geoClipRectangle:qe,geoConicConformal:qs,geoConicConformalRaw:Ds,geoConicEqualArea:Fs,geoConicEqualAreaRaw:Ys,geoConicEquidistant:Gs,geoConicEquidistantRaw:Xs,geoContains:u0,geoDistance:Yn,geoEqualEarth:Vs,geoEqualEarthRaw:Ws,geoEquirectangular:Hs,geoEquirectangularRaw:Us,geoGnomonic:js,geoGnomonicRaw:Ks,geoGraticule:ma,geoGraticule10:c0,geoIdentity:f0,geoInterpolate:l0,geoLength:ga,geoMercator:Zs,geoMercatorRaw:Js,geoNaturalEarth1:h0,geoNaturalEarth1Raw:Qe,geoOrthographic:Qs,geoOrthographicRaw:tu,geoPath:nu,geoProjection:$i,geoProjectionMutator:eu,geoRotation:ru,geoStereographic:iu,geoStereographicRaw:au,geoStream:pn,geoTransform:ou,geoTransverseMercator:su,geoTransverseMercatorRaw:uu,gray:cu,greatest:Ff,greatestIndex:Gh,group:lu,groupSort:fu,groups:hu,hcl:du,hierarchy:gh,histogram:Ir,hsl:uo,html:z1,image:I1,index:gu,indexes:pu,interpolate:Ai,interpolateArray:Do,interpolateBasis:co,interpolateBasisClosed:lo,interpolateBlues:mu,interpolateBrBG:_u,interpolateBuGn:yu,interpolateBuPu:vu,interpolateCividis:xu,interpolateCool:Hf,interpolateCubehelix:Uf,interpolateCubehelixDefault:bu,interpolateCubehelixLong:jf,interpolateDate:Fo,interpolateDiscrete:ud,interpolateGnBu:wu,interpolateGreens:Mu,interpolateGreys:ku,interpolateHcl:Su,interpolateHclLong:Eu,interpolateHsl:Au,interpolateHslLong:Ru,interpolateHue:cd,interpolateInferno:Pu,interpolateLab:Iu,interpolateMagma:Nu,interpolateNumber:fo,interpolateNumberArray:Yo,interpolateObject:Go,interpolateOrRd:Cu,interpolateOranges:Tu,interpolatePRGn:zu,interpolatePiYG:Ou,interpolatePlasma:$u,interpolatePuBu:Bu,interpolatePuBuGn:Lu,interpolatePuOr:qu,interpolatePuRd:Du,interpolatePurples:Fu,interpolateRainbow:Kf,interpolateRdBu:Yu,interpolateRdGy:Gu,interpolateRdPu:Xu,interpolateRdYlBu:Vu,interpolateRdYlGn:Wu,interpolateReds:Hu,interpolateRgb:ho,interpolateRgbBasis:go,interpolateRgbBasisClosed:po,interpolateRound:as,interpolateSinebow:Uu,interpolateSpectral:ju,interpolateString:mo,interpolateTransformCss:_o,interpolateTransformSvg:yo,interpolateTurbo:Ku,interpolateViridis:Zu,interpolateWarm:Zf,interpolateYlGn:Ju,interpolateYlGnBu:Qu,interpolateYlOrBr:tc,interpolateYlOrRd:nc,interpolateZoom:Mh,interrupt:ve,intersection:nd,interval:ld,isoFormat:_g,isoParse:vg,json:C1,lab:ec,lch:rc,least:Yh,leastIndex:Hi,line:ar,lineRadial:yi,link:Qn,linkHorizontal:Rg,linkRadial:Ig,linkVertical:Pg,local:Zi,map:Zh,matcher:vo,max:xe,maxIndex:Ti,mean:ic,median:ac,medianIndex:oc,merge:sc,min:zi,minIndex:Ci,mode:uc,namespace:xo,namespaces:bo,nice:Ge,now:Si,pack:N0,packEnclose:S0,packSiblings:P0,pairs:cc,partition:C0,path:Xi,pathRound:wh,permute:lc,pie:Mg,piecewise:fc,pointRadial:cn,pointer:It,pointers:sd,polygonArea:U0,polygonCentroid:j0,polygonContains:Q0,polygonHull:J0,polygonLength:tg,precisionFixed:os,precisionPrefix:ss,precisionRound:us,quadtree:Yi,quantile:Nn,quantileIndex:hc,quantileSorted:dc,quantize:gc,quickselect:pc,radialArea:vi,radialLine:yi,randomBates:ig,randomBernoulli:sg,randomBeta:Ra,randomBinomial:Pa,randomCauchy:cg,randomExponential:ag,randomGamma:er,randomGeometric:Aa,randomInt:eg,randomIrwinHall:Ea,randomLcg:gg,randomLogNormal:rg,randomLogistic:lg,randomNormal:nr,randomPareto:og,randomPoisson:fg,randomUniform:ng,randomWeibull:ug,range:Bt,rank:Fh,reduce:Jh,reverse:Yf,rgb:wo,ribbon:o1,ribbonArrow:s1,rollup:mc,rollups:_c,scaleBand:yc,scaleDiverging:vc,scaleDivergingLog:xc,scaleDivergingPow:bc,scaleDivergingSqrt:wc,scaleDivergingSymlog:Mc,scaleIdentity:kc,scaleImplicit:Xf,scaleLinear:cs,scaleLog:Sc,scaleOrdinal:Vf,scalePoint:Ec,scalePow:Ac,scaleQuantile:Rc,scaleQuantize:Na,scaleRadial:Ia,scaleSequential:Pc,scaleSequentialLog:Ic,scaleSequentialPow:Nc,scaleSequentialQuantile:Ta,scaleSequentialSqrt:Cc,scaleSequentialSymlog:Tc,scaleSqrt:zc,scaleSymlog:Oc,scaleThreshold:$c,scaleTime:Bc,scaleUtc:Lc,scan:Xh,schemeAccent:qc,schemeBlues:Dc,schemeBrBG:Fc,schemeBuGn:Yc,schemeBuPu:Gc,schemeCategory10:kh,schemeDark2:Xc,schemeGnBu:Vc,schemeGreens:Wc,schemeGreys:Hc,schemeObservable10:Uc,schemeOrRd:jc,schemeOranges:Kc,schemePRGn:Zc,schemePaired:Jc,schemePastel1:Qc,schemePastel2:tl,schemePiYG:nl,schemePuBu:el,schemePuBuGn:rl,schemePuOr:il,schemePuRd:al,schemePurples:ol,schemeRdBu:sl,schemeRdGy:ul,schemeRdPu:cl,schemeRdYlBu:ll,schemeRdYlGn:fl,schemeReds:hl,schemeSet1:dl,schemeSet2:gl,schemeSet3:pl,schemeSpectral:ml,schemeTableau10:_l,schemeYlGn:yl,schemeYlGnBu:vl,schemeYlOrBr:xl,schemeYlOrRd:bl,select:dt,selectAll:Wo,selection:Mo,selector:ko,selectorAll:So,shuffle:Vh,shuffler:Ui,some:jh,sort:wl,stack:Kg,stackOffsetDiverging:Jg,stackOffsetExpand:Zg,stackOffsetNone:Qt,stackOffsetSilhouette:Qg,stackOffsetWiggle:tp,stackOrderAppearance:Za,stackOrderAscending:Ja,stackOrderDescending:ep,stackOrderInsideOut:rp,stackOrderNone:tn,stackOrderReverse:ip,stratify:$0,style:Eo,subset:rd,sum:Ml,superset:Ki,svg:O1,symbol:kl,symbolAsterisk:Sl,symbolCircle:El,symbolCross:Al,symbolDiamond:Rl,symbolDiamond2:Pl,symbolPlus:Il,symbolSquare:Nl,symbolSquare2:Cl,symbolStar:Tl,symbolTimes:mr,symbolTriangle:zl,symbolTriangle2:Ol,symbolWye:$l,symbolX:mr,symbols:_r,symbolsFill:_r,symbolsStroke:Bl,text:jn,thresholdFreedmanDiaconis:qh,thresholdScott:Dh,thresholdSturges:Xe,tickFormat:ls,tickIncrement:In,tickStep:fs,ticks:Hn,timeDay:Ll,timeDays:ql,get timeFormat(){return Dl},timeFormatDefaultLocale:Fl,timeFormatLocale:Yl,timeFriday:Gl,timeFridays:Xl,timeHour:Vl,timeHours:Wl,timeInterval:Hl,timeMillisecond:yr,timeMilliseconds:vr,timeMinute:Ul,timeMinutes:jl,timeMonday:Kl,timeMondays:Zl,timeMonth:Jl,timeMonths:Ql,get timeParse(){return tf},timeSaturday:nf,timeSaturdays:ef,timeSecond:xr,timeSeconds:br,timeSunday:wr,timeSundays:Mr,timeThursday:rf,timeThursdays:af,timeTickInterval:of,timeTicks:sf,timeTuesday:uf,timeTuesdays:cf,timeWednesday:lf,timeWednesdays:ff,timeWeek:wr,timeWeeks:Mr,timeYear:hf,timeYears:df,timeout:Ao,timer:Ro,timerFlush:Po,transition:Io,transpose:ji,tree:G0,treemap:X0,treemapBinary:V0,treemapDice:_n,treemapResquarify:H0,treemapSlice:Kn,treemapSliceDice:W0,treemapSquarify:Sa,tsv:P1,tsvFormat:sh,tsvFormatBody:uh,tsvFormatRow:ch,tsvFormatRows:lh,tsvFormatValue:fh,tsvParse:Di,tsvParseRows:hh,union:id,unixDay:gf,unixDays:pf,utcDay:mf,utcDays:_f,get utcFormat(){return Bi},utcFriday:yf,utcFridays:vf,utcHour:xf,utcHours:bf,utcMillisecond:yr,utcMilliseconds:vr,utcMinute:wf,utcMinutes:Mf,utcMonday:kf,utcMondays:Sf,utcMonth:Ef,utcMonths:Af,get utcParse(){return Li},utcSaturday:Rf,utcSaturdays:Pf,utcSecond:xr,utcSeconds:br,utcSunday:kr,utcSundays:Sr,utcThursday:If,utcThursdays:Nf,utcTickInterval:Cf,utcTicks:Tf,utcTuesday:zf,utcTuesdays:Of,utcWednesday:$f,utcWednesdays:Bf,utcWeek:kr,utcWeeks:Sr,utcYear:Lf,utcYears:qf,variance:Df,window:No,xml:T1,zip:Hh,zoom:Ho,zoomIdentity:Co,zoomTransform:To},Symbol.toStringTag,{value:"Module"})),an=20,op={__name:"index",props:{readonly:{type:Boolean,default:!1}},setup(t,{expose:n}){n();const r=_t(null),e=_t([]),i=_t("");let a=!1;const o=_t([]),c=_t([]),u=_t([]),s=[{label:"",value:"#1E90FF"},{label:"",value:"#FFD700"},{label:"",value:"#FFA500"},{label:"",value:"#FF4500"},{label:"",value:"#808080"}],l=_t(s[0].value),d=_t(s.map(M=>({...M,visible:!0}))),f=t,m=_t(new Set),v=rn(()=>m.value.size>1),x=M=>Math.round(M/an)*an,h=(M,I)=>{f.readonly||(I.ctrlKey||I.metaKey?m.value.has(M)?m.value.delete(M):m.value.add(M):(m.value.clear(),m.value.add(M)),p())},p=()=>{const M=window.innerWidth-10,I=window.innerHeight-300;dt(r.value).selectAll("*").remove();const B=dt(r.value).append("svg").attr("width",M).attr("height",I).style("border","1px solid #ccc");!f.readonly&&m.value.size===0&&B.on("click",function(q){a||(a=!0),o.value.push([...e.value]),c.value=[];const S=It(q);e.value.push([x(S[0]),x(S[1])]),y(B)}),y(B)},y=M=>{M.selectAll("*").remove();const I=M.node().getBoundingClientRect().height,B=M.node().getBoundingClientRect().width;if(u.value.forEach((S,P)=>{if(d.value.find(D=>D.value===S.color)?.visible){const D=m.value.has(P);if(M.append("polygon").attr("points",S.points.map(tt=>tt.join(",")).join(" ")).style("fill",S.color).attr("stroke",D?"#000":"black").attr("stroke-width",D?3:2).style("cursor","move").style("stroke-dasharray",D?"5,5":"none").on("click",tt=>h(P,tt)).call(Mn().subject(()=>P).on("start",U).on("drag",j).on("end",gt)),S.name){const tt=w(S.points);M.append("text").attr("x",tt[0]).attr("y",tt[1]).attr("text-anchor","middle").attr("fill","black").attr("font-size","14px").text(S.name)}}}),e.value.length>0&&d.value.find(P=>P.value===l.value)?.visible&&(M.append("polygon").attr("points",e.value.map(P=>P.join(",")).join(" ")).style("fill",l.value).attr("stroke","black").attr("stroke-width",2),M.selectAll("circle").data(e.value).enter().append("circle").attr("cx",P=>P[0]).attr("cy",P=>P[1]).attr("r",6).attr("fill","yellow").attr("stroke","black").attr("stroke-width",1).call(Mn().on("start",g).on("drag",_).on("end",b)),i.value)){const P=w(e.value);M.append("text").attr("x",P[0]).attr("y",P[1]).attr("text-anchor","middle").attr("fill","black").attr("font-size","14px").text(i.value)}const q=M.append("g").attr("class","legend").attr("transform",`translate(20, ${I-150})`);if(d.value.forEach((S,P)=>{const O=q.append("g").attr("transform",`translate(0, ${P*25})`).style("cursor","pointer").on("click",D=>{D.stopPropagation(),S.visible=!S.visible,p()});O.append("rect").attr("width",18).attr("height",18).attr("fill",S.value).style("opacity",S.visible?1:.5),O.append("text").attr("x",24).attr("y",14).text(S.label).style("font-size","14px").style("opacity",S.visible?1:.5)}),!f.readonly){M.selectAll("circle").data(e.value).enter().append("circle").attr("cx",S=>S[0]).attr("cy",S=>S[1]).attr("r",10).attr("fill","yellow").attr("stroke","black").attr("stroke-width",1).call(Mn().on("start",g).on("drag",_).on("end",b));for(let S=0;S<B;S+=an)M.append("line").attr("x1",S).attr("y1",0).attr("x2",S).attr("y2",I).style("stroke","#ccc").style("stroke-width",.5);for(let S=0;S<I;S+=an)M.append("line").attr("x1",0).attr("y1",S).attr("x2",B).attr("y2",S).style("stroke","#ccc").style("stroke-width",.5)}},g=(M,I)=>{dt(M.sourceEvent.target).raise().classed("active",!0)},_=(M,I)=>{const[B,q]=It(M,r.value);I[0]=x(B),I[1]=x(q),p()},b=(M,I)=>{dt(M.sourceEvent.target).classed("active",!1),o.value.push([...e.value]),c.value=[]},w=M=>{const I=M.map(P=>P[0]),B=M.map(P=>P[1]),q=I.reduce((P,O)=>P+O,0)/M.length,S=B.reduce((P,O)=>P+O,0)/M.length;return[q,S]},R=()=>{o.value.length>0&&(c.value.push([...e.value]),e.value=o.value.pop(),p())},E=()=>{c.value.length>0&&(o.value.push([...e.value]),e.value=c.value.pop(),p())},C=()=>{if(e.value.length<3||!i.value){alert("");return}const M={points:[...e.value],name:i.value,color:l.value};u.value.push(M),localStorage.setItem("savedShapes",JSON.stringify(u.value)),e.value=[],i.value="",o.value=[],c.value=[],a=!1,m.value.clear(),p(),alert("!")},k=()=>{e.value=[],i.value="",o.value=[],c.value=[],u.value=[],a=!1,m.value.clear(),localStorage.removeItem("savedShapes"),p()},A=M=>{M==="polygon"&&k()},$=rn(()=>o.value.length>0),T=rn(()=>c.value.length>0),Z=()=>{const M=dt(r.value).select("svg").node(),I=document.createElement("canvas"),B=I.getContext("2d");I.width=M.width.baseVal.value,I.height=M.height.baseVal.value;const q=new XMLSerializer().serializeToString(M),S=new Blob([q],{type:"image/svg+xml;charset=utf-8"}),P=URL.createObjectURL(S),O=new Image;O.onload=()=>{B.fillStyle="white",B.fillRect(0,0,I.width,I.height),B.drawImage(O,0,0);const D=I.toDataURL("image/png"),tt=document.createElement("a");tt.download=`${i.value||"polygon"}.png`,tt.href=D,tt.click(),URL.revokeObjectURL(P)},O.src=P},ft=M=>{f.readonly||((M.ctrlKey||M.metaKey)&&!M.shiftKey&&M.key==="z"?(M.preventDefault(),R()):(M.ctrlKey||M.metaKey)&&M.shiftKey&&M.key==="z"?(M.preventDefault(),E()):(M.key==="Backspace"||M.key==="Delete")&&K.value&&(M.preventDefault(),X()))};Rr(()=>{const M=localStorage.getItem("savedShapes");M&&(u.value=JSON.parse(M)),p(),window.addEventListener("keydown",ft)}),Pr(()=>{window.removeEventListener("keydown",ft)});const U=M=>{const I=u.value[M.subject];I.startPoints=JSON.parse(JSON.stringify(I.points)),I.startMousePos=It(M.sourceEvent,r.value)},j=M=>{const I=u.value[M.subject],B=It(M.sourceEvent,r.value),q=B[0]-I.startMousePos[0],S=B[1]-I.startMousePos[1];I.points=I.startPoints.map(P=>[P[0]+q,P[1]+S]),p()},gt=M=>{const I=u.value[M.subject];delete I.startPoints,delete I.startMousePos,localStorage.setItem("savedShapes",JSON.stringify(u.value))},J=M=>{if(m.value.size<2)return;const B=Array.from(m.value).map(S=>u.value[S]),q=B.map(S=>{const P=S.points.map(D=>D[0]),O=S.points.map(D=>D[1]);return{left:Math.min(...P),right:Math.max(...P),top:Math.min(...O),bottom:Math.max(...O),width:Math.max(...P)-Math.min(...P),height:Math.max(...O)-Math.min(...O),centerX:(Math.max(...P)+Math.min(...P))/2,centerY:(Math.max(...O)+Math.min(...O))/2}});B.forEach((S,P)=>{const O=q[P];let D=0,tt=0;switch(M){case"left":D=Math.min(...q.map(st=>st.left))-O.left;break;case"center":D=q.reduce((st,nn)=>st+nn.centerX,0)/q.length-O.centerX;break;case"right":D=Math.max(...q.map(st=>st.right))-O.right;break;case"top":tt=Math.min(...q.map(st=>st.top))-O.top;break;case"middle":tt=q.reduce((st,nn)=>st+nn.centerY,0)/q.length-O.centerY;break;case"bottom":tt=Math.max(...q.map(st=>st.bottom))-O.bottom;break}S.points=S.points.map(Dt=>[Dt[0]+D,Dt[1]+tt])}),localStorage.setItem("savedShapes",JSON.stringify(u.value)),p()},K=rn(()=>m.value.size>0),X=()=>{if(m.value.size===0)return;Array.from(m.value).sort((I,B)=>B-I).forEach(I=>{u.value.splice(I,1)}),m.value.clear(),localStorage.setItem("savedShapes",JSON.stringify(u.value)),p()},V={chartContainer:r,points:e,polygonName:i,get drawing(){return a},set drawing(M){a=M},undoStack:o,redoStack:c,savedPolygons:u,colors:s,selectedColor:l,legendStatus:d,props:f,selectedPolygons:m,canAlign:v,gridSpacing:an,snapToGrid:x,togglePolygonSelection:h,drawChart:p,updatePolygon:y,dragStarted:g,dragged:_,dragEnded:b,calculatePolygonCenter:w,undo:R,redo:E,saveShapes:C,clearShapes:k,setShape:A,canUndo:$,canRedo:T,downloadImage:Z,handleKeyboard:ft,dragPolygonStarted:U,dragPolygon:j,dragPolygonEnded:gt,alignShapes:J,canDelete:K,deleteSelected:X,ref:_t,onMounted:Rr,computed:rn,onUnmounted:Pr,get d3(){return ap}};return Object.defineProperty(V,"__isScriptSetup",{enumerable:!1,value:!0}),V}},sp={class:"container"},up={key:0,class:"toolbar"},cp=["disabled"],lp=["disabled"],fp={style:{"margin-top":"10px"}},hp={class:"color-picker"},dp=["onClick","title"],gp={style:{"margin-top":"10px"}},pp=["disabled"],mp=["disabled"],_p=["disabled"],yp=["disabled"],vp=["disabled"],xp=["disabled"],bp={ref:"chartContainer",class:"chart-container"};function wp(t,n,r,e,i,a){return ie(),re("div",sp,[e.props.readonly?Ah("",!0):(ie(),re("div",up,[Y("button",{onClick:e.undo,disabled:!e.canUndo,title:": Ctrl/Command + Z"},"  ",8,cp),Y("button",{onClick:e.redo,disabled:!e.canRedo,title:": Ctrl/Command + Shift + Z"},"  ",8,lp),Y("button",{onClick:e.clearShapes},""),Y("button",{onClick:e.downloadImage},""),Y("div",fp,[Rh(Y("input",{"onUpdate:modelValue":n[0]||(n[0]=o=>e.polygonName=o),placeholder:""},null,512),[[no,e.polygonName]]),Y("div",hp,[(ie(),re(Ph,null,Ih(e.colors,(o,c)=>Y("div",{class:Ch(["color-option",{active:e.selectedColor===o.value}]),key:c,style:Nh({backgroundColor:o.value}),onClick:u=>e.selectedColor=o.value,title:o.label},null,14,dp)),64))]),Y("button",{onClick:e.saveShapes,type:"submit"},"")]),Y("div",gp,[Y("button",{onClick:n[1]||(n[1]=o=>e.alignShapes("left")),disabled:!e.canAlign},"",8,pp),Y("button",{onClick:n[2]||(n[2]=o=>e.alignShapes("center")),disabled:!e.canAlign},"",8,mp),Y("button",{onClick:n[3]||(n[3]=o=>e.alignShapes("right")),disabled:!e.canAlign},"",8,_p),Y("button",{onClick:n[4]||(n[4]=o=>e.alignShapes("top")),disabled:!e.canAlign},"",8,yp),Y("button",{onClick:n[5]||(n[5]=o=>e.alignShapes("middle")),disabled:!e.canAlign},"",8,vp),Y("button",{onClick:n[6]||(n[6]=o=>e.alignShapes("bottom")),disabled:!e.canAlign},"",8,xp)]),n[7]||(n[7]=Y("div",{class:"shortcuts-tips"},[Y("p",null,""),Y("ul",null,[Y("li",null,"Ctrl/Command + Z"),Y("li",null,"Ctrl/Command + Shift + Z"),Y("li",null,"Backspace/Delete")])],-1))])),Y("div",bp,null,512)])}const Zp=Eh(op,[["render",wp],["__scopeId","data-v-39a9b572"]]);export{Zp as default};
//# sourceMappingURL=index.CCvluEZE.js.map

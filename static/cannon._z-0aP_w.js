import{j as n}from"./jsx-runtime.DZ3s2XAB.js";import y from"./index.FIxribuB.js";import{S as w}from"./switch.BVHe136D.js";import{r as h}from"./index.D4IXJ7me.js";import{P as b}from"./index.DSKVgZYz.js";import{c as x}from"./index.Dr6BPF-b.js";import{c as v}from"./utils.CQ2vwKer.js";import"./_sentry-release-injection-file.B-UwqLso.js";import"./preload-helper.ddZQF9G8.js";/* empty css                       */import"./react-icons.esm.Bm3uWd-S.js";import"./createLucideIcon.Bi-ZCKuD.js";import"./index.CEsCW6vM.js";import"./index.DB_Y-4NU.js";import"./index.8q4ZzGYF.js";import"./_commonjsHelpers.DqoTaOmB.js";import"./index.Dgakj2qx.js";(function(){try{var i=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},t=new i.Error().stack;t&&(i._sentryDebugIds=i._sentryDebugIds||{},i._sentryDebugIds[t]="0974560d-8673-4470-9e66-06fadfb51f9e",i._sentryDebugIdIdentifier="sentry-dbid-0974560d-8673-4470-9e66-06fadfb51f9e")}catch{}})();var R="Label",d=h.forwardRef((i,t)=>n.jsx(b.label,{...i,ref:t,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(i.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));d.displayName=R;var m=d;const k=x("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=h.forwardRef(({className:i,...t},s)=>n.jsx(m,{ref:s,className:v(k(),i),...t}));u.displayName=m.displayName;let l;class C{constructor(t,s,e){this.p=t,this.x=s,this.y=e,this.angle=t.PI/4}show(){const t=this.p;t.push(),t.fill(0),t.translate(this.x,this.y),t.rect(-50,0,60,20),t.rotate(this.angle),t.rect(-35,-10,30,50),t.pop()}}class E{constructor(t,s,e,c,a){this.p=t;let r=this.p;this.position=r.createVector(s,e),this.velocity=r.createVector(10*r.cos(-r.PI/4),10*r.sin(-r.PI/4)),this.rotation=0,this.angularVelocity=.1,this.gravity=r.createVector(0,.2),this.circleRadius=r.random(10,20),this.index=c,this.img=a}update(){this.velocity.add(this.gravity),this.position.add(this.velocity),this.rotation+=this.angularVelocity}show(){const t=this.p;t.push(),t.translate(this.position.x-20,this.position.y-20),t.rotate(this.rotation),t.fill(255,0,0),t.circle(0,0,this.circleRadius*2),this.img&&t.image(this.img,-this.circleRadius,-this.circleRadius,this.circleRadius*2,this.circleRadius*2),t.pop()}isOffScreen(){return this.position.y>this.p.height}checkEdges(){const t=this.p;(this.position.x+this.circleRadius>t.width||this.position.x<this.circleRadius)&&(this.velocity.x*=-1),(this.position.y+this.circleRadius>t.height||this.position.y<this.circleRadius)&&(this.velocity.y*=-1)}}const A=()=>{const[i,t]=h.useState(!1),s=h.useCallback(e=>{let c,a=[];const r=()=>{e.createCanvas(e.windowWidth/2,240).drop(f),e.background(255),c=new C(e,50,e.height-20)},f=o=>{o.type==="image"&&(l=e.createImg(o.data,"").hide(),e.image(l,0,0,e.width,e.height))},p=()=>{e.background(220),c.show();for(let o=0;o<a.length;o++)a[o].update(),i&&a[o].checkEdges(),a[o].show(),a[o].isOffScreen()&&a.splice(o,1)},g=()=>{e.resizeCanvas(e.windowWidth/2,240)};e.mousePressed=()=>{if(e.mouseX>0&&e.mouseX<e.width&&e.mouseY>0&&e.mouseY<e.height){let o=new E(e,c.x,c.y,a.length,l);a.push(o)}},e.setup=r,e.draw=p,e.windowResized=g},[i]);return n.jsxs(n.Fragment,{children:[n.jsx(y,{sketch:s}),n.jsxs(u,{htmlFor:"openCheckEdges",className:"text-center m-4 p-10 select-none",children:[" ","打开边缘碰撞"]}),n.jsx(w,{id:"openCheckEdges",className:"m-4",checked:i,onCheckedChange:e=>t(e)}),n.jsxs("p",{className:"text-center brightness-75 select-none",children:[" ","拖动图片至canvas,会生成大炮的背景"]})]})};export{A as default};
//# sourceMappingURL=cannon._z-0aP_w.js.map

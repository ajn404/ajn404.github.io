{"version":3,"file":"vFocus.DK-CQvu8.js","sources":["../../src/components/vue/challenge/vFocus.vue"],"sourcesContent":["<script setup lang='ts'>\nimport { onMounted, onUnmounted, ref } from \"vue\"\n\nconst state = ref(false)\nconst input = ref(null)\n\n/**\n * 实现一个自定义指令,让元素获取焦点\n * 确保当切换`state`时,元素随着状态值获取/失去焦点\n *\n*/\nconst VFocus = {\n    updated: (el, binding) => {\n        binding.value ? el.focus() : el.blur()\n    }\n}\nlet timer = setInterval(() => {\n    state.value = !state.value\n}, 2000)\n\nonUnmounted(() => {\n    clearInterval(timer);\n})\n\n\nonMounted(() => {\n    const obs = new IntersectionObserver((entries) => {\n        if (!entries || entries.length === 0) return\n\n        if (entries[0].isIntersecting) {\n            clearInterval(timer);\n            timer = setInterval(() => {\n                state.value = !state.value\n            }, 2000)\n        } else {\n            clearInterval(timer);\n        }\n    })\n    obs.observe(input.value)\n});\n\n\n\n</script>\n\n<template>\n    <div class=\"xing-cao\">\n        <input v-focus=\"state\" ref=\"input\" type=\"text\" class=\"focus:bg-skin-blue\">\n        <p class=\"text-skin-base\">{{ state ? \"focus\" : \"blur\" }}</p>\n    </div>\n</template>\n\n"],"names":["state","ref","input","VFocus","el","binding","timer","onUnmounted","onMounted","entries","_hoisted_1","_hoisted_3","_openBlock","_createElementBlock","_withDirectives","_createElementVNode","_hoisted_2","$setup","_toDisplayString"],"mappings":"4mBAGM,MAAAA,EAAQC,EAAI,EAAK,EACjBC,EAAQD,EAAI,IAAI,EAOhBE,EAAS,CACX,QAAS,CAACC,EAAIC,IAAY,CACtBA,EAAQ,MAAQD,EAAG,MAAM,EAAIA,EAAG,KAAK,CAAA,CAE7C,EACI,IAAAE,EAAQ,YAAY,IAAM,CACpBN,EAAA,MAAQ,CAACA,EAAM,OACtB,GAAI,EAEPO,EAAY,IAAM,CACd,cAAcD,CAAK,CAAA,CACtB,EAGDE,EAAU,IAAM,CACA,IAAI,qBAAsBC,GAAY,CAC1C,CAACA,GAAWA,EAAQ,SAAW,IAE/BA,EAAQ,CAAC,EAAE,gBACX,cAAcH,CAAK,EACnBA,EAAQ,YAAY,IAAM,CAChBN,EAAA,MAAQ,CAACA,EAAM,OACtB,GAAI,GAEP,cAAcM,CAAK,EACvB,CACH,EACG,QAAQJ,EAAM,KAAK,CAAA,CAC1B,6JAOQQ,EAAA,CAAA,MAAM,UAAU,KACM,IAAI,QAAQ,KAAK,OAAO,MAAM,sBAClDC,EAAA,CAAA,MAAM,gBAAgB,0BAF7B,OAAAC,EAAA,EAAAC,EAGM,MAHNH,EAGM,CAFFI,EAAAC,EAA0E,QAA1EC,EAA0E,KAAA,GAAA,EAAA,CAAA,CAAAC,EAAA,OAA1DA,EAAK,KAAA,CAAA,CAAA,EACrBF,EAA4D,IAA5DJ,EAA4DO,EAA/BD,EAAK,MAAA,QAAA,MAAA,EAAA,CAAA,CAAA,CAAA"}
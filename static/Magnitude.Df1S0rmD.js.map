{"version":3,"file":"Magnitude.Df1S0rmD.js","sources":["../../src/components/react/p5/Vector/Magnitude.tsx"],"sourcesContent":["import type p5 from \"p5\";\nimport Basic from \"@components/react/p5/index.tsx\";\nimport { useCallback, useRef, useState } from \"react\";\n\nimport { cn } from \"@utils/utils\";\nimport { Slider } from \"@shadcn/ui/slider\";\n// import { useDebounce } from \"@uidotdev/usehooks\";\n// import { flushSync, unstable_batchedUpdates } from \"react-dom\";\n\nexport default () => {\n  let [len, setLen] = useState(0);\n  const slider = useRef(null);\n  let [max, setMax] = useState(100);\n  const sketch = useCallback((p: p5) => {\n    console.log(\"sketch\");\n\n    let mouse: p5.Vector;\n    const setup = () => {\n      p.createCanvas(p.windowWidth / 2, 240);\n      setMax(p.mag(p.width / 2, p.height / 2));\n    };\n    const draw = () => {\n      p.background(255);\n      p.stroke(28, 19, 73);\n      p.strokeWeight(5);\n      mouse = p.createVector(p.mouseX, p.mouseY);\n      let center = p.createVector(p.width / 2, p.height / 2);\n      mouse.sub(center);\n      slider.current.value = [mouse.mag()];\n      // unstable_batchedUpdates(() => {\n      setLen(mouse.mag());\n      // })\n\n      p.translate(p.width / 2, p.height / 2);\n      p.line(0, 0, mouse.x, mouse.y);\n    };\n    const resize = () => {\n      p.resizeCanvas(p.windowWidth / 2, 240);\n    };\n    p.setup = setup;\n    p.draw = draw;\n    p.windowResized = resize;\n  }, []);\n  return (\n    <>\n      <Slider\n        defaultValue={[50]}\n        max={max}\n        step={1}\n        className={cn(\"w-[60%]\")}\n        ref={slider}\n        value={[len]}\n      />\n      mag:{len}\n      <br />\n      max:{max}\n      <Basic sketch={sketch} showControls></Basic>\n    </>\n  );\n};\n"],"names":["Magnitude","len","setLen","useState","slider","useRef","max","setMax","sketch","useCallback","p","mouse","setup","draw","center","resize","jsxs","Fragment","jsx","Slider","cn","Basic"],"mappings":"+7BASA,MAAAA,EAAe,IAAM,CACnB,GAAI,CAACC,EAAKC,CAAM,EAAIC,EAAAA,SAAS,CAAC,EACxB,MAAAC,EAASC,SAAO,IAAI,EAC1B,GAAI,CAACC,EAAKC,CAAM,EAAIJ,EAAAA,SAAS,GAAG,EAC1B,MAAAK,EAASC,cAAaC,GAAU,CACpC,QAAQ,IAAI,QAAQ,EAEhB,IAAAC,EACJ,MAAMC,EAAQ,IAAM,CAClBF,EAAE,aAAaA,EAAE,YAAc,EAAG,GAAG,EAC9BH,EAAAG,EAAE,IAAIA,EAAE,MAAQ,EAAGA,EAAE,OAAS,CAAC,CAAC,CACzC,EACMG,EAAO,IAAM,CACjBH,EAAE,WAAW,GAAG,EACdA,EAAA,OAAO,GAAI,GAAI,EAAE,EACnBA,EAAE,aAAa,CAAC,EAChBC,EAAQD,EAAE,aAAaA,EAAE,OAAQA,EAAE,MAAM,EACrC,IAAAI,EAASJ,EAAE,aAAaA,EAAE,MAAQ,EAAGA,EAAE,OAAS,CAAC,EACrDC,EAAM,IAAIG,CAAM,EAChBV,EAAO,QAAQ,MAAQ,CAACO,EAAM,KAAK,EAE5BT,EAAAS,EAAM,KAAK,EAGlBD,EAAE,UAAUA,EAAE,MAAQ,EAAGA,EAAE,OAAS,CAAC,EACrCA,EAAE,KAAK,EAAG,EAAGC,EAAM,EAAGA,EAAM,CAAC,CAC/B,EACMI,EAAS,IAAM,CACnBL,EAAE,aAAaA,EAAE,YAAc,EAAG,GAAG,CACvC,EACAA,EAAE,MAAQE,EACVF,EAAE,KAAOG,EACTH,EAAE,cAAgBK,CACpB,EAAG,EAAE,EACL,OAEIC,EAAA,KAAAC,WAAA,CAAA,SAAA,CAAAC,EAAA,IAACC,EAAA,CACC,aAAc,CAAC,EAAE,EACjB,IAAAb,EACA,KAAM,EACN,UAAWc,EAAG,SAAS,EACvB,IAAKhB,EACL,MAAO,CAACH,CAAG,CAAA,CACb,EAAE,OACGA,QACJ,KAAG,EAAA,EAAE,OACDK,EACJY,EAAAA,IAAAG,EAAA,CAAM,OAAAb,EAAgB,aAAY,EAAC,CAAA,CAAA,EACtC,CAEJ"}
import{n as J,a as F,d as L,b as k,c as E,y as Q}from"./nodrag.gN7VjRWd.js";import{d as R,s as K}from"./transform.Cz8yado1.js";import{p as M}from"./pointer.Kth1cJfI.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},o=new t.Error().stack;o&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[o]="30ea60cf-4641-401d-8a58-bc5be1ce0470",t._sentryDebugIdIdentifier="sentry-dbid-30ea60cf-4641-401d-8a58-bc5be1ce0470")}catch{}})();const x=t=>()=>t;function I(t,{sourceEvent:o,subject:g,target:p,identifier:s,active:d,x:h,y,dx:v,dy:b,dispatch:f}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:o,enumerable:!0,configurable:!0},subject:{value:g,enumerable:!0,configurable:!0},target:{value:p,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:d,enumerable:!0,configurable:!0},x:{value:h,enumerable:!0,configurable:!0},y:{value:y,enumerable:!0,configurable:!0},dx:{value:v,enumerable:!0,configurable:!0},dy:{value:b,enumerable:!0,configurable:!0},_:{value:f}})}I.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function U(t){return!t.ctrlKey&&!t.button}function V(){return this.parentNode}function W(t,o){return o??{x:t.x,y:t.y}}function Z(){return navigator.maxTouchPoints||"ontouchstart"in this}function te(){var t=U,o=V,g=W,p=Z,s={},d=R("start","drag","end"),h=0,y,v,b,f,T=0;function a(e){e.on("mousedown.drag",N).filter(p).on("touchstart.drag",z).on("touchmove.drag",A,J).on("touchend.drag touchcancel.drag",B).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function N(e,u){if(!(f||!t.call(this,e,u))){var r=P(this,o.call(this,e,u),e,u,"mouse");r&&(K(e.view).on("mousemove.drag",O,F).on("mouseup.drag",S,F),L(e.view),k(e),b=!1,y=e.clientX,v=e.clientY,r("start",e))}}function O(e){if(E(e),!b){var u=e.clientX-y,r=e.clientY-v;b=u*u+r*r>T}s.mouse("drag",e)}function S(e){K(e.view).on("mousemove.drag mouseup.drag",null),Q(e.view,b),E(e),s.mouse("end",e)}function z(e,u){if(t.call(this,e,u)){var r=e.changedTouches,n=o.call(this,e,u),i=r.length,l,m;for(l=0;l<i;++l)(m=P(this,n,e,u,r[l].identifier,r[l]))&&(k(e),m("start",e,r[l]))}}function A(e){var u=e.changedTouches,r=u.length,n,i;for(n=0;n<r;++n)(i=s[u[n].identifier])&&(E(e),i("drag",e,u[n]))}function B(e){var u=e.changedTouches,r=u.length,n,i;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),n=0;n<r;++n)(i=s[u[n].identifier])&&(k(e),i("end",e,u[n]))}function P(e,u,r,n,i,l){var m=d.copy(),c=M(l||r,u),X,Y,w;if((w=g.call(e,new I("beforestart",{sourceEvent:r,target:a,identifier:i,active:h,x:c[0],y:c[1],dx:0,dy:0,dispatch:m}),n))!=null)return X=w.x-c[0]||0,Y=w.y-c[1]||0,function G(D,q,H){var C=c,j;switch(D){case"start":s[i]=G,j=h++;break;case"end":delete s[i],--h;case"drag":c=M(H||q,u),j=h;break}m.call(D,e,new I(D,{sourceEvent:q,subject:w,target:a,identifier:i,active:j,x:c[0]+X,y:c[1]+Y,dx:c[0]-C[0],dy:c[1]-C[1],dispatch:m}),n)}}return a.filter=function(e){return arguments.length?(t=typeof e=="function"?e:x(!!e),a):t},a.container=function(e){return arguments.length?(o=typeof e=="function"?e:x(e),a):o},a.subject=function(e){return arguments.length?(g=typeof e=="function"?e:x(e),a):g},a.touchable=function(e){return arguments.length?(p=typeof e=="function"?e:x(!!e),a):p},a.on=function(){var e=d.on.apply(d,arguments);return e===d?a:e},a.clickDistance=function(e){return arguments.length?(T=(e=+e)*e,a):Math.sqrt(T)},a}export{te as d};
//# sourceMappingURL=drag.JY6HRth5.js.map

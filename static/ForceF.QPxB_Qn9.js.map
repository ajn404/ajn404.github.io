{"version":3,"file":"ForceF.QPxB_Qn9.js","sources":["../../src/components/react/p5/Forces/ForceF.tsx"],"sourcesContent":["import type p5 from \"p5\";\nimport Basic from \"@components/react/p5/index.tsx\";\nimport { ForceMoverC } from \"./ForceMoverC\";\nimport { useCallback, useState } from \"react\";\nimport { useDebounce } from \"@uidotdev/usehooks\";\nimport { Slider } from \"@shadcn/ui/slider\";\nimport { cn } from \"@utils/utils\";\n\nexport default () => {\n  let moverWithWind: ForceMoverC;\n  let wind: p5.Vector;\n  let [mass, setMass] = useState(2.8);\n  let debounceMass = useDebounce(mass, 200);\n\n  const sketch = useCallback(\n    (p: p5) => {\n      const setup = () => {\n        p.createCanvas((p.windowWidth * 2) / 3, debounceMass * 100);\n        moverWithWind = new ForceMoverC(\n          p,\n          \"press mouse\",\n          debounceMass * 15,\n          null,\n          debounceMass\n        );\n        p.frameRate(120);\n        moverWithWind.position = p.createVector(p.width / 2, p.height / 2);\n      };\n      const applyEdgeForce = (p, mover, position, radius, force) => {\n        const distance = p.createVector(...position).dist(mover.position);\n        if (\n          distance < radius ||\n          position[0] < 0 ||\n          position[1] < 0 ||\n          position[0] > p.width ||\n          position[1] > p.height\n        ) {\n          mover.applyForce(force);\n        }\n      };\n      const draw = () => {\n        p.background(moverWithWind.color);\n        moverWithWind.applyForce(p.createVector(0, 0.1));\n        if (p.mouseIsPressed) {\n          wind = p.createVector(0.1, 0);\n          moverWithWind.applyForce(wind); // 应用风\n        }\n        moverWithWind.move();\n        moverWithWind.show();\n        moverWithWind.showName();\n\n        applyEdgeForce(\n          p,\n          moverWithWind,\n          [p.width, moverWithWind.position.y],\n          moverWithWind.circleRadius,\n          p.createVector(-1, 0)\n        );\n        applyEdgeForce(\n          p,\n          moverWithWind,\n          [0, moverWithWind.position.y],\n          moverWithWind.circleRadius,\n          p.createVector(1, 0)\n        );\n        applyEdgeForce(\n          p,\n          moverWithWind,\n          [moverWithWind.position.x, p.height],\n          moverWithWind.circleRadius,\n          p.createVector(0, -1)\n        );\n        applyEdgeForce(\n          p,\n          moverWithWind,\n          [moverWithWind.position.x, 0],\n          moverWithWind.circleRadius,\n          p.createVector(0, 1)\n        );\n      };\n      const resize = () => {\n        p.resizeCanvas(p.windowWidth / 2, 240);\n      };\n      p.setup = setup;\n      p.draw = draw;\n      p.windowResized = resize;\n    },\n    [debounceMass]\n  );\n  return (\n    <>\n      小球质量{mass}(单位:any)\n      <Slider\n        defaultValue={[2.8]}\n        max={5}\n        min={1}\n        step={0.01}\n        className={cn(\"w-[100%] m-4\")}\n        onValueChange={value => {\n          setMass(value[0]);\n        }}\n        value={[mass]}\n      />\n      风力大小为 f = m*a;这里的m = mass;a = 0.1; f = {(mass * 0.1).toFixed(2)}\n      <br />\n      <Basic sketch={sketch} showControls></Basic>\n    </>\n  );\n};\n"],"names":["ForceF","moverWithWind","wind","mass","setMass","useState","debounceMass","useDebounce","sketch","useCallback","p","setup","ForceMoverC","applyEdgeForce","mover","position","radius","force","draw","resize","jsxs","Fragment","jsx","Slider","cn","value","Basic"],"mappings":"ijCAQA,MAAAA,EAAe,IAAM,CACf,IAAAC,EACAC,EACA,CAACC,EAAMC,CAAO,EAAIC,EAAAA,SAAS,GAAG,EAC9BC,EAAeC,EAAYJ,EAAM,GAAG,EAExC,MAAMK,EAASC,EAAA,YACZC,GAAU,CACT,MAAMC,EAAQ,IAAM,CAClBD,EAAE,aAAcA,EAAE,YAAc,EAAK,EAAGJ,EAAe,GAAG,EAC1DL,EAAgB,IAAIW,EAClBF,EACA,cACAJ,EAAe,GACf,KACAA,CACF,EACAI,EAAE,UAAU,GAAG,EACDT,EAAA,SAAWS,EAAE,aAAaA,EAAE,MAAQ,EAAGA,EAAE,OAAS,CAAC,CACnE,EACMG,EAAiB,CAACH,EAAGI,EAAOC,EAAUC,EAAQC,IAAU,EAC3CP,EAAE,aAAa,GAAGK,CAAQ,EAAE,KAAKD,EAAM,QAAQ,EAEnDE,GACXD,EAAS,CAAC,EAAI,GACdA,EAAS,CAAC,EAAI,GACdA,EAAS,CAAC,EAAIL,EAAE,OAChBK,EAAS,CAAC,EAAIL,EAAE,SAEhBI,EAAM,WAAWG,CAAK,CAE1B,EACMC,EAAO,IAAM,CACfR,EAAA,WAAWT,EAAc,KAAK,EAChCA,EAAc,WAAWS,EAAE,aAAa,EAAG,EAAG,CAAC,EAC3CA,EAAE,iBACGR,EAAAQ,EAAE,aAAa,GAAK,CAAC,EAC5BT,EAAc,WAAWC,CAAI,GAE/BD,EAAc,KAAK,EACnBA,EAAc,KAAK,EACnBA,EAAc,SAAS,EAEvBY,EACEH,EACAT,EACA,CAACS,EAAE,MAAOT,EAAc,SAAS,CAAC,EAClCA,EAAc,aACdS,EAAE,aAAa,GAAI,CAAC,CACtB,EACAG,EACEH,EACAT,EACA,CAAC,EAAGA,EAAc,SAAS,CAAC,EAC5BA,EAAc,aACdS,EAAE,aAAa,EAAG,CAAC,CACrB,EACAG,EACEH,EACAT,EACA,CAACA,EAAc,SAAS,EAAGS,EAAE,MAAM,EACnCT,EAAc,aACdS,EAAE,aAAa,EAAG,EAAE,CACtB,EACAG,EACEH,EACAT,EACA,CAACA,EAAc,SAAS,EAAG,CAAC,EAC5BA,EAAc,aACdS,EAAE,aAAa,EAAG,CAAC,CACrB,CACF,EACMS,EAAS,IAAM,CACnBT,EAAE,aAAaA,EAAE,YAAc,EAAG,GAAG,CACvC,EACAA,EAAE,MAAQC,EACVD,EAAE,KAAOQ,EACTR,EAAE,cAAgBS,CACpB,EACA,CAACb,CAAY,CACf,EACA,OACIc,EAAA,KAAAC,WAAA,CAAA,SAAA,CAAA,OACKlB,EAAK,WACVmB,EAAA,IAACC,EAAA,CACC,aAAc,CAAC,GAAG,EAClB,IAAK,EACL,IAAK,EACL,KAAM,IACN,UAAWC,EAAG,cAAc,EAC5B,cAAwBC,GAAA,CACdrB,EAAAqB,EAAM,CAAC,CAAC,CAClB,EACA,MAAO,CAACtB,CAAI,CAAA,CACd,EAAE,2CACuCA,EAAO,IAAK,QAAQ,CAAC,QAC7D,KAAG,EAAA,EACHmB,EAAAA,IAAAI,EAAA,CAAM,OAAAlB,EAAgB,aAAY,EAAC,CAAA,CAAA,EACtC,CAEJ"}
{"version":3,"file":"HoverLink.CidWR-9b.js","sources":["../../src/components/react/UI/HoverLink.tsx"],"sourcesContent":["import { useState, useEffect, useRef, useCallback } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./HoverLink.css\";\n\nconst HoverLink = ({ href, content, children, ...props }) => {\n  const [isHovered, setIsHovered] = useState(false);\n  const [position, setPosition] = useState({ left: 0, top: 0 });\n  const linkRef = useRef(null);\n  const hoverContentRef = useRef(null);\n\n  const updatePosition = useCallback(e => {\n    if (!hoverContentRef.current || !linkRef.current) return;\n\n    const linkRect = linkRef.current.getBoundingClientRect();\n    const { clientX, clientY } = e;\n    const hoverHeight = hoverContentRef.current.offsetHeight;\n    const hoverWidth = hoverContentRef.current.offsetWidth;\n    const linkHeight = linkRect.height;\n\n    let topPosition;\n    if (clientY + hoverHeight + linkHeight <= window.innerHeight) {\n      topPosition = clientY + linkHeight;\n    } else {\n      topPosition = clientY - hoverHeight - linkHeight;\n    }\n\n    const leftPosition = clientX - hoverWidth / 2;\n    console.log(\"leftPosition\", leftPosition);\n\n    setPosition({ left: leftPosition + 100, top: topPosition });\n  }, []);\n\n  const handleMouseOver = useCallback(\n    e => {\n      setIsHovered(true);\n      requestAnimationFrame(() => updatePosition(e));\n    },\n    [updatePosition]\n  );\n\n  const handleMouseMove = useCallback(\n    e => {\n      if (isHovered) updatePosition(e);\n    },\n    [isHovered, updatePosition]\n  );\n\n  const handleMouseLeave = useCallback(() => {\n    setIsHovered(false);\n  }, []);\n\n  useEffect(() => {\n    const handleScroll = () => setIsHovered(false);\n    window.addEventListener(\"scroll\", handleScroll);\n    return () => window.removeEventListener(\"scroll\", handleScroll);\n  }, []);\n\n  return (\n    <a\n      href={href}\n      {...props}\n      ref={linkRef}\n      onMouseOver={handleMouseOver}\n      onMouseMove={handleMouseMove}\n      onMouseLeave={handleMouseLeave}\n    >\n      {children}\n      {ReactDOM.createPortal(\n        isHovered && (\n          <div\n            ref={hoverContentRef}\n            style={{\n              position: \"fixed\",\n              left: position.left,\n              top: position.top,\n              opacity: 1,\n              transform: \"scale(1)\",\n              transition: \"opacity 0.3s, transform 0.3s\",\n              padding: \"10px\",\n              boxShadow: \"0 2px 20px rgba(0,0,0,0.2)\",\n              backgroundColor: \"transparent\",\n              width: \"240px\",\n              pointerEvents: \"none\",\n            }}\n          >\n            {content}\n          </div>\n        ),\n        document.body\n      )}\n    </a>\n  );\n};\n\ninterface HoverLinkContainerProps {\n  url: string;\n  img?: string;\n  content: string;\n  text: string;\n  className?: string;\n  style?: React.CSSProperties;\n}\n\nexport default ({\n  url,\n  img,\n  content,\n  text,\n  className,\n  style,\n}: HoverLinkContainerProps) => {\n  return (\n    <HoverLink\n      href={url}\n      className={className}\n      style={style}\n      content={\n        <div className=\"hover-content\">\n          {img && <img src={img} alt=\"预览\" />}\n          <p>{content}</p>\n        </div>\n      }\n    >\n      {text}\n    </HoverLink>\n  );\n};\n"],"names":["HoverLink","href","content","children","props","isHovered","setIsHovered","useState","position","setPosition","linkRef","useRef","hoverContentRef","updatePosition","useCallback","e","linkRect","clientX","clientY","hoverHeight","hoverWidth","linkHeight","topPosition","leftPosition","handleMouseOver","handleMouseMove","handleMouseLeave","useEffect","handleScroll","jsxs","ReactDOM","jsx","HoverLink$1","url","img","text","className","style"],"mappings":"6lBAIA,MAAMA,EAAY,CAAC,CAAE,KAAAC,EAAM,QAAAC,EAAS,SAAAC,EAAU,GAAGC,KAAY,CAC3D,KAAM,CAACC,EAAWC,CAAY,EAAIC,EAAAA,SAAS,EAAK,EAC1C,CAACC,EAAUC,CAAW,EAAIF,EAAA,SAAS,CAAE,KAAM,EAAG,IAAK,EAAG,EACtDG,EAAUC,SAAO,IAAI,EACrBC,EAAkBD,SAAO,IAAI,EAE7BE,EAAiBC,cAAiBC,GAAA,CACtC,GAAI,CAACH,EAAgB,SAAW,CAACF,EAAQ,QAAS,OAE5C,MAAAM,EAAWN,EAAQ,QAAQ,sBAAsB,EACjD,CAAE,QAAAO,EAAS,QAAAC,CAAA,EAAYH,EACvBI,EAAcP,EAAgB,QAAQ,aACtCQ,EAAaR,EAAgB,QAAQ,YACrCS,EAAaL,EAAS,OAExB,IAAAM,EACAJ,EAAUC,EAAcE,GAAc,OAAO,YAC/CC,EAAcJ,EAAUG,EAExBC,EAAcJ,EAAUC,EAAcE,EAGlC,MAAAE,EAAeN,EAAUG,EAAa,EACpC,QAAA,IAAI,eAAgBG,CAAY,EAExCd,EAAY,CAAE,KAAMc,EAAe,IAAK,IAAKD,EAAa,CAC5D,EAAG,EAAE,EAECE,EAAkBV,EAAA,YACjBC,GAAA,CACHT,EAAa,EAAI,EACK,sBAAA,IAAMO,EAAeE,CAAC,CAAC,CAC/C,EACA,CAACF,CAAc,CACjB,EAEMY,EAAkBX,EAAA,YACjBC,GAAA,CACCV,KAA0BU,CAAC,CACjC,EACA,CAACV,EAAWQ,CAAc,CAC5B,EAEMa,EAAmBZ,EAAAA,YAAY,IAAM,CACzCR,EAAa,EAAK,CACpB,EAAG,EAAE,EAELqB,OAAAA,EAAAA,UAAU,IAAM,CACR,MAAAC,EAAe,IAAMtB,EAAa,EAAK,EACtC,cAAA,iBAAiB,SAAUsB,CAAY,EACvC,IAAM,OAAO,oBAAoB,SAAUA,CAAY,CAChE,EAAG,EAAE,EAGHC,EAAA,KAAC,IAAA,CACC,KAAA5B,EACC,GAAGG,EACJ,IAAKM,EACL,YAAac,EACb,YAAaC,EACb,aAAcC,EAEb,SAAA,CAAAvB,EACA2B,EAAS,aACRzB,GACE0B,EAAA,IAAC,MAAA,CACC,IAAKnB,EACL,MAAO,CACL,SAAU,QACV,KAAMJ,EAAS,KACf,IAAKA,EAAS,IACd,QAAS,EACT,UAAW,WACX,WAAY,+BACZ,QAAS,OACT,UAAW,6BACX,gBAAiB,cACjB,MAAO,QACP,cAAe,MACjB,EAEC,SAAAN,CAAA,CACH,EAEF,SAAS,IAAA,CACX,CAAA,CACF,CAEJ,EAWA8B,EAAe,CAAC,CACd,IAAAC,EACA,IAAAC,EACA,QAAAhC,EACA,KAAAiC,EACA,UAAAC,EACA,MAAAC,CACF,IAEIN,EAAA,IAAC/B,EAAA,CACC,KAAMiC,EACN,UAAAG,EACA,MAAAC,EACA,QACER,EAAA,KAAC,MAAI,CAAA,UAAU,gBACZ,SAAA,CAAAK,GAAQH,EAAA,IAAA,MAAA,CAAI,IAAKG,EAAK,IAAI,KAAK,EAChCH,EAAAA,IAAC,KAAG,SAAQ7B,CAAA,CAAA,CAAA,EACd,EAGD,SAAAiC,CAAA,CACH"}
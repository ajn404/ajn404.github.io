import{_ as Le}from"./preload-helper.ddZQF9G8.js";import{a as ft,i as gt,t as Ue}from"./custom-element.CxHSgrnX.js";import{x as Me}from"./lit-html.C67ygu-D.js";import"./_sentry-release-injection-file.B-UwqLso.js";(function(){try{var o=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},e=new o.Error().stack;e&&(o._sentryDebugIds=o._sentryDebugIds||{},o._sentryDebugIds[e]="c5428e6d-f31b-4a44-aefd-097f86c7ed56",o._sentryDebugIdIdentifier="sentry-dbid-c5428e6d-f31b-4a44-aefd-097f86c7ed56")}catch{}})();class pt extends Error{constructor(e,t){const s=new t.ExceptionInfo(e).get_type(),r=t._vizzu_errorMessage(e,s);super("error: "+t.UTF8ToString(r)),this.name="CError"}}class He{constructor(e,t){this.tt=e,this.et=t}st(e){const t=4*e.length+1,s=this.tt._malloc(t);return this.tt.stringToUTF8(e,s,t),s}rt(e){return this.tt.UTF8ToString(e)}nt(e){const t=this.it(e)();return()=>t}it(e){return(...t)=>{try{return e(...t)}catch(s){throw typeof s=="number"&&Number.isInteger(s)?new pt(s,this.tt):s}}}cObjectParams(){return[this.tt,this.et]}}class F extends He{constructor(e,t){super(...t.cObjectParams()),this.getId=e}ot(e){const t=this.ht(e)();return()=>t}ht(e){return super.it(e).bind(this,this.getId())}}class re extends F{constructor(e,t){super(e,t),this.et.register(this.getId)}free(){this.et.unregister(this.getId),this.tt._object_free(this.getId())}}class pe extends re{}class yt extends F{setParam(e,t=""){const s=this.st(e),r=this.st(t);try{this.ht(this.tt._anim_control_setValue)(s,r)}finally{this.tt._free(r),this.tt._free(s)}}getParam(e){const t=this.st(e);try{const s=this.ht(this.tt._anim_control_getValue)(t);return this.rt(s)}finally{this.tt._free(t)}}storeAnim(){return new pe(this.ot(this.tt._chart_anim_store),this)}}class vt extends F{constructor(e,t,s){super(()=>t,e),this.stops=this.lt(s)}lt(e){const t=[],s=this.getId();for(let r=0;r<40*e;r+=40)t.push({offset:this.tt.getValue(s+r,"double"),color:"rgba("+255*this.tt.getValue(s+r+8,"double")+","+255*this.tt.getValue(s+r+16,"double")+","+255*this.tt.getValue(s+r+24,"double")+","+this.tt.getValue(s+r+32,"double")+")"});return t}}class wt extends re{constructor(e,t){super(t,e)}getColorGradient(e,t){return new vt(this,e,t)}getString(e){return this.tt.UTF8ToString(e)}}function Z(o,e){if(o===null||typeof o!="object"||o instanceof Function)return o;if(Array.isArray(o)&&o instanceof Array)return o.map(s=>Z(s,e));if(e&&o instanceof e)return o;const t={};for(const s in o)s in o&&(t[s]=Z(o[s],e));return t}function $e(o,e,t=""){o&&o!==null&&typeof o=="object"&&Object.keys(o).forEach(s=>{const r=t+(t.length===0?"":".")+s,l=o[s];(function(d){return typeof d=="object"&&d!==null})(l)?$e(l,e,r):e(r,l)})}function _t(o,e,t){const s=e.split(".");let r=o;s.forEach((l,d)=>{if(!function(f){return typeof f=="object"&&f!==null}(r))throw new Error("Expected an object, but got "+typeof r);d<s.length-1?(r[l]=r[l]||(typeof s[d+1]=="number"?[]:{}),r=r[l]):r[l]=t})}class ye extends F{constructor(e,t,s,r,l,d){super(e,t),this.ct=s,this.ut=r,this.dt=l,this.ft=d||((f,b)=>b)}set(e){$e(e,this.setParam.bind(this))}get(){return function(e,t){const s=e(),r={};for(const l of s)_t(r,l,t(l));return Object.freeze(r)}(this.listParams.bind(this),this.getParam.bind(this))}listParams(){const e=this.ht(this.ct)(),t=this.rt(e);return JSON.parse(t)}getParam(e){const t=this.st(e);try{const s=this.ht(this.ut)(t),r=this.rt(s);return this.ft(e,r)}finally{this.tt._free(t)}}setParam(e,t){const s=this.st(e),r=this.st(String(t).toString());try{this.ht(this.dt)(s,r)}finally{this.tt._free(r),this.tt._free(s)}}}class G extends re{}class bt extends F{preventDefault(){this.ht(this.tt._event_preventDefault)()}}class xt extends ye{}class At extends ye{}class Et extends ye{}class Ct extends re{constructor(e,t){super(t,e),this.config=this.yt(),this.style=this.gt(!1),this.computedStyle=this.gt(!0),this.animOptions=this.wt()}update(e){this.ht(this.tt._vizzu_update)(e)}render(e,t,s){this.vt=e,this.ht(this.tt._vizzu_render)(e.getId(),t,s)}animate(e){const t=this.tt.addFunction(s=>{e(s),this.tt.removeFunction(t)},"vi");this.ht(this.tt._chart_animate)(t)}storeSnapshot(){return new G(this.ot(this.tt._chart_store),this)}restoreSnapshot(e){this.ht(this.tt._chart_restore)(e.getId())}restoreAnim(e){this.ht(this.tt._chart_anim_restore)(e.getId())}setKeyframe(){this.ht(this.tt._chart_setKeyframe)()}addEventListener(e,t){const s=this.tt.addFunction((l,d)=>{const f=new bt(()=>l,this);t(f,JSON.parse(this.rt(d)))},"vii"),r=this.st(e);try{this.ht(this.tt._addEventListener)(r,s)}finally{this.tt._free(r)}return s}removeEventListener(e,t){const s=this.st(e);try{this.ht(this.tt._removeEventListener)(s,t)}finally{this.tt._free(s)}this.tt.removeFunction(t)}pointerdown(e,t,s){this.vt&&this.ht(this.tt._vizzu_pointerDown)(this.vt.getId(),e,t,s)}pointermove(e,t,s){this.vt&&this.ht(this.tt._vizzu_pointerMove)(this.vt.getId(),e,t,s)}pointerup(e,t,s){this.vt&&this.ht(this.tt._vizzu_pointerUp)(this.vt.getId(),e,t,s)}pointerleave(e){this.vt&&this.ht(this.tt._vizzu_pointerLeave)(this.vt.getId(),e)}wheel(e){this.vt&&this.ht(this.tt._vizzu_wheel)(this.vt.getId(),e)}getString(e){return this.tt.UTF8ToString(e)}yt(){return new xt(this.getId,this,this.tt._chart_getList,this.tt._chart_getValue,this.tt._chart_setValue,(e,t)=>e.startsWith("channels.")&&e.endsWith(".set")?JSON.parse(t):t)}gt(e){return new At(this.getId,this,this.tt._style_getList,(t,s)=>this.tt._style_getValue(t,s,e),this.tt._style_setValue)}wt(){return new Et(this.getId,this,()=>0,()=>0,this.tt._anim_setValue)}}class zt extends F{toCanvasCoords(e){const t=this.ht(this.tt._chart_relToCanvasCoords)(e.x,e.y);return this.bt(t)}toRelCoords(e){const t=this.ht(this.tt._chart_canvasToRelCoords)(e.x,e.y);return this.bt(t)}bt(e){return{x:this.tt.getValue(e,"double"),y:this.tt.getValue(e+8,"double")}}}class kt extends F{constructor(e,t){super(()=>t,e)}getValue(e){const t=this.st(e);let s,r;try{s=this.ht(this.tt._record_getValue)(t),r=this.tt.getValue(s,"i1")?this.rt(this.tt.getValue(s+8,"i8*")):this.tt.getValue(s+8,"double")}finally{this.tt._free(t)}return r}}class St extends F{getMetaInfo(){const e=this.ht(this.tt._data_metaInfo)(),t=this.rt(e);return{series:JSON.parse(t)}}addDimension(e,t,s){const r=new Uint32Array(s.length);for(let A=0;A<s.length;A++){const B=this.st(s[A]);r[A]=B}const l=4*s.length,d=this.tt._malloc(l);new Uint8Array(this.tt.HEAPU8.buffer,d,l).set(new Uint8Array(r.buffer));const f=4*t.length,b=this.tt._malloc(f);new Uint8Array(this.tt.HEAPU8.buffer,b,f).set(new Uint8Array(new Uint32Array(t).buffer));const x=this.st(e);try{this.ht(this.tt._data_addDimension)(x,d,s.length,b,t.length)}finally{this.tt._free(x);for(const A of r)this.tt._free(A);this.tt._free(b),this.tt._free(d)}}addMeasure(e,t,s){const r=new Float64Array(s),l=8*s.length,d=this.tt._malloc(l);new Uint8Array(this.tt.HEAPU8.buffer,d,l).set(new Uint8Array(r.buffer));const f=this.st(e),b=this.st(t);try{this.ht(this.tt._data_addMeasure)(f,b,d,s.length)}finally{this.tt._free(f),this.tt._free(b),this.tt._free(d)}}addRecord(e){const t=new Uint32Array(e.length);for(let l=0;l<e.length;l++){const d=this.st(String(e[l]).toString());t[l]=d}const s=4*e.length,r=this.tt._malloc(s);new Uint8Array(this.tt.HEAPU8.buffer,r,s).set(new Uint8Array(t.buffer));try{this.ht(this.tt._data_addRecord)(r,e.length)}finally{for(const l of t)this.tt._free(l);this.tt._free(r)}}setFilter(e){const t=[0,0];if(e!==null){const s=l=>e(new kt(this,l));t[0]=this.tt.addFunction(s,"ii");const r=l=>{l!==t[0]&&console.warn("Wrong pointer passed to destructor"),this.tt.removeFunction(t[0]),this.tt.removeFunction(t[1])};t[1]=this.tt.addFunction(r,"vi")}this.ht(this.tt._chart_setFilter)(...t)}}class Bt{setFont(e){this.canvas&&this.setFontStyle(this.canvas.getString(e))}text(e,t,s,r,l){this.canvas&&this.drawText(e,t,s,r,this.canvas.getString(l))}setBrushGradient(e,t,s,r,l,d){this.canvas&&this.setGradient(e,t,s,r,this.canvas.getColorGradient(d,l))}}class Pt{constructor(e){this._t=new FinalizationRegistry(t=>{e(t)})}register(e){this._t.register(e,e())}unregister(e){this._t.unregister(e)}}class Tt extends He{constructor(e){super(e,new Pt(e._object_free));const t=document.createElement("canvas").getContext("2d");if(!t)throw new Error("Failed to get 2D context");this.tt.measureCanvas=t,this.tt.canvases={},this.tt.charts={},this.setLogging(!1)}registerChart(e,t){this.tt.charts[e.getId()]=t}unregisterChart(e){delete this.tt.charts[e.getId()]}registerRenderer(e,t){this.tt.canvases[e.getId()]=t}unregisterRenderer(e){delete this.tt.canvases[e.getId()]}version(){return this.tt.UTF8ToString(this.tt._vizzu_version())}setLogging(e){this.it(this.tt._vizzu_setLogging)(e)}getData(e){return new St(e.getId,this)}getCoordSystem(e){return new zt(e.getId,this)}getAnimControl(e){return new yt(e.getId,this)}createChart(){return new Ct(this,this.nt(this.tt._vizzu_createChart))}createCanvas(){return new wt(this,this.nt(this.tt._vizzu_createCanvas))}}var me,Ot=(me=import.meta.url,function(o={}){var e,t,s,r=o,l=new Promise((n,i)=>{e=n,t=i}),d=Object.assign({},r),f="";typeof document<"u"&&document.currentScript&&(f=document.currentScript.src),me&&(f=me),f=f.startsWith("blob:")?"":f.substr(0,f.replace(/[?#].*/,"").lastIndexOf("/")+1),s=n=>fetch(n,{credentials:"same-origin"}).then(i=>i.ok?i.arrayBuffer():Promise.reject(new Error(i.status+" : "+i.url)));var b,x,A=console.log.bind(console),B=console.error.bind(console);Object.assign(r,d),d=null;var P,C,T,M,k,_,H,K,we=!1;function _e(){var n=x.buffer;P=new Int8Array(n),T=new Int16Array(n),r.HEAPU8=C=new Uint8Array(n),M=new Uint16Array(n),k=new Int32Array(n),_=new Uint32Array(n),H=new Float32Array(n),K=new Float64Array(n)}var Je=[],be=[],Ge=[],X=0,Y=null;function $(n){B(n="Aborted("+n+")"),we=!0,n+=". Build with -sASSERTIONS for more info.";var i=new WebAssembly.RuntimeError(n);throw t(i),i}var ne,xe=n=>n.startsWith("data:application/octet-stream;base64,");function Ye(){if(r.locateFile){var n="cvizzu.wasm";return xe(n)?n:(i=n,r.locateFile?r.locateFile(i,f):f+i)}var i;return new URL("/static/cvizzu.rfESuy-t.wasm",import.meta.url).href}function Ze(n){return s(n).then(i=>new Uint8Array(i),()=>function(i){throw"both async and sync fetching of the wasm failed"}())}function Ae(n,i,a){return Ze(n).then(h=>WebAssembly.instantiate(h,i)).then(a,h=>{B(`failed to asynchronously prepare wasm: ${h}`),$(h)})}var ie=n=>{for(;n.length>0;)n.shift()(r)};function ae(n,i,a="i8"){switch(a.endsWith("*")&&(a="*"),a){case"i1":case"i8":P[n]=i;break;case"i16":T[n>>1]=i;break;case"i32":k[n>>2]=i;break;case"i64":$("to do setValue(i64) use WASM_BIGINT");case"float":H[n>>2]=i;break;case"double":K[n>>3]=i;break;case"*":_[n>>2]=i;break;default:$(`invalid type for setValue: ${a}`)}}class Ee{constructor(i){this.excPtr=i,this.ptr=i-24}set_type(i){_[this.ptr+4>>2]=i}get_type(){return _[this.ptr+4>>2]}set_destructor(i){_[this.ptr+8>>2]=i}get_destructor(){return _[this.ptr+8>>2]}set_caught(i){i=i?1:0,P[this.ptr+12]=i}get_caught(){return P[this.ptr+12]!=0}set_rethrown(i){i=i?1:0,P[this.ptr+13]=i}get_rethrown(){return P[this.ptr+13]!=0}init(i,a){this.set_adjusted_ptr(0),this.set_type(i),this.set_destructor(a)}set_adjusted_ptr(i){_[this.ptr+16>>2]=i}get_adjusted_ptr(){return _[this.ptr+16>>2]}get_exception_ptr(){if(Ie(this.get_type()))return _[this.excPtr>>2];var i=this.get_adjusted_ptr();return i!==0?i:this.excPtr}}var Ce,ze,R=n=>{for(var i="",a=n;C[a];)i+=Ce[C[a++]];return i},oe={},ke={},q=n=>{throw new ze(n)};function I(n,i,a={}){if(!("argPackAdvance"in i))throw new TypeError("registerType registeredInstance requires argPackAdvance");return function(h,c,u={}){var m=c.name;if(h||q(`type "${m}" must have a positive integer typeid pointer`),ke.hasOwnProperty(h)){if(u.ignoreDuplicateRegistrations)return;q(`Cannot register type '${m}' twice`)}if(ke[h]=c,oe.hasOwnProperty(h)){var p=oe[h];delete oe[h],p.forEach(g=>g())}}(n,i,a)}var he=[],W=[],Ke=()=>W.length/2-5-he.length,Xe=n=>(n||q("Cannot use deleted val. handle = "+n),W[n]),Qe=n=>{switch(n){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const i=he.pop()||W.length;return W[i]=n,W[i+1]=1,i}}};function le(n){return this.fromWireType(_[n>>2])}var N,L,et={name:"emscripten::val",fromWireType:n=>{var i=Xe(n);return(a=>{a>9&&--W[a+1]==0&&(W[a]=void 0,he.push(a))})(n),i},toWireType:(n,i)=>Qe(i),argPackAdvance:8,readValueFromPointer:le,destructorFunction:null},tt=(n,i)=>{switch(i){case 4:return function(a){return this.fromWireType(H[a>>2])};case 8:return function(a){return this.fromWireType(K[a>>3])};default:throw new TypeError(`invalid float width (${i}): ${n}`)}},st=(n,i,a)=>{switch(i){case 1:return a?h=>P[h]:h=>C[h];case 2:return a?h=>T[h>>1]:h=>M[h>>1];case 4:return a?h=>k[h>>2]:h=>_[h>>2];default:throw new TypeError(`invalid integer width (${i}): ${n}`)}},Se=(n,i,a)=>((h,c,u,m)=>{if(!(m>0))return 0;for(var p=u,g=u+m-1,w=0;w<h.length;++w){var v=h.charCodeAt(w);if(v>=55296&&v<=57343&&(v=65536+((1023&v)<<10)|1023&h.charCodeAt(++w)),v<=127){if(u>=g)break;c[u++]=v}else if(v<=2047){if(u+1>=g)break;c[u++]=192|v>>6,c[u++]=128|63&v}else if(v<=65535){if(u+2>=g)break;c[u++]=224|v>>12,c[u++]=128|v>>6&63,c[u++]=128|63&v}else{if(u+3>=g)break;c[u++]=240|v>>18,c[u++]=128|v>>12&63,c[u++]=128|v>>6&63,c[u++]=128|63&v}}return c[u]=0,u-p})(n,C,i,a),Be=typeof TextDecoder<"u"?new TextDecoder:void 0,Pe=(n,i,a)=>{for(var h=i+a,c=i;n[c]&&!(c>=h);)++c;if(c-i>16&&n.buffer&&Be)return Be.decode(n.subarray(i,c));for(var u="";i<c;){var m=n[i++];if(128&m){var p=63&n[i++];if((224&m)!=192){var g=63&n[i++];if((m=(240&m)==224?(15&m)<<12|p<<6|g:(7&m)<<18|p<<12|g<<6|63&n[i++])<65536)u+=String.fromCharCode(m);else{var w=m-65536;u+=String.fromCharCode(55296|w>>10,56320|1023&w)}}else u+=String.fromCharCode((31&m)<<6|p)}else u+=String.fromCharCode(m)}return u},Q=(n,i)=>n?Pe(C,n,i):"",Te=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,rt=(n,i)=>{for(var a=n,h=a>>1,c=h+i/2;!(h>=c)&&M[h];)++h;if((a=h<<1)-n>32&&Te)return Te.decode(C.subarray(n,a));for(var u="",m=0;!(m>=i/2);++m){var p=T[n+2*m>>1];if(p==0)break;u+=String.fromCharCode(p)}return u},nt=(n,i,a)=>{if(a??=2147483647,a<2)return 0;for(var h=i,c=(a-=2)<2*n.length?a/2:n.length,u=0;u<c;++u){var m=n.charCodeAt(u);T[i>>1]=m,i+=2}return T[i>>1]=0,i-h},it=n=>2*n.length,at=(n,i)=>{for(var a=0,h="";!(a>=i/4);){var c=k[n+4*a>>2];if(c==0)break;if(++a,c>=65536){var u=c-65536;h+=String.fromCharCode(55296|u>>10,56320|1023&u)}else h+=String.fromCharCode(c)}return h},ot=(n,i,a)=>{if(a??=2147483647,a<4)return 0;for(var h=i,c=h+a-4,u=0;u<n.length;++u){var m=n.charCodeAt(u);if(m>=55296&&m<=57343&&(m=65536+((1023&m)<<10)|1023&n.charCodeAt(++u)),k[i>>2]=m,(i+=4)+4>c)break}return k[i>>2]=0,i-h},ht=n=>{for(var i=0,a=0;a<n.length;++a){var h=n.charCodeAt(a);h>=55296&&h<=57343&&++a,i+=4}return i},lt=n=>{var i=(n-x.buffer.byteLength+65535)/65536;try{return x.grow(i),_e(),1}catch{}},ct=[null,[],[]],Oe=(n,i)=>{n<128?i.push(n):i.push(n%128|128,n>>7)},ut=(n,i)=>{if(typeof WebAssembly.Function=="function")return new WebAssembly.Function((u=>{for(var m={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},p={parameters:[],results:u[0]=="v"?[]:[m[u[0]]]},g=1;g<u.length;++g)p.parameters.push(m[u[g]]);return p})(i),n);var a=[1];((u,m)=>{var p=u.slice(0,1),g=u.slice(1),w={i:127,p:127,j:126,f:125,d:124,e:111};m.push(96),Oe(g.length,m);for(var v=0;v<g.length;++v)m.push(w[g[v]]);p=="v"?m.push(0):m.push(1,w[p])})(i,a);var h=[0,97,115,109,1,0,0,0,1];Oe(a.length,h),h.push(...a),h.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var c=new WebAssembly.Module(new Uint8Array(h));return new WebAssembly.Instance(c,{e:{f:n}}).exports.f},Fe=n=>N.get(n),dt=n=>(L||(L=new WeakMap,((i,a)=>{if(L)for(var h=i;h<i+a;h++){var c=Fe(h);c&&L.set(c,h)}})(0,N.length)),L.get(n)||0),ce=[],ue=(n,i)=>N.set(n,i);(()=>{for(var n=new Array(256),i=0;i<256;++i)n[i]=String.fromCharCode(i);Ce=n})(),ze=r.BindingError=class extends Error{constructor(n){super(n),this.name="BindingError"}},r.InternalError=class extends Error{constructor(n){super(n),this.name="InternalError"}},W.push(0,1,void 0,1,null,1,!0,1,!1,1),r.count_emval_handles=Ke;var mt={a:(n,i,a)=>{throw new Ee(n).init(i,a),n},q:()=>{$("")},l:(n,i,a,h,c)=>{},o:(n,i,a,h)=>{I(n,{name:i=R(i),fromWireType:function(c){return!!c},toWireType:function(c,u){return u?a:h},argPackAdvance:8,readValueFromPointer:function(c){return this.fromWireType(C[c])},destructorFunction:null})},n:n=>I(n,et),e:(n,i,a)=>{I(n,{name:i=R(i),fromWireType:h=>h,toWireType:(h,c)=>c,argPackAdvance:8,readValueFromPointer:tt(i,a),destructorFunction:null})},c:(n,i,a,h,c)=>{i=R(i);var u=g=>g;if(h===0){var m=32-8*a;u=g=>g<<m>>>m}var p=i.includes("unsigned");I(n,{name:i,fromWireType:u,toWireType:p?function(g,w){return this.name,w>>>0}:function(g,w){return this.name,w},argPackAdvance:8,readValueFromPointer:st(i,a,h!==0),destructorFunction:null})},b:(n,i,a)=>{var h=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][i];function c(u){var m=_[u>>2],p=_[u+4>>2];return new h(P.buffer,p,m)}I(n,{name:a=R(a),fromWireType:c,argPackAdvance:8,readValueFromPointer:c},{ignoreDuplicateRegistrations:!0})},f:(n,i)=>{var a=(i=R(i))==="std::string";I(n,{name:i,fromWireType(h){var c,u=_[h>>2],m=h+4;if(a)for(var p=m,g=0;g<=u;++g){var w=m+g;if(g==u||C[w]==0){var v=Q(p,w-p);c===void 0?c=v:(c+="\0",c+=v),p=w+1}}else{var z=new Array(u);for(g=0;g<u;++g)z[g]=String.fromCharCode(C[m+g]);c=z.join("")}return D(h),c},toWireType(h,c){var u;c instanceof ArrayBuffer&&(c=new Uint8Array(c));var m=typeof c=="string";m||c instanceof Uint8Array||c instanceof Uint8ClampedArray||c instanceof Int8Array||q("Cannot pass non-string to std::string"),u=a&&m?(z=>{for(var O=0,U=0;U<z.length;++U){var te=z.charCodeAt(U);te<=127?O++:te<=2047?O+=2:te>=55296&&te<=57343?(O+=4,++U):O+=3}return O})(c):c.length;var p=de(4+u+1),g=p+4;if(_[p>>2]=u,a&&m)Se(c,g,u+1);else if(m)for(var w=0;w<u;++w){var v=c.charCodeAt(w);v>255&&(D(g),q("String has UTF-16 code units that do not fit in 8 bits")),C[g+w]=v}else for(w=0;w<u;++w)C[g+w]=c[w];return h!==null&&h.push(D,p),p},argPackAdvance:8,readValueFromPointer:le,destructorFunction(h){D(h)}})},d:(n,i,a)=>{var h,c,u,m;a=R(a),i===2?(h=rt,c=nt,m=it,u=p=>M[p>>1]):i===4&&(h=at,c=ot,m=ht,u=p=>_[p>>2]),I(n,{name:a,fromWireType:p=>{for(var g,w=_[p>>2],v=p+4,z=0;z<=w;++z){var O=p+4+z*i;if(z==w||u(O)==0){var U=h(v,O-v);g===void 0?g=U:(g+="\0",g+=U),v=O+i}}return D(p),g},toWireType:(p,g)=>{typeof g!="string"&&q(`Cannot pass non-string to C++ string type ${a}`);var w=m(g),v=de(4+w+i);return _[v>>2]=w/i,c(g,v+4,w+i),p!==null&&p.push(D,v),v},argPackAdvance:8,readValueFromPointer:le,destructorFunction(p){D(p)}})},p:(n,i)=>{I(n,{isVoid:!0,name:i=R(i),argPackAdvance:0,fromWireType:()=>{},toWireType:(a,h)=>{}})},H:function(n,i,a,h,c,u,m){r.canvases[n].addBezier(i,a,h,c,u,m)},I:function(n,i,a){r.canvases[n].addPoint(i,a)},O:function(n){r.canvases[n].beginDropShadow()},J:function(n){r.canvases[n].beginPolygon()},D:function(n,i,a,h){r.canvases[n].circle(i,a,h)},K:function(n){r.canvases[n].endDropShadow()},G:function(n){r.canvases[n].endPolygon()},y:function(n){r.canvases[n].frameBegin()},z:function(n){r.canvases[n].frameEnd()},C:function(n,i,a,h,c){r.canvases[n].line(i,a,h,c)},F:function(n,i,a,h,c){r.canvases[n].rectangle(i,a,h,c)},v:function(n){r.canvases[n].restore()},w:function(n){r.canvases[n].save()},j:function(n,i,a,h,c){r.canvases[n].setBrushColor(i,a,h,c)},A:function(n,i,a,h,c,u,m){r.canvases[n].setBrushGradient(i,a,h,c,u,m)},m:function(n,i,a,h){r.canvases[n].setClipCircle(i,a,h)},k:function(n){r.canvases[n].setClipPolygon()},t:function(n,i,a,h,c){r.canvases[n].setClipRect(i,a,h,c)},N:function(n,i){r.canvases[n].setDropShadowBlur(i)},M:function(n,i,a,h,c){r.canvases[n].setDropShadowColor(i,a,h,c)},L:function(n,i,a){r.canvases[n].setDropShadowOffset(i,a)},g:function(n,i){r.canvases[n].setFont(i)},i:function(n,i,a,h,c){r.canvases[n].setLineColor(i,a,h,c)},h:function(n,i){r.canvases[n].setLineWidth(i)},B:function(n,i,a,h,c,u){r.canvases[n].text(i,a,h,c,u)},x:function(n,i,a,h,c,u,m){r.canvases[n].transform(i,a,h,c,u,m)},E:function(n){r.charts[n].doChange()},P:function(n,i){r.charts[n].openUrl(i)},r:n=>{var i=C.length,a=2147483648;if((n>>>=0)>a)return!1;for(var h,c,u=1;u<=4;u*=2){var m=i*(1+.2/u);m=Math.min(m,n+100663296);var p=Math.min(a,(h=Math.max(n,m))+((c=65536)-h%c)%c);if(lt(p))return!0}return!1},s:(n,i,a,h)=>{for(var c,u,m,p=0,g=0;g<a;g++){var w=_[i>>2],v=_[i+4>>2];i+=8;for(var z=0;z<v;z++)c=n,u=C[w+z],m=void 0,m=ct[c],u===0||u===10?((c===1?A:B)(Pe(m,0)),m.length=0):m.push(u);p+=v}return _[h>>2]=p,0},u:function(n,i,a,h){const c=r.measureCanvas;c.font=Q(n);let u=c.measureText(Q(i));const m=u.width;u=c.measureText("Op");const p=u.actualBoundingBoxAscent+u.actualBoundingBoxDescent;ae(a,m,"double"),ae(h,p,"double")}},y=function(){var n,i,a,h,c={a:mt};function u(m,p){var g;return y=m.exports,x=y.Q,_e(),N=y.Da,g=y.R,be.unshift(g),function(w){if(--X==0&&Y){var v=Y;Y=null,v()}}(),y}return X++,ne||(ne=Ye()),(n=b,i=ne,a=c,h=function(m){u(m.instance)},n||typeof WebAssembly.instantiateStreaming!="function"||xe(i)||typeof fetch!="function"?Ae(i,a,h):fetch(i,{credentials:"same-origin"}).then(m=>WebAssembly.instantiateStreaming(m,a).then(h,function(p){return B(`wasm streaming compile failed: ${p}`),B("falling back to ArrayBuffer instantiation"),Ae(i,a,h)}))).catch(t),{}}();r._vizzu_errorMessage=(n,i)=>(r._vizzu_errorMessage=y.S)(n,i),r._vizzu_version=()=>(r._vizzu_version=y.T)(),r._vizzu_setLogging=n=>(r._vizzu_setLogging=y.U)(n),r._vizzu_createChart=()=>(r._vizzu_createChart=y.V)(),r._vizzu_createCanvas=()=>(r._vizzu_createCanvas=y.W)(),r._vizzu_pointerMove=(n,i,a,h,c)=>(r._vizzu_pointerMove=y.X)(n,i,a,h,c),r._vizzu_pointerDown=(n,i,a,h,c)=>(r._vizzu_pointerDown=y.Y)(n,i,a,h,c),r._vizzu_pointerUp=(n,i,a,h,c)=>(r._vizzu_pointerUp=y.Z)(n,i,a,h,c),r._vizzu_pointerLeave=(n,i,a)=>(r._vizzu_pointerLeave=y._)(n,i,a),r._vizzu_wheel=(n,i,a)=>(r._vizzu_wheel=y.$)(n,i,a),r._vizzu_update=(n,i)=>(r._vizzu_update=y.aa)(n,i),r._vizzu_render=(n,i,a,h)=>(r._vizzu_render=y.ba)(n,i,a,h),r._style_getList=()=>(r._style_getList=y.ca)(),r._style_setValue=(n,i,a)=>(r._style_setValue=y.da)(n,i,a),r._style_getValue=(n,i,a)=>(r._style_getValue=y.ea)(n,i,a),r._chart_store=n=>(r._chart_store=y.fa)(n),r._chart_restore=(n,i)=>(r._chart_restore=y.ga)(n,i),r._chart_anim_store=n=>(r._chart_anim_store=y.ha)(n),r._chart_anim_restore=(n,i)=>(r._chart_anim_restore=y.ia)(n,i),r._object_free=n=>(r._object_free=y.ja)(n),r._chart_getList=()=>(r._chart_getList=y.ka)(),r._chart_getValue=(n,i)=>(r._chart_getValue=y.la)(n,i),r._chart_setValue=(n,i,a)=>(r._chart_setValue=y.ma)(n,i,a),r._chart_setFilter=(n,i,a)=>(r._chart_setFilter=y.na)(n,i,a),r._record_getValue=(n,i)=>(r._record_getValue=y.oa)(n,i),r._data_addDimension=(n,i,a,h,c,u)=>(r._data_addDimension=y.pa)(n,i,a,h,c,u),r._data_addMeasure=(n,i,a,h,c)=>(r._data_addMeasure=y.qa)(n,i,a,h,c),r._data_addRecord=(n,i,a)=>(r._data_addRecord=y.ra)(n,i,a),r._data_metaInfo=n=>(r._data_metaInfo=y.sa)(n),r._addEventListener=(n,i,a)=>(r._addEventListener=y.ta)(n,i,a),r._removeEventListener=(n,i,a)=>(r._removeEventListener=y.ua)(n,i,a),r._event_preventDefault=n=>(r._event_preventDefault=y.va)(n),r._chart_animate=(n,i)=>(r._chart_animate=y.wa)(n,i),r._chart_relToCanvasCoords=(n,i,a)=>(r._chart_relToCanvasCoords=y.xa)(n,i,a),r._chart_canvasToRelCoords=(n,i,a)=>(r._chart_canvasToRelCoords=y.ya)(n,i,a),r._chart_setKeyframe=n=>(r._chart_setKeyframe=y.za)(n),r._anim_control_setValue=(n,i,a)=>(r._anim_control_setValue=y.Aa)(n,i,a),r._anim_control_getValue=(n,i)=>(r._anim_control_getValue=y.Ba)(n,i),r._anim_setValue=(n,i,a)=>(r._anim_setValue=y.Ca)(n,i,a);var ee,de=r._malloc=n=>(de=r._malloc=y.Ea)(n),D=r._free=n=>(D=r._free=y.Fa)(n),Ie=n=>(Ie=y.Ga)(n);function We(){X>0||(ie(Je),X>0||ee||(ee=!0,r.calledRun=!0,we||(ie(be),e(r),ie(Ge))))}return r.addFunction=(n,i)=>{var a=dt(n);if(a)return a;var h=(()=>{if(ce.length)return ce.pop();try{N.grow(1)}catch(u){throw u instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":u}return N.length-1})();try{ue(h,n)}catch(u){if(!(u instanceof TypeError))throw u;var c=ut(n,i);ue(h,c)}return L.set(n,h),h},r.removeFunction=n=>{L.delete(Fe(n)),ue(n,null),ce.push(n)},r.setValue=ae,r.getValue=function(n,i="i8"){switch(i.endsWith("*")&&(i="*"),i){case"i1":case"i8":return P[n];case"i16":return T[n>>1];case"i32":return k[n>>2];case"i64":$("to do getValue(i64) use WASM_BIGINT");case"float":return H[n>>2];case"double":return K[n>>3];case"*":return _[n>>2];default:$(`invalid type for getValue: ${i}`)}},r.UTF8ToString=Q,r.stringToUTF8=Se,r.ExceptionInfo=Ee,Y=function n(){ee||We(),ee||(Y=n)},We(),l});const fe=new class{constructor(){this.xt={},this.At=null}set options(o){this.xt={...this.xt,...o}}get options(){return this.xt}initialize(){return this.At||(this.At=this.kt()),this.At}async kt(){return new Tt(await Ot(this.Ct()))}Ct(){const o={};if(this.xt?.wasmUrl){const e=this.xt.wasmUrl;o.locateFile=t=>t.endsWith(".wasm")?e:t}return o}};class De extends Error{constructor(){super("Canvas is not initialized"),this.name="CanvasError"}}class Ft extends Bt{constructor(){super(...arguments),this.St=!1,this.Et=1}get hooks(){return{render:(e,t)=>{"htmlCanvas"in e&&(this.Bt=e.htmlCanvas,e.renderer=this),t()}}}get jt(){if(!this.Bt)throw new De;return this.Bt}get Pt(){if(!this.Bt)throw new De;return this.Bt.context}frameBegin(){this.Et=1,this.St=!1,this.jt.frameBegin()}frameEnd(){this.jt.frameEnd()}setClipRect(e,t,s,r){const l=this.Pt;l.beginPath(),l.rect(e,t,s,r),l.clip()}setClipCircle(e,t,s){const r=this.Pt;r.beginPath(),r.arc(e,t,s,0,6.28318530718),r.clip()}setClipPolygon(){const e=this.Pt;e.closePath(),e.clip(),this.St=!1}setBrushColor(e,t,s,r){this.Pt.fillStyle="rgba("+255*e+","+255*t+","+255*s+","+r+")"}setLineColor(e,t,s,r){this.Pt.strokeStyle="rgba("+255*e+","+255*t+","+255*s+","+r+")"}setLineWidth(e){this.Pt.lineWidth=e,this.Et=e}setFontStyle(e){this.Pt.font=e}beginDropShadow(){}setDropShadowBlur(e){this.Pt.shadowBlur=e}setDropShadowColor(e,t,s,r){this.Pt.shadowColor="rgba("+255*e+","+255*t+","+255*s+","+r+")"}setDropShadowOffset(e,t){const s=this.Pt;s.shadowOffsetX=e,s.shadowOffsetY=t}endDropShadow(){const e=this.Pt;e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowColor="rgba(0, 0, 0, 0)"}beginPolygon(){this.Pt.beginPath()}addPoint(e,t){const s=this.Pt;this.St?s.lineTo(e,t):s.moveTo(e,t),this.St=!0}addBezier(e,t,s,r,l,d){this.Pt.bezierCurveTo(e,t,s,r,l,d)}endPolygon(){const e=this.Pt;e.closePath(),e.fill(),this.Et!==0&&e.stroke(),this.St=!1}rectangle(e,t,s,r){const l=this.Pt;l.beginPath(),l.rect(e,t,s,r),l.fill(),this.Et!==0&&l.stroke()}circle(e,t,s){const r=this.Pt;r.beginPath(),r.arc(e,t,s,0,6.28318530718),r.fill(),this.Et!==0&&r.stroke()}line(e,t,s,r){const l=this.Pt;l.beginPath(),l.moveTo(e,t),l.lineTo(s,r),this.Et!==0&&l.stroke()}drawText(e,t,s,r,l){const d=this.Pt;d.textAlign="left",d.textBaseline="top",e+=s<0?-s:0,t+=r<0?-r:0,d.fillText(l,e,t)}setGradient(e,t,s,r,l){const d=this.Pt,f=d.createLinearGradient(e,t,s,r);l.stops.forEach(b=>f.addColorStop(b.offset,b.color)),d.fillStyle=f}transform(e,t,s,r,l,d){this.Pt.transform(e,t,s,r,l,d)}save(){this.Pt.save()}restore(){this.Pt.restore()}}class It{constructor(){this.meta={name:"clock"}}get api(){return{now:()=>this.Tt()}}get hooks(){return{update:(e,t)=>{e.timeInMSecs===null&&(e.timeInMSecs=this.Tt()),t()}}}Tt(){return performance.now()}}class Wt{constructor(e){this.meta={name:"coordSystem"},this.api={toCanvas:t=>this.zt.toCanvasCoords(t),toRelative:t=>this.zt.toRelCoords(t)},this.zt=e}}const Dt=o=>{try{return o.cssRules,!0}catch{return!1}},jt=(o,e="")=>{const t=((r="")=>[...document.styleSheets].filter(Dt).reduce((l,d)=>l.concat([...d.cssRules].filter(f=>f.constructor.name==="CSSStyleRule").reduce((f,b)=>[...f,...[...b.style].filter(x=>x.trim().indexOf("--"+r+"-")===0).map(x=>x.trim())],[])),[]))(e),s=getComputedStyle(o);return t.map(r=>[r,s.getPropertyValue(r).trim()]).filter(r=>r[1]!=="")};class Vt{constructor(e={}){this.meta={name:"cssProperties",depends:["htmlCanvas"]},this.api={prefix:"vizzu"},e?.prefix&&(this.api.prefix=e.prefix)}get hooks(){return{prepareAnimation:(e,t)=>{const s=jt(this.Ot.feature.htmlCanvas.element,this.api.prefix);Array.isArray(e.target)&&e.target.forEach(({target:r})=>{r instanceof G||(r.style=((l,d,f="",b=!1)=>(d=d||{},d=l.reduce((x,[A,B])=>(A&&((P,C,T,M)=>{C.reduce((k,_,H)=>(H===C.length-1?!M&&k[_]||(k[_]=T):k[_]||(k[_]={}),k[_]),P)})(x,A.replace("--"+(f?f+"-":""),"").split("-"),B,b),x),d),d))(s,r.style,this.api.prefix))}),t()}}}register(e){this.Ot=e}}var ge;(function(o){o.click="click",o.pointermove="pointermove",o.pointerdown="pointerdown",o.pointerup="pointerup",o.pointerleave="pointerleave",o.wheel="wheel",o.update="update",o.drawBegin="draw-begin",o.drawComplete="draw-complete",o.backgroundDraw="background-draw",o.titleDraw="title-draw",o.subtitleDraw="subtitle-draw",o.captionDraw="caption-draw",o.logoDraw="logo-draw",o.legendBackgroundDraw="legend-background-draw",o.legendTitleDraw="legend-title-draw",o.legendLabelDraw="legend-label-draw",o.legendMarkerDraw="legend-marker-draw",o.legendBarDraw="legend-bar-draw",o.plotBackgroundDraw="plot-background-draw",o.plotAreaDraw="plot-area-draw",o.plotMarkerDraw="plot-marker-draw",o.plotMarkerLabelDraw="plot-marker-label-draw",o.plotMarkerGuideDraw="plot-marker-guide-draw",o.plotAxisDraw="plot-axis-draw",o.plotAxisTitleDraw="plot-axis-title-draw",o.plotAxisLabelDraw="plot-axis-label-draw",o.plotAxisTickDraw="plot-axis-tick-draw",o.plotAxisGuideDraw="plot-axis-guide-draw",o.plotAxisInterlacingDraw="plot-axis-interlacing-draw",o.animationBegin="animation-begin",o.animationComplete="animation-complete"})(ge||(ge={}));class Rt{constructor(e){this.Ft={},this.Wt=e}add(e,t){if(typeof e!="string")throw new Error("first parameter should be string");this.Dt(e).push(t)}Dt(e){if(!(e in this.Ft)){let t=null;if(!this.Ut(e)){const s=(r,l)=>{this.It(e,l,r)};t=this.Wt.addEventListener(e,s)}this.Ft[e]=[t,[]]}return this.Ft[e][1]}remove(e,t){if(typeof e!="string")throw new Error("first parameter should be string");const s=this.Ft[e];if(!s)throw new Error("unknown event handler");const[r,l]=s;l.find((d,f)=>d===t&&(l.splice(f,1),!0)),l.length===0&&(this.Ut(e)||r&&this.Wt.removeEventListener(e,r),delete this.Ft[e])}addMany(e){for(const[t,s]of Object.entries(e))this.add(t,s)}removeMany(e){for(const[t,s]of Object.entries(e))this.remove(t,s)}It(e,t,s){const r={canceled:!1};try{const l=this.Ft[e];if(l)for(const d of[...l[1]])d(this.Ut(e)?this.Mt(t,r):s?this.Nt(s,t,r):t)}catch(l){console.log("exception in event handler: "+l)}return r.canceled}Ut(e){return e.startsWith("api-")}Mt(e,t){return e.preventDefault=()=>{t.canceled=!0},e}Nt(e,t,s){return t.preventDefault=()=>{e.preventDefault(),s.canceled=!0},t}}class je{get api(){const e=this;return{get element(){return e.Rt},set element(t){e.Lt(t)},context:this.context,clientToCanvas:this.$t.bind(this),canvasToClient:this.Vt.bind(this)}}get hooks(){return{start:(e,t)=>{this.Ht=e.update,t()},render:(e,t)=>{e.htmlCanvas=this,e.size=this.qt(),t()}}}get listeners(){return Object.fromEntries(Object.values(ge).filter(e=>e.endsWith("-draw")||e.startsWith("draw-")).map(e=>[e,this.Gt.bind(this)]))}Gt(e){e.renderingContext=this.context}static extractOptions(e){const t=typeof e!="object"||e instanceof HTMLElement?{element:e}:e;if(t===null||!("element"in t))throw new Error("element not specified");let s=t.element;if(typeof s=="string"&&(s=document.getElementById(s)),!(s instanceof HTMLElement))throw new Error(`Cannot find element ${t.element} to render Vizzu!`);return{element:s}}constructor(e){this.Ht=()=>{},this.Kt="",this.Jt=1,this.Yt=1,this.Qt=1,this.meta={name:"htmlCanvas"},this.Xt=document.createElement("canvas");const t=this.Xt.getContext("2d");if(!t)throw Error("Cannot get rendering context of internal canvas");this.Zt=t,this.te=()=>{this.Ht(!0)},this.Lt(e.element),window.addEventListener("resize",this.te)}Lt(e){this.Rt=this.ee(e),this.Kt="";const t=this.Rt.getContext("2d");if(!t)throw Error("Cannot get rendering context of canvas");this.Pt=t,this.qt(),this.se=this.re(this.Rt)}unregister(){window.removeEventListener("resize",this.te),this.se.disconnect(),this.ne&&this.ne.removeChild(this.Rt)}get element(){return this.Rt}set element(e){this.Lt(e)}get context(){return this.Zt}qt(){this.Jt=window.devicePixelRatio,this.Yt=+getComputedStyle(this.Rt).width.slice(0,-2),this.Qt=+getComputedStyle(this.Rt).height.slice(0,-2);const e=`${this.Jt}:${this.Yt}:${this.Qt}`;return e!==this.Kt&&(this.Rt.width=this.Yt*this.Jt,this.Rt.height=this.Qt*this.Jt,this.Xt.width=this.Yt*this.Jt,this.Xt.height=this.Qt*this.Jt,this.Zt.setTransform(1,0,0,1,0,0),this.Zt.translate(.5,.5),this.Zt.scale(this.Jt,this.Jt)),this.Kt=e,{x:this.Yt,y:this.Qt}}frameBegin(){this.Zt.clearRect(-1,-1,this.Yt+2,this.Qt+2)}frameEnd(){this.Pt.clearRect(-1,-1,this.Rt.width+1,this.Rt.height+1),this.Pt.drawImage(this.Xt,0,0)}ie(){return this.Rt.getBoundingClientRect()}ae(e){return{x:e.width/(this.Rt.width/this.Jt),y:e.height/(this.Rt.height/this.Jt)}}$t(e){const t=this.ie(),s=this.ae(t);return{x:(e.x-t.x)/s.x,y:(e.y-t.y)/s.y}}Vt(e){const t=this.ie(),s=this.ae(t);return{x:t.x+e.x*s.x,y:t.y+e.y*s.y}}ee(e){if(e instanceof HTMLCanvasElement)return e;{const t=document.createElement("canvas");return t.style.width="100%",t.style.height="100%",this.ne=e,this.ne.appendChild(t),t}}re(e){const t=new ResizeObserver(()=>{this.Ht(!0)});return t.observe(e),t}}class Lt{constructor(e){this.meta={name:"logging"},this.oe=e}enable(e){this.oe(e)}}const E=(o,e)=>{if(!o)throw new Error("Assert failed: "+e)},qe=(o,e,t)=>{E(Array.isArray(e),"array is not a list");try{if(e.length!==o.dimensions[t].values.length)throw new Error("Assert failed")}catch{E(!1,"dimensions are not the same")}e.forEach(s=>{Array.isArray(s)&&qe(o,s,t-1)})};class Ve{static isPivot(e){return e!==void 0&&("dimensions"in e&&e.dimensions!==void 0||"measures"in e&&e.measures!==void 0)}static convert(e){E(typeof e=="object"&&e!==null&&!Array.isArray(e),"data is not an object"),E("dimensions"in e,"data.dimensions is requreid"),E("measures"in e,"data.measures is requreid");const t=(({dimensions:l,measures:d,...f})=>Object.assign(f,{series:[]}))(e);let s=1;E(Array.isArray(e.dimensions),"data.dimensions is not a list");for(let l=0;l<e.dimensions.length;l++){const d=e.dimensions[l];E(typeof d=="object"&&d!==null&&!Array.isArray(d),"data.dimensions.item is not an object"),E("name"in d,"data.dimensions.item.name is requreid"),E(d.type===void 0||d.type==="dimension","data.dimensions.item.type is invalid"),E("values"in d,"data.dimensions.item.values is requreid"),E(Array.isArray(d.values),"data.dimensions.item.values is not a list"),E(d.values.length!==0,"data.dimensions.item.values length is zero"),s*=d.values.length}let r=1;for(let l=0;l<e.dimensions.length;l++){const d=e.dimensions[l];let f=[];const b=[];d.values.forEach(A=>{for(let B=1;B<=r;B++)b.push(A)}),r*=d.values.length;for(let A=1;A<=s/r;A++)f=f.concat(b);const x={name:d.name,type:"dimension",values:f};t.series.push(x)}E(typeof e.measures=="object"&&e.measures!==null,"data.measures is not a list or an object"),Array.isArray(e.measures)||(e.measures=[e.measures]);for(let l=0;l<e.measures.length;l++){const d=e.measures[l];E(typeof d=="object"&&d!==null&&!Array.isArray(d),"data.measures.item is not an object"),E("name"in d,"data.measures.item.name is requreid"),E("values"in d,"data.measures.item.values is requreid"),E(Array.isArray(d.values),"data.measures.item.values is not a list"),qe(e,d.values,e.dimensions.length-1);const f={name:d.name,type:d.type,values:d.values.flat(1/0)};f.type===void 0&&delete f.type,E(f.values.length===s,"dimensions are not the same"),t.series.push(f)}return t}}class ve{constructor(){this.meta={name:"pivotData"}}get hooks(){return{prepareAnimation:(e,t)=>{Array.isArray(e.target)&&e.target.forEach(({target:s})=>{if(!(s instanceof G)&&s.data&&s.data&&Ve.isPivot(s.data)){if(ve.he(s.data))throw new Error("inconsistent data form: series/records and dimensions/measures are both set.");s.data=Ve.convert(s.data)}}),t()}}}static he(e){return"series"in e||"records"in e}}class Ut extends Error{constructor(){super("animation canceled"),this.name="CancelError"}}class S extends Error{constructor(){super("vizzu is not initialized, use `initializing` promise"),this.name="NotInitializedError"}}class Mt{constructor(e){this.le=!1,this.meta={name:"pointerEvents",depends:["htmlCanvas"]},this.ce={pointermove:t=>{this.ue(t,e.pointermove.bind(e))},pointerup:t=>{this.ue(t,e.pointerup.bind(e))},pointerdown:t=>{this.ue(t,e.pointerdown.bind(e))},pointerleave:t=>{this.ue(t,e.pointerleave.bind(e))},wheel:t=>{this.ue(t,e.wheel.bind(e),"deltaY")}}}register(e){this.de=e,this.me=this.de?.feature.htmlCanvas}unregister(){this.le&&this.fe()}enable(e){this.le=e,e?this.ye():this.fe()}ye(){if(!this.de||!this.ce)throw new S;this.jt=this.de.feature.htmlCanvas.element;for(const[e,t]of Object.entries(this.ce))this.jt.addEventListener(e,t,{passive:!1})}fe(){if(this.ce&&this.jt)for(const[e,t]of Object.entries(this.ce))this.jt.removeEventListener(e,t);delete this.jt}ue(e,t,s="pointerId"){const r=[e[s]];e.clientX!==void 0&&r.push(...this.pe(e)),t(...r)}pe(e){const t={x:e.clientX,y:e.clientY};if(!this.me)throw new S;const s=this.me.clientToCanvas(t);return[s.x,s.y]}}const Ht={column:{channels:{x:{set:[{name:"x"}]},y:{set:[{name:"y"}]},label:{set:[{name:"y"}]}}},groupedColumn:{channels:{x:{set:[{name:"groupedBy"},{name:"x"}]},y:{set:[{name:"y"}]},label:{set:[{name:"y"}]},color:{set:[{name:"x"}]}}},stackedColumn:{channels:{x:{set:[{name:"x"}]},y:{set:[{name:"y"},{name:"stackedBy"}]},label:{set:[{name:"y"}]},color:{set:[{name:"stackedBy"}]}}},splittedColumn:{channels:{x:{set:[{name:"x"}]},y:{set:[{name:"y"},{name:"splittedBy"}]},color:{set:[{name:"splittedBy"}]},label:{set:[{name:"y"}]}},split:!0},percentageColumn:{channels:{x:{set:[{name:"x"}]},y:{set:[{name:"y"},{name:"stackedBy"}]},color:{set:[{name:"stackedBy"}]},label:{set:[{name:"y"}]}},align:"stretch"},waterfall:{channels:{x:{set:[{name:"x"}]},y:{set:[{name:"y"},{name:"x"}]},label:{set:[{name:"y"}]},color:{set:[{name:"y"}]}},align:"stretch"},mekko:{channels:{x:{set:[{name:"x"},{name:"groupedBy"}]},y:{set:[{name:"y"},{name:"stackedBy"}]},color:{set:[{name:"stackedBy"}]},label:{set:[{name:"groupedBy"}]}}},marimekko:{channels:{x:{set:[{name:"x"},{name:"groupedBy"}]},y:{set:[{name:"y"},{name:"stackedBy"}]},color:{set:[{name:"stackedBy"}]},label:{set:[{name:"groupedBy"}]}},align:"stretch"},bar:{channels:{x:{set:[{name:"x"}]},y:{set:[{name:"y"}]},label:{set:[{name:"x"}]}}},groupedBar:{channels:{x:{set:[{name:"x"}]},y:{set:[{name:"groupedBy"},{name:"y"}]},label:{set:[{name:"x"}]},color:{set:[{name:"y"}]}}},stackedBar:{channels:{x:{set:[{name:"x"},{name:"stackedBy"}]},y:{set:[{name:"y"}]},label:{set:[{name:"x"}]},color:{set:[{name:"stackedBy"}]}}},splittedBar:{channels:{x:{set:[{name:"x"},{name:"splittedBy"}]},y:{set:[{name:"y"}]},color:{set:[{name:"splittedBy"}]},label:{set:[{name:"x"}]}},split:!0},percentageBar:{channels:{x:{set:[{name:"x"},{name:"stackedBy"}]},y:{set:[{name:"y"}]},color:{set:[{name:"stackedBy"}]},label:{set:[{name:"x"}]}},align:"stretch"},lollipop:{channels:{x:{set:[{name:"x"}]},y:{set:[{name:"y"}]},label:{set:[{name:"y"}]}},geometry:"circle"},scatter:{channels:{x:{set:[{name:"x"}]},y:{set:[{name:"y"}]},noop:{set:[{name:"dividedBy"}]}},geometry:"circle"},bubbleplot:{channels:{x:{set:[{name:"x"}]},y:{set:[{name:"y"}]},color:{set:[{name:"color"}]},size:{set:[{name:"size"}]},label:{set:[{name:"dividedBy"}]},noop:{set:[{name:"dividedBy"}]}},geometry:"circle"},area:{channels:{x:{set:[{name:"x"}]},y:{set:[{name:"y"}]}},geometry:"area"},stackedArea:{channels:{x:{set:[{name:"x"}]},y:{set:[{name:"y"},{name:"stackedBy"}]},color:{set:[{name:"stackedBy"}]}},geometry:"area"},percentageArea:{channels:{x:{set:[{name:"x"}]},y:{set:[{name:"y"},{name:"stackedBy"}]},color:{set:[{name:"stackedBy"}]}},align:"stretch",geometry:"area"},splittedArea:{channels:{x:{set:[{name:"x"}]},y:{set:[{name:"y"},{name:"splittedBy"}]},color:{set:[{name:"splittedBy"}]}},split:!0,geometry:"area"},stream:{channels:{x:{set:[{name:"x"}]},y:{set:[{name:"y"},{name:"stackedBy"}]},color:{set:[{name:"stackedBy"}]}},geometry:"area",align:"center"},verticalStream:{channels:{x:{set:[{name:"x"},{name:"stackedBy"}]},y:{set:[{name:"y"}]},color:{set:[{name:"stackedBy"}]}},geometry:"area",align:"center"},violin:{channels:{x:{set:[{name:"x"}]},y:{set:[{name:"y"},{name:"splittedBy"}]},color:{set:[{name:"splittedBy"}]}},geometry:"area",align:"center",split:!0},verticalViolin:{channels:{x:{set:[{name:"x"},{name:"splittedBy"}]},y:{set:[{name:"y"}]},color:{set:[{name:"splittedBy"}]}},geometry:"area",align:"center",split:!0},line:{channels:{x:{set:[{name:"x"}]},y:{set:[{name:"y"}]},color:{set:[{name:"dividedBy"}]}},geometry:"line"},verticalLine:{channels:{x:{set:[{name:"x"}]},y:{set:[{name:"y"}]},color:{set:[{name:"dividedBy"}]}},geometry:"line"},pie:{channels:{x:{set:[{name:"angle"},{name:"by"}]},color:{set:[{name:"by"}]},label:{set:[{name:"angle"}]}},coordSystem:"polar"},polarColumn:{channels:{x:{set:[{name:"angle"}]},y:{set:[{name:"radius"}]},label:{set:[{name:"radius"}]}},coordSystem:"polar"},polarStackedColumn:{channels:{x:{set:[{name:"angle"}]},y:{set:[{name:"radius"},{name:"stackedBy"}]},color:{set:[{name:"stackedBy"}]}},coordSystem:"polar"},variableRadiusPie:{channels:{x:{set:[{name:"angle"},{name:"by"}]},y:{set:[{name:"radius"}]},color:{set:[{name:"by"}]},label:{set:[{name:"radius"}]}},coordSystem:"polar"},radialBar:{channels:{x:{set:[{name:"angle"}]},y:{set:[{name:"radius"}],range:{min:"-50%"}},label:{set:[{name:"angle"}]}},coordSystem:"polar"},radialStackedBar:{channels:{x:{set:[{name:"angle"},{name:"stackedBy"}]},y:{set:[{name:"radius"}],range:{min:"-50%"}},color:{set:[{name:"stackedBy"}]},label:{set:[{name:"angle"}]}},coordSystem:"polar"},donut:{channels:{x:{set:[{name:"angle"},{name:"stackedBy"}]},y:{range:{min:"-200%",max:"100%"}},color:{set:[{name:"stackedBy"}]}},coordSystem:"polar"},nestedDonut:{channels:{x:{set:[{name:"angle"},{name:"stackedBy"}]},y:{set:[{name:"radius"}],range:{min:"-50%"}},color:{set:[{name:"stackedBy"}]},label:{set:[{name:"angle"}]}},coordSystem:"polar",align:"stretch"},polarScatter:{channels:{x:{set:[{name:"angle"}]},y:{set:[{name:"radius"}]},noop:{set:[{name:"dividedBy"}]}},coordSystem:"polar",geometry:"circle"},polarLine:{channels:{x:{set:[{name:"angle"}]},y:{set:[{name:"radius"}]},color:{set:[{name:"dividedBy"}]}},coordSystem:"polar",geometry:"line"},treemap:{channels:{size:{set:[{name:"size"},{name:"color"}]},color:{set:[{name:"color"}]},label:{set:[{name:"color"}]}}},stackedTreemap:{channels:{size:{set:[{name:"size"},{name:"dividedBy"}]},color:{set:[{name:"color"}]},label:{set:[{name:"dividedBy"}]},lightness:{set:[{name:"size"}]}}},heatmap:{channels:{x:{set:[{name:"x"}]},y:{set:[{name:"y"}]},lightness:{set:[{name:"lightness"}]}}},bubble:{channels:{size:{set:[{name:"size"}]},color:{set:[{name:"color"}]},label:{set:[{name:"color"}]}},geometry:"circle"},stackedBubble:{channels:{size:{set:[{name:"size"},{name:"stackedBy"}]},color:{set:[{name:"color"}]}},geometry:"circle"}};class $t{constructor(){this.ge=Ht;for(const e in this.ge){const t=e;this[t]=s=>this.we(t,s)}}ve(){return{align:"none",coordSystem:"cartesian",orientation:"auto",angle:0,split:!1,geometry:"rectangle",channels:{x:{set:null},y:{set:null},color:{set:null},lightness:{set:null},size:{set:null},noop:{set:null},label:{set:null}}}}be(e){const t=Z(this.ge[e]),s={...this.ve().channels,...t.channels},r=Object.assign(this.ve(),t);return r.channels=s,r}_e(e){return e==null?null:Array.isArray(e)?e:[e]}xe(e,t){if(!t)return;const s=e.channels;for(const r in s){const l=s[r];if(this.Ae(l)){if(typeof l.set=="string"){const d=l.set;l.set=this._e(t[d])}else if(Array.isArray(l.set)){const d=[];for(let f=0;f<l.set.length;f++){const b=l.set[f].name,x=this._e(t[b]);x!==null&&d.push(x)}l.set=d.length>0?d.flat():null}}}}Ae(e){return typeof e=="object"&&e!==null&&"set"in e}ke(e,t,s){const r=t[s];r!==void 0&&(e[s]=r)}Ce(e,t){["legend","title","subtitle","caption","reverse","sort"].forEach(s=>{const r=s;this.ke(e,t,r)})}we(e,t){const s=this.be(e);return this.xe(s,t),this.Ce(s,t),s}}var j,V;(function(o){o.start="start",o.update="update",o.render="render",o.prepareAnimation="prepareAnimation",o.registerAnimation="registerAnimation",o.runAnimation="runAnimation"})(j||(j={})),function(o){o.forced="forced",o.allowed="allowed",o.disabled="disabled"}(V||(V={}));class qt{constructor(e,t){if(this.Se=e,this.Ee=[],t){if(!Array.isArray(t))throw new Error("Plugins must be an array");t.forEach(s=>this.register(s,!0))}}init(e){this.Be=e,this.Ee.forEach(t=>{t.enabled&&this.je(t)})}enable(e,t){const s=this.Pe(e);this.Te(s,t)}getRegisteredName(e){return this.Ee.find(s=>s.instance===e)?.name}register(e,t=!0){this.ze(e);const s=this.Oe(e);e.register&&this.Se&&e.register(this.Se);const r={name:s,instance:e,enabled:!t};return this.Ee.push(r),this.Te(r,t),s}destruct(){const e=this.Ee.map(t=>t.name);try{e.forEach(t=>this.unregister(t))}finally{this.Ee=[],this.Se=null}}unregister(e){const t=this.Ee.findIndex(s=>s.name===e);if(t!==-1){const s=this.Ee[t];this.Ee.splice(t,1),s?.instance.unregister&&this.Se&&s.instance.unregister(this.Se)}}api(e){return this.Pe(e).instance.api||{}}hook(e,t){return{default:(s=()=>{})=>{this.Fe(t,e,s)}}}Te(e,t){e.enabled!==t&&(e.enabled=t,e.instance.enable&&e.instance.enable(t),e.enabled?this.je(e):this.We(e))}je(e){e.instance.listeners&&(e.registeredListeners=e.instance.listeners,this.Be?.addMany(e.registeredListeners))}We(e){e.registeredListeners&&this.Be?.removeMany(e.registeredListeners),delete e.registeredListeners}ze(e){this.De(e),this.Ue(e)}De(e){const t=this.Oe(e);if(!(typeof t=="string"&&t.length>0))throw new Error("Plugin must have a non empty name string")}Oe(e){return e.meta?.name??(e.constructor?.name?this.Ie(e.constructor.name):void 0)}Ie(e){return typeof e=="string"&&e[0]?e[0].toLowerCase()+e.slice(1):""}Ue(e){if(e.meta?.depends){if(Array.isArray(e.meta.depends)){for(const t of e.meta.depends)this.Pe(t);return}throw new Error("Plugin depends must be an array")}}Pe(e){const t=this.Ee.find(s=>s.name===e);if(t)return t;throw new Error(`Plugin ${e} is not registered`)}Fe(e,t,s){const r=[...this.Me(t),s];this.Ne(r,e)}Me(e){return this.Ee.filter(t=>t.enabled&&t.instance.hooks?.[e]).map(t=>t.instance.hooks[e]).sort((t,s)=>(s.priority||0)-(t.priority||0))}Ne(e,t){const s=r=>{if(r>=e.length)return;const l=e[r],d=()=>s(r+1);l?l(t,d):d()};s(0)}}class Nt{constructor(){this.Ht=()=>{},this.Re=null,this.le=!0,this.meta={name:"rendering"}}get api(){return{update:(e=null)=>{this.Re=e,this.Ht(!0)}}}get hooks(){return{start:(e,t)=>{this.Ht=e.update,t()},update:(e,t)=>{this.Re!==null&&(e.timeInMSecs=this.Re,this.Re=null),t()},render:(e,t)=>{e.control===V.disabled&&this.le&&(e.control=V.allowed),t()}}}enable(e){this.le=e}}class Jt{constructor(){this.Ht=()=>{},this.le=!1,this.meta={name:"scheduler"}}get hooks(){return{start:(e,t)=>{this.Ht=e.update,this.Le(),t()}}}enable(e){this.le=e,this.le?this.Le():this.$e()}unregister(){this.$e()}Le(){this.Ve||(this.Ht(!1),this.Ve=setInterval(()=>{this.le&&this.Ht(!1)},25))}$e(){this.Ve&&clearInterval(this.Ve),delete this.Ve}}class Gt{constructor(e){return new Proxy(this,{get:(t,s)=>e.getValue(s)})}}class Yt{constructor(e){this.He=e}set(e){if(e){if(e.series){if(!Array.isArray(e.series))throw new Error("data series field is not an array");for(const t of e.series)this.qe(t)}if("records"in e){if(!Array.isArray(e.records))throw new Error("data records field is not an array");const t=this.He.getMetaInfo().series;for(const s of e.records)this.Ge(s,t)}(e.filter||e.filter===null)&&this.Ke(e.filter)}}Ge(e,t){if(!Array.isArray(e)){if(typeof e!="object"||e===null)throw new Error("data record is not an array or object");e=this.Je(e,t)}this.He.addRecord(e)}Je(e,t){const s=[];return t.forEach(r=>{r.name in e?s.push(e[r.name]||this.Ye(r.type)):s.push(this.Ye(r.type))}),s}Ye(e){return e==="measure"?0:""}qe(e){if(!e.name)throw new Error("missing series name");if(this.Qe(e))this.Xe(e),this.Ze(e.name,e.values??[],e.categories);else{const t=e?.values??[],s=e?.type??this.ts(t);if(s==="dimension"){const{indexes:r,categories:l}=this.es(t);this.Ze(e.name,r,l)}else{if(!this.ss(e,s))throw new Error("invalid series type: "+e.type);e.unit||(e.unit=""),this.rs(e.name,e.unit,t)}}}Qe(e){return!(!("categories"in e)||!Array.isArray(e.categories))}ss(e,t){return t==="measure"||"unit"in e&&typeof e.unit=="string"}Xe(e){if(e.values&&Array.isArray(e.values)){const t=e.categories.length;for(const s of e.values){if(s===null)continue;const r=Number(s);if(!Number.isInteger(r))throw new Error("invalid category value (not an int): "+r);if(r<0)throw new Error("invalid category value (negative): "+r);if(r>=t)throw new Error("invalid category value (out of range): "+r)}}if(new Set(e.categories).size!==e.categories.length)throw new Error("duplicate category values")}ts(e){if(Array.isArray(e)&&e.length){if(typeof e[0]=="number"||e[0]===null)return"measure";if(typeof e[0]=="string")return"dimension"}return null}Ze(e,t,s){if(typeof e!="string")throw new Error("first parameter should be string");if(!(t instanceof Array))throw new Error("second parameter should be an array");if(!(s instanceof Array))throw new Error("third parameter should be an array");if(!this.ns(s))throw new Error("third parameter should be an array of strings");if(!this.os(t))throw new Error("the measure index array element should be number");this.He.addDimension(e,t,s)}ns(e){for(const t of e)if(typeof t!="string")return!1;return!0}os(e){for(const t of e){const s=Number(t);if(!Number.isInteger(s)||s<0)return!1}return!0}es(e){const t=new Map,s=[],r=new Array(e.length);for(let l=0;l<e.length;l++){const d=e[l];if(typeof d!="string")continue;let f=t.get(d);f===void 0&&(f=s.length,t.set(d,f),s.push(d)),r[l]=f}return{categories:s,indexes:r}}rs(e,t,s){if(typeof e!="string")throw new Error("'name' parameter should be string");if(typeof t!="string")throw new Error("'unit' parameter should be string");if(!(s instanceof Array))throw new Error("'values' parameter should be an array");const r=s.map(l=>Number(l));this.He.addMeasure(e,t,r)}Ke(e){if(typeof e=="function"){const t=s=>e(new Gt(s));this.He.setFilter(t)}else{if(e!==null)throw new Error("data filter is not a function or null");this.He.setFilter(null)}}}class Zt{constructor(e){this.hs=e}store(){return this.hs.storeAnim()}seek(e){const t=typeof e!="string"?e.toString():e;return this.ls("seek",t),this}set speed(e){const t=typeof e!="string"?e.toString():e;this.ls("speed",t)}get speed(){return Number(this.cs("speed"))}set playState(e){this.ls("playState",e)}get playState(){return this.cs("playState")}set direction(e){this.ls("direction",e)}get direction(){return this.cs("direction")}set position(e){const t=typeof e!="string"?e.toString():e;this.ls("position",t)}get position(){return this.cs("position")}pause(){return this.playState="paused",this}play(){return this.playState="running",this}stop(){return this.ls("stop"),this}cancel(){return this.ls("cancel"),this}reverse(){return this.direction=this.direction==="reverse"?"normal":"reverse",this}ls(e,t=""){this.hs.setParam(e,t)}cs(e){return this.hs.getParam(e)}}class Kt{constructor(){this.meta={name:"shorthands"}}get hooks(){return{prepareAnimation:Object.assign((e,t)=>{this.us(e),t()},{priority:1})}}register(e){this.Ot=e,this.ds=Object.keys(this.Ot.config.channels)}us(e){if(!(e.target instanceof pe)){const s=this.fs(e.target,e.options);e.options===void 0||this.ys(e.target)||delete e.options,e.target=s}const t=this.ps(e.options);t&&(e.options=t)}fs(e,t){return(this.ys(e)?e:[this.gs(e,t)]).map(s=>this.ws(s)?s:{target:s}).map(s=>this.vs(s))}gs(e,t){return Object.assign({target:e},t!==void 0?{options:t}:{})}ys(e){return Array.isArray(e)}ws(e){return"target"in e}vs(e){const t=this.ps(e.options);return Object.assign({target:this.bs(e.target)},t?{options:t}:{})}bs(e){if(e&&!(e instanceof G)){if(this._s(e))return{config:this.xs(e)};e.config!==void 0&&(e.config=this.xs(e.config)),e.style!==void 0&&(e.style=this.As(e.style))}return e}As(e){return e===null?{"":null}:e===void 0?{}:e}ks(e){return"data"in e||"style"in e||"config"in e}_s(e){return!this.ks(e)}xs(e){const{channels:t,...s}=this.Cs(e);return{...s,...t?{channels:this.Ss(t)}:{}}}Cs(e){if(e!==null&&typeof e=="object"){e.channels=e.channels||{};for(const t in e){const s=t;if(this.Es(s)){const r=e[s];r!==void 0&&(e.channels[s]=r),delete e[s]}}}return e}Es(e){return this.ds.includes(e)}Ss(e){const t={};for(const s in e){const r=s,l=e[r];l!==void 0&&(t[r]=this.Bs(l))}return t}Bs(e){if(typeof e=="string"&&(e=[e]),this.js(e)?e={set:this.Ps(e)}:e.set!==void 0&&this.js(e.set)&&(e.set=this.Ps(e.set)),e.attach!==void 0&&this.js(e.attach)){const t=this.Ps(e.attach);t!==null?e.attach=t:delete e.attach}if(e.detach!==void 0&&this.js(e.detach)){const t=this.Ps(e.detach);t!==null?e.detach=t:delete e.detach}return e}js(e){return e===null||typeof e=="string"||Array.isArray(e)||typeof e=="object"&&"name"in e}Ps(e){return e===null?null:Array.isArray(e)?e.length===0?null:e.map(t=>this.Ts(t)):typeof e=="string"?[this.Ts(e)]:typeof e=="object"&&"name"in e?[e]:null}Ts(e){if(typeof e=="string"){const t=/^(\w+)\((.*?)\)$/,s=e.match(t);return s?{name:s[2],aggregator:s[1]}:{name:e}}return e}ps(e){return e!==void 0&&(e===null?e={duration:0}:typeof e!="string"&&typeof e!="number"||(e={duration:e})),e}}class Xt{constructor(){this.zs=0,this.Os=!1,this.Fs=null,this.Ws=null,this.Ds=new Date().getTime(),this.meta={name:"tooltip",depends:["pointerEvents"]},this.listeners={pointermove:this.Us.bind(this),pointerleave:this.Is.bind(this)}}get hooks(){return{prepareAnimation:(e,t)=>{Array.isArray(e.target)&&e.target.forEach(({target:s})=>{s instanceof G||(s.config||(s.config={}),"tooltip"in s.config||(s.config.tooltip=null,this.zs++,this.Fs=null))}),t()}}}register(e){this.de=e}enable(e){e||this.Fs===null||(this.zs++,setTimeout(()=>{this.Ms(this.zs)},200))}Us(e){this.Ds=new Date().getTime();const t=this.Ns(e.target);t!==this.Ws&&(this.Ws=t,this.Rs(e))}Is(e){this.Ds=new Date().getTime(),this.Ws=null,this.Rs(e)}Rs(e){this.zs++;const t=this.zs,s=this.Ns(e.target);s!==null?setTimeout(()=>{this.Ls(t,s)},0):setTimeout(()=>{this.Ms(t)},200)}Ns(e){return e&&this.$s(e)?e.index:e&&this.Vs(e)?e.parent.index:null}$s(e){return e.tagName==="plot-marker"}Vs(e){return e.tagName==="plot-marker-label"}Ls(e,t){this.zs===e&&(this.Os?setTimeout(()=>{this.Ls(e,t)},100):(this.Fs=t,this.Os=!0,this.de?.animate([{target:{config:{tooltip:t}},options:{duration:this.Fs?"100ms":"250ms"}}]).then(()=>{this.Os=!1})))}Ms(e){if(this.zs===e){const t=new Date().getTime()-this.Ds;!this.Os&&t>200?(this.Fs=null,this.Os=!0,this.de?.animate([{target:{config:{tooltip:null}},options:{duration:"250ms"}}]).then(()=>{this.Os=!1})):setTimeout(()=>{this.Ms(e)},200-t)}}}class Qt{constructor(e,t,s){this.Hs=!0,this.xt=t,this.Ee=s,this.qs=e,this.Wt=this.qs.createChart(),this.qs.registerChart(this.Wt,this),this.vt=this.qs.createCanvas(),this.He=this.qs.getData(this.Wt),this.Gs=new Yt(this.He),this.Be=new Rt(this.Wt),this.Ee.init(this.Be)}registerBuiltins(){this.Ee.register(new Lt(this.qs.setLogging.bind(this.qs)),!1),this.Ee.register(new je(je.extractOptions(this.xt)),!0),this.Ee.register(new Ft,!0),this.Ee.register(new It,!0),this.Ee.register(new Jt,!0),this.Ee.register(new Nt,!0),this.Ee.register(new Wt(this.qs.getCoordSystem(this.Wt)),!0),this.Ee.register(new Vt,!1),this.Ee.register(new Kt,!0),this.Ee.register(new ve,!0),this.Ee.register(new Mt(this.Wt),!0),this.Ee.register(new Xt,!1)}detach(){this.qs.unregisterChart(this.Wt),this.vt.free(),this.Wt.free()}start(){const e={update:t=>this.updateAndRender(t)};this.Ee.hook(j.start,e).default(()=>{this.updateAndRender()})}updateAndRender(e=!1){this.Ht(),this.Ks(e)}Ht(){this.Ee.hook(j.update,{timeInMSecs:null}).default(e=>{e.timeInMSecs&&this.Wt.update(e.timeInMSecs)})}Ks(e){const t={renderer:null,control:e?V.forced:V.disabled,changed:this.Hs,size:{x:0,y:0}};this.Ee.hook(j.render,t).default(s=>{s.size.x<1||s.size.y<1||!s.renderer||(s.control===V.forced||s.control===V.allowed&&s.changed)&&(s.renderer.canvas=this.vt,this.qs.registerRenderer(this.vt,s.renderer),this.Wt.render(this.vt,s.size.x,s.size.y),this.qs.unregisterRenderer(this.vt),this.Hs=!1)})}doChange(){this.Hs=!0}openUrl(e){window.open(this.Wt.getString(e),"_blank")}async prepareAnimation(e,t){const s=Object.assign({target:e},t!==void 0?{options:t}:{});await this.Ee.hook(j.prepareAnimation,s).default(r=>{this.setAnimParams(r.target,r.options)})}runAnimation(e){const t={callback:e};this.Ee.hook(j.runAnimation,t).default(s=>{this.Wt.animate(s.callback)})}setAnimParams(e,t){if(e instanceof pe)this.Wt.restoreAnim(e);else for(const s of e)this.Js(s.target,s.options);t&&this.Wt.animOptions.set(t)}Js(e,t){e&&(e instanceof G?this.Wt.restoreSnapshot(e):(e.data&&this.Gs.set(e.data),e.style&&this.Wt.style.set(e.style),e.config&&(this.Ys(e.config),this.Wt.config.set(e.config)))),t&&this.Wt.animOptions.set(t),this.Wt.setKeyframe()}Ys(e){e.channels&&Object.values(e.channels).forEach(t=>{Array.isArray(t?.set)&&t?.set.length===0&&(t.set=null)})}version(){return this.qs.version()}get data(){return this.He.getMetaInfo()}get config(){return this.Wt.config.get()}get style(){return this.Wt.style.get()}getComputedStyle(){return this.Wt.computedStyle.get()}on(e,t){this.Be.add(e,t)}off(e,t){this.Be.remove(e,t)}store(){return this.Wt.storeSnapshot()}getAnimControl(){return new Zt(this.Qs())}Qs(){return this.qs.getAnimControl(this.Wt)}}class J{static get presets(){return new $t}static options(e){fe.options=e}static initialize(){return fe.initialize().then(()=>{})}constructor(e,t){this.Ee=new qt(this,this.Xs(e)),this.initializing=fe.initialize().then(s=>(this.Ot=new Qt(s,e,this.Ee),this.Ot.registerBuiltins(),this.Ot.start(),this)),this.Zs=this.initializing,t&&(this.initializing=this.animate([{target:t,options:{duration:0}}]).then(()=>this))}Xs(e){return typeof e=="object"&&e!==null&&"features"in e?e.features:[]}get feature(){const e=this.tr.bind(this);return new Proxy(e,{get:(t,s)=>this.Ee.api(s)})}tr(e,t){if(t!==void 0&&typeof t!="boolean")throw new Error("enabled parameter must be boolean if specified");let s,r=!1;if(typeof e!="string"){const l=e;s=this.Ee.getRegisteredName(l),s||(s=this.Ee.register(l,t??!0),r=!0)}else s=e;return t!==void 0&&!r&&this.Ee.enable(s,t),this.Ee.api(s)}animate(e,t){const s=Z(e,F),r=Z(t),l=Object.assign({target:s,promise:this.Zs},r!==void 0?{options:r}:{});return this.Ee.hook(j.registerAnimation,l).default(d=>{let f=()=>{};const b=new Promise(A=>{f=A}),x=d.promise.then(()=>this.er(s,r,f));d.promise=Object.assign(x,{activated:b})}),this.Zs=l.promise,this.Zs}er(e,t,s){if(!this.Ot)throw new S;return this.Ot.prepareAnimation(e,t).then(()=>this.sr(s))}sr(e){return new Promise((t,s)=>{if(!this.Ot)throw new S;this.Ot.runAnimation(r=>{r?t(this):(s(new Ut),this.Zs=Promise.resolve(this))}),e(this.Ot.getAnimControl())})}get animation(){if(!this.Ot)throw new S;return this.Ot.getAnimControl()}version(){if(!this.Ot)throw new S;return this.Ot.version()}get data(){if(!this.Ot)throw new S;return this.Ot.data}get config(){if(!this.Ot)throw new S;return this.Ot.config}get style(){if(!this.Ot)throw new S;return this.Ot.style}getComputedStyle(){if(!this.Ot)throw new S;return this.Ot.getComputedStyle()}on(e,t){if(!this.Ot)throw new S;this.Ot.on(e,t)}off(e,t){if(!this.Ot)throw new S;this.Ot.off(e,t)}store(){if(!this.Ot)throw new S;return this.Ot.store()}detach(){try{this.Ee.destruct(),this.Ot?.detach()}catch(e){console.error(`Error during plugin destruct: ${e}`)}}}const es="/static/cvizzu.rfESuy-t.wasm";var ts=Object.getOwnPropertyDescriptor,Ne=(o,e,t,s)=>{for(var r=s>1?void 0:s?ts(e,t):e,l=o.length-1,d;l>=0;l--)(d=o[l])&&(r=d(r)||r);return r};let se=class extends gt{constructor(){super(),J.options({wasmUrl:es})}firstUpdated(){this.renderChart()}async renderChart(){typeof window<"u"&&await J.initialize()}async handleButtonClick(){const{data:o}=await Le(async()=>{const{data:t}=await import("https://lib.vizzuhq.com/0.15/assets/data/chart_types_eu.js");return{data:t}},[]),e=this.renderRoot.querySelector("#chart");e&&(this.chart||(this.chart=new J(e)),this.chart.animate({data:o}),this.chart.animate({config:J.presets.percentageArea({x:"Year",y:"Value 2 (+)",stackedBy:"Country",title:"Percentage Area Chart"})}))}render(){return Me`
      <div id="chart"></div>
      <button @click="${this.handleButtonClick}">显示区域图</button>
    `}};se.styles=ft`
    #chart {
      width: 80%;
      height: 400px;
      margin: 20px auto;
    }
    button {
      display: block;
      margin: 20px auto;
      padding: 10px 20px;
      font-size: 16px;
    }
  `;se=Ne([Ue("my-chart-component")],se);let Re=class extends se{render(){return Me`
      <div id="chart"></div>
      <button @click="${this.handleButtonClick}">加载动画</button>
    `}async renderChart(){if(typeof window<"u"){await J.initialize();const{data_8:o}=await Le(async()=>{const{data_8:e}=await import("https://lib.vizzuhq.com/0.15/assets/data/chart_types_eu.js");return{data_8:e}},[]);this.data_8=o}}async handleButtonClick(){const o=this.renderRoot.querySelector("#chart");o&&(this.chart||(this.chart=new J(o)),this.chart.animate({data:this.data_8}),this.chart.animate({config:{channels:{x:"Country",y:"Value 2 (+)",label:"Value 2 (+)"}}}),this.chart.animate({config:{channels:{y:["Value 2 (+)","Joy factors"],color:"Joy factors"}},style:{plot:{marker:{colorPalette:"#ef675aFF #6d8cccFF #e6cf99FF #9c50abFF"}}}}))}};Re=Ne([Ue("animate-element")],Re);export{Re as AnimateElement,se as MyChartComponent};
//# sourceMappingURL=demo.CC7jHW61.js.map

{"version":3,"file":"cannon._z-0aP_w.js","sources":["../../node_modules/.pnpm/@radix-ui+react-label@2.1.6_@types+react-dom@18.3.7_@types+react@18.3.21__@types+react@18.3.2_pvwxfrwhjh3viok45qpsecfxfy/node_modules/@radix-ui/react-label/dist/index.mjs","../../src/components/react/shadcn/ui/label.tsx","../../src/components/react/p5/Oscillation/cannon.tsx"],"sourcesContent":["\"use client\";\n\n// src/label.tsx\nimport * as React from \"react\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { jsx } from \"react/jsx-runtime\";\nvar NAME = \"Label\";\nvar Label = React.forwardRef((props, forwardedRef) => {\n  return /* @__PURE__ */ jsx(\n    Primitive.label,\n    {\n      ...props,\n      ref: forwardedRef,\n      onMouseDown: (event) => {\n        const target = event.target;\n        if (target.closest(\"button, input, select, textarea\")) return;\n        props.onMouseDown?.(event);\n        if (!event.defaultPrevented && event.detail > 1) event.preventDefault();\n      }\n    }\n  );\n});\nLabel.displayName = NAME;\nvar Root = Label;\nexport {\n  Label,\n  Root\n};\n//# sourceMappingURL=index.mjs.map\n","import * as React from \"react\";\nimport * as LabelPrimitive from \"@radix-ui/react-label\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@utils/utils\";\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n);\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n));\nLabel.displayName = LabelPrimitive.Root.displayName;\n\nexport { Label };\n","import type p5 from \"p5\";\nimport Basic from \"@components/react/p5/index.tsx\";\nimport { Switch } from \"@components/react/shadcn/ui/switch\";\nimport { Label } from \"@components/react/shadcn/ui/label\";\nimport { useCallback, useState } from \"react\";\nlet img;\n\nexport class Cannon {\n  p: p5;\n  x: number;\n  y: number;\n  angle: number;\n  constructor(p: p5, x: number, y: number) {\n    this.p = p;\n    this.x = x;\n    this.y = y;\n    this.angle = p.PI / 4;\n  }\n\n  show() {\n    const p = this.p;\n    p.push();\n    p.fill(0);\n    p.translate(this.x, this.y);\n    p.rect(-50, 0, 60, 20);\n    p.rotate(this.angle);\n    //旋转45度\n    p.rect(-35, -10, 30, 50);\n    p.pop();\n  }\n}\n\nexport class Cannonball {\n  p: p5;\n  position: p5.Vector;\n  velocity: p5.Vector;\n  rotation: number;\n  angularVelocity: number;\n  gravity: p5.Vector;\n  circleRadius: number;\n  index: number;\n  img: p5.Image;\n  constructor(p: p5, x: number, y: number, index: number, img: p5.Image) {\n    this.p = p;\n    let p5 = this.p;\n    this.position = p5.createVector(x, y);\n    this.velocity = p5.createVector(\n      10 * p5.cos(-p5.PI / 4),\n      10 * p5.sin(-p5.PI / 4)\n    ); // 初始速度\n    this.rotation = 0; // 旋转角度\n    this.angularVelocity = 0.1; // 旋转速度\n    this.gravity = p5.createVector(0, 0.2); // 重力\n    this.circleRadius = p5.random(10, 20);\n    this.index = index;\n    this.img = img;\n  }\n\n  update() {\n    this.velocity.add(this.gravity); // 应用重力\n    this.position.add(this.velocity); // 更新位置\n    this.rotation += this.angularVelocity; // 更新旋转\n  }\n\n  show() {\n    const p = this.p;\n    p.push();\n    p.translate(this.position.x - 20, this.position.y - 20);\n    p.rotate(this.rotation);\n    p.fill(255, 0, 0);\n    p.circle(0, 0, this.circleRadius * 2);\n    if (this.img) {\n      p.image(\n        this.img,\n        -this.circleRadius,\n        -this.circleRadius,\n        this.circleRadius * 2,\n        this.circleRadius * 2\n      );\n    }\n    p.pop();\n  }\n\n  isOffScreen() {\n    return this.position.y > this.p.height; // 检查是否超出画布\n  }\n\n  checkEdges() {\n    const p = this.p;\n    if (\n      this.position.x + this.circleRadius > p.width ||\n      this.position.x < this.circleRadius\n    ) {\n      this.velocity.x *= -1;\n    }\n    if (\n      this.position.y + this.circleRadius > p.height ||\n      this.position.y < this.circleRadius\n    ) {\n      this.velocity.y *= -1;\n    }\n  }\n}\n\nexport default () => {\n  const [openCheckEdges, setOpenCheckEdges] = useState(false);\n\n  const sketch = useCallback(\n    (p: p5) => {\n      let cannon: Cannon;\n      let cannonballList: Cannonball[] = [];\n      const setup = () => {\n        let canvas = p.createCanvas(p.windowWidth / 2, 240);\n        canvas.drop(gotFile);\n        p.background(255);\n        cannon = new Cannon(p, 50, p.height - 20);\n      };\n      const gotFile = file => {\n        if (file.type === \"image\") {\n          img = p.createImg(file.data, \"\").hide();\n          p.image(img, 0, 0, p.width, p.height);\n        }\n      };\n      const draw = () => {\n        p.background(220);\n        cannon.show();\n\n        for (let i = 0; i < cannonballList.length; i++) {\n          cannonballList[i].update();\n          //边缘碰撞反弹\n          if (openCheckEdges) cannonballList[i].checkEdges();\n          cannonballList[i].show();\n          if (cannonballList[i].isOffScreen()) {\n            cannonballList.splice(i, 1);\n          }\n        }\n      };\n      const resize = () => {\n        p.resizeCanvas(p.windowWidth / 2, 240);\n      };\n\n      p.mousePressed = () => {\n        if (\n          p.mouseX > 0 &&\n          p.mouseX < p.width &&\n          p.mouseY > 0 &&\n          p.mouseY < p.height\n        ) {\n          let cannonball = new Cannonball(\n            p,\n            cannon.x,\n            cannon.y,\n            cannonballList.length,\n            img\n          );\n          cannonballList.push(cannonball);\n        }\n      };\n      p.setup = setup;\n      p.draw = draw;\n      p.windowResized = resize;\n    },\n    [openCheckEdges]\n  );\n  return (\n    <>\n      <Basic sketch={sketch}></Basic>\n      <Label\n        htmlFor=\"openCheckEdges\"\n        className=\"text-center m-4 p-10 select-none\"\n      >\n        {\" \"}\n        打开边缘碰撞\n      </Label>\n      <Switch\n        id=\"openCheckEdges\"\n        className=\"m-4\"\n        checked={openCheckEdges}\n        onCheckedChange={e => setOpenCheckEdges(e)}\n      ></Switch>\n      <p className=\"text-center brightness-75 select-none\">\n        {\" \"}\n        拖动图片至canvas,会生成大炮的背景\n      </p>\n    </>\n  );\n};\n"],"names":["NAME","Label","React.forwardRef","props","forwardedRef","jsx","Primitive","event","Root","labelVariants","cva","className","ref","LabelPrimitive.Root","cn","img","Cannon","p","x","y","Cannonball","index","p5","cannon","openCheckEdges","setOpenCheckEdges","useState","sketch","useCallback","cannonballList","setup","gotFile","file","draw","i","resize","cannonball","jsxs","Fragment","Basic","Switch"],"mappings":"u9BAMA,IAAIA,EAAO,QACPC,EAAQC,EAAgB,WAAC,CAACC,EAAOC,IACZC,EAAG,IACxBC,EAAU,MACV,CACE,GAAGH,EACH,IAAKC,EACL,YAAcG,GAAU,CACPA,EAAM,OACV,QAAQ,iCAAiC,IACpDJ,EAAM,cAAcI,CAAK,EACrB,CAACA,EAAM,kBAAoBA,EAAM,OAAS,GAAGA,EAAM,eAAgB,EAC/E,CACA,CACG,CACF,EACDN,EAAM,YAAcD,EACpB,IAAIQ,EAAOP,ECjBX,MAAMQ,EAAgBC,EACpB,4FACF,EAEMT,EAAQC,EAIZ,WAAA,CAAC,CAAE,UAAAS,EAAW,GAAGR,CAAM,EAAGS,IAC1BP,EAAA,IAACQ,EAAA,CACC,IAAAD,EACA,UAAWE,EAAGL,EAAc,EAAGE,CAAS,EACvC,GAAGR,CAAA,CACN,CACD,EACDF,EAAM,YAAcY,EAAoB,YChBxC,IAAIE,EAEG,MAAMC,CAAO,CAKlB,YAAYC,EAAOC,EAAWC,EAAW,CACvC,KAAK,EAAIF,EACT,KAAK,EAAIC,EACT,KAAK,EAAIC,EACJ,KAAA,MAAQF,EAAE,GAAK,CAAA,CAGtB,MAAO,CACL,MAAMA,EAAI,KAAK,EACfA,EAAE,KAAK,EACPA,EAAE,KAAK,CAAC,EACRA,EAAE,UAAU,KAAK,EAAG,KAAK,CAAC,EAC1BA,EAAE,KAAK,IAAK,EAAG,GAAI,EAAE,EACnBA,EAAA,OAAO,KAAK,KAAK,EAEnBA,EAAE,KAAK,IAAK,IAAK,GAAI,EAAE,EACvBA,EAAE,IAAI,CAAA,CAEV,CAEO,MAAMG,CAAW,CAUtB,YAAYH,EAAOC,EAAWC,EAAWE,EAAeN,EAAe,CACrE,KAAK,EAAIE,EACT,IAAIK,EAAK,KAAK,EACd,KAAK,SAAWA,EAAG,aAAaJ,EAAGC,CAAC,EACpC,KAAK,SAAWG,EAAG,aACjB,GAAKA,EAAG,IAAI,CAACA,EAAG,GAAK,CAAC,EACtB,GAAKA,EAAG,IAAI,CAACA,EAAG,GAAK,CAAC,CACxB,EACA,KAAK,SAAW,EAChB,KAAK,gBAAkB,GACvB,KAAK,QAAUA,EAAG,aAAa,EAAG,EAAG,EACrC,KAAK,aAAeA,EAAG,OAAO,GAAI,EAAE,EACpC,KAAK,MAAQD,EACb,KAAK,IAAMN,CAAA,CAGb,QAAS,CACF,KAAA,SAAS,IAAI,KAAK,OAAO,EACzB,KAAA,SAAS,IAAI,KAAK,QAAQ,EAC/B,KAAK,UAAY,KAAK,eAAA,CAGxB,MAAO,CACL,MAAME,EAAI,KAAK,EACfA,EAAE,KAAK,EACLA,EAAA,UAAU,KAAK,SAAS,EAAI,GAAI,KAAK,SAAS,EAAI,EAAE,EACpDA,EAAA,OAAO,KAAK,QAAQ,EACpBA,EAAA,KAAK,IAAK,EAAG,CAAC,EAChBA,EAAE,OAAO,EAAG,EAAG,KAAK,aAAe,CAAC,EAChC,KAAK,KACLA,EAAA,MACA,KAAK,IACL,CAAC,KAAK,aACN,CAAC,KAAK,aACN,KAAK,aAAe,EACpB,KAAK,aAAe,CACtB,EAEFA,EAAE,IAAI,CAAA,CAGR,aAAc,CACZ,OAAO,KAAK,SAAS,EAAI,KAAK,EAAE,MAAA,CAGlC,YAAa,CACX,MAAMA,EAAI,KAAK,GAEb,KAAK,SAAS,EAAI,KAAK,aAAeA,EAAE,OACxC,KAAK,SAAS,EAAI,KAAK,gBAEvB,KAAK,SAAS,GAAK,KAGnB,KAAK,SAAS,EAAI,KAAK,aAAeA,EAAE,QACxC,KAAK,SAAS,EAAI,KAAK,gBAEvB,KAAK,SAAS,GAAK,GACrB,CAEJ,CAEA,MAAAM,EAAe,IAAM,CACnB,KAAM,CAACC,EAAgBC,CAAiB,EAAIC,EAAAA,SAAS,EAAK,EAEpDC,EAASC,EAAA,YACZX,GAAU,CACL,IAAAM,EACAM,EAA+B,CAAC,EACpC,MAAMC,EAAQ,IAAM,CACLb,EAAE,aAAaA,EAAE,YAAc,EAAG,GAAG,EAC3C,KAAKc,CAAO,EACnBd,EAAE,WAAW,GAAG,EAChBM,EAAS,IAAIP,EAAOC,EAAG,GAAIA,EAAE,OAAS,EAAE,CAC1C,EACMc,EAAkBC,GAAA,CAClBA,EAAK,OAAS,UAChBjB,EAAME,EAAE,UAAUe,EAAK,KAAM,EAAE,EAAE,KAAK,EACtCf,EAAE,MAAMF,EAAK,EAAG,EAAGE,EAAE,MAAOA,EAAE,MAAM,EAExC,EACMgB,EAAO,IAAM,CACjBhB,EAAE,WAAW,GAAG,EAChBM,EAAO,KAAK,EAEZ,QAASW,EAAI,EAAGA,EAAIL,EAAe,OAAQK,IAC1BL,EAAAK,CAAC,EAAE,OAAO,EAErBV,GAAgBK,EAAeK,CAAC,EAAE,WAAW,EAClCL,EAAAK,CAAC,EAAE,KAAK,EACnBL,EAAeK,CAAC,EAAE,eACLL,EAAA,OAAOK,EAAG,CAAC,CAGhC,EACMC,EAAS,IAAM,CACnBlB,EAAE,aAAaA,EAAE,YAAc,EAAG,GAAG,CACvC,EAEAA,EAAE,aAAe,IAAM,CACrB,GACEA,EAAE,OAAS,GACXA,EAAE,OAASA,EAAE,OACbA,EAAE,OAAS,GACXA,EAAE,OAASA,EAAE,OACb,CACA,IAAImB,EAAa,IAAIhB,EACnBH,EACAM,EAAO,EACPA,EAAO,EACPM,EAAe,OACfd,CACF,EACAc,EAAe,KAAKO,CAAU,CAAA,CAElC,EACAnB,EAAE,MAAQa,EACVb,EAAE,KAAOgB,EACThB,EAAE,cAAgBkB,CACpB,EACA,CAACX,CAAc,CACjB,EACA,OAEIa,EAAA,KAAAC,WAAA,CAAA,SAAA,CAAAjC,MAACkC,GAAM,OAAAZ,EAAgB,EACvBU,EAAA,KAACpC,EAAA,CACC,QAAQ,iBACR,UAAU,mCAET,SAAA,CAAA,IAAI,QAAA,CAAA,CAEP,EACAI,EAAA,IAACmC,EAAA,CACC,GAAG,iBACH,UAAU,MACV,QAAShB,EACT,gBAAsB,GAAAC,EAAkB,CAAC,CAAA,CAC1C,EACDY,EAAAA,KAAC,IAAE,CAAA,UAAU,wCACV,SAAA,CAAA,IAAI,sBAAA,CAEP,CAAA,CAAA,EACF,CAEJ","x_google_ignoreList":[0]}
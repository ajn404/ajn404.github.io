{"version":3,"file":"sdk.m.D9HQLMrz.js","sources":["../../node_modules/.pnpm/@stackblitz+sdk@1.11.0/node_modules/@stackblitz/sdk/bundles/sdk.m.js"],"sourcesContent":["const CONNECT_INTERVAL = 500;\nconst CONNECT_MAX_ATTEMPTS = 20;\nconst DEFAULT_FRAME_HEIGHT = 300;\nconst DEFAULT_ORIGIN = \"https://stackblitz.com\";\nconst PROJECT_TEMPLATES = [\n  \"angular-cli\",\n  \"create-react-app\",\n  \"html\",\n  \"javascript\",\n  \"node\",\n  \"polymer\",\n  \"typescript\",\n  \"vue\"\n];\nconst UI_SIDEBAR_VIEWS = [\"project\", \"search\", \"ports\", \"settings\"];\nconst UI_THEMES = [\"light\", \"dark\"];\nconst UI_VIEWS = [\"editor\", \"preview\"];\nconst generators = {\n  clickToLoad: (value) => trueParam(\"ctl\", value),\n  devToolsHeight: (value) => percentParam(\"devtoolsheight\", value),\n  forceEmbedLayout: (value) => trueParam(\"embed\", value),\n  hideDevTools: (value) => trueParam(\"hidedevtools\", value),\n  hideExplorer: (value) => trueParam(\"hideExplorer\", value),\n  hideNavigation: (value) => trueParam(\"hideNavigation\", value),\n  openFile: (value) => stringParams(\"file\", value),\n  showSidebar: (value) => booleanParam(\"showSidebar\", value),\n  sidebarView: (value) => enumParam(\"sidebarView\", value, UI_SIDEBAR_VIEWS),\n  startScript: (value) => stringParams(\"startScript\", value),\n  terminalHeight: (value) => percentParam(\"terminalHeight\", value),\n  theme: (value) => enumParam(\"theme\", value, UI_THEMES),\n  view: (value) => enumParam(\"view\", value, UI_VIEWS),\n  zenMode: (value) => trueParam(\"zenMode\", value),\n  organization: (value) => `${stringParams(\"orgName\", value?.name)}&${stringParams(\"orgProvider\", value?.provider)}`,\n  crossOriginIsolated: (value) => trueParam(\"corp\", value)\n};\nfunction buildParams(options = {}) {\n  const params = Object.entries(options).map(([key, value]) => {\n    if (value != null && generators.hasOwnProperty(key)) {\n      return generators[key](value);\n    }\n    return \"\";\n  }).filter(Boolean);\n  return params.length ? `?${params.join(\"&\")}` : \"\";\n}\nfunction trueParam(name, value) {\n  if (value === true) {\n    return `${name}=1`;\n  }\n  return \"\";\n}\nfunction booleanParam(name, value) {\n  if (typeof value === \"boolean\") {\n    return `${name}=${value ? \"1\" : \"0\"}`;\n  }\n  return \"\";\n}\nfunction percentParam(name, value) {\n  if (typeof value === \"number\" && !Number.isNaN(value)) {\n    const clamped = Math.min(100, Math.max(0, value));\n    return `${name}=${encodeURIComponent(Math.round(clamped))}`;\n  }\n  return \"\";\n}\nfunction enumParam(name, value = \"\", allowList = []) {\n  if (allowList.includes(value)) {\n    return `${name}=${encodeURIComponent(value)}`;\n  }\n  return \"\";\n}\nfunction stringParams(name, value) {\n  const values = Array.isArray(value) ? value : [value];\n  return values.filter((val) => typeof val === \"string\" && val.trim() !== \"\").map((val) => `${name}=${encodeURIComponent(val)}`).join(\"&\");\n}\nfunction genID() {\n  return Math.random().toString(36).slice(2, 6) + Math.random().toString(36).slice(2, 6);\n}\nfunction openUrl(route, options) {\n  return `${getOrigin(options)}${route}${buildParams(options)}`;\n}\nfunction embedUrl(route, options) {\n  const config = {\n    forceEmbedLayout: true\n  };\n  if (options && typeof options === \"object\") {\n    Object.assign(config, options);\n  }\n  return `${getOrigin(config)}${route}${buildParams(config)}`;\n}\nfunction getOrigin(options = {}) {\n  const origin = typeof options.origin === \"string\" ? options.origin : DEFAULT_ORIGIN;\n  return origin.replace(/\\/$/, \"\");\n}\nfunction replaceAndEmbed(target, frame, options) {\n  if (!frame || !target || !target.parentNode) {\n    throw new Error(\"Invalid Element\");\n  }\n  if (target.id) {\n    frame.id = target.id;\n  }\n  if (target.className) {\n    frame.className = target.className;\n  }\n  setFrameDimensions(frame, options);\n  setFrameAllowList(target, frame, options);\n  target.replaceWith(frame);\n}\nfunction findElement(elementOrId) {\n  if (typeof elementOrId === \"string\") {\n    const element = document.getElementById(elementOrId);\n    if (!element) {\n      throw new Error(`Could not find element with id '${elementOrId}'`);\n    }\n    return element;\n  } else if (elementOrId instanceof HTMLElement) {\n    return elementOrId;\n  }\n  throw new Error(`Invalid element: ${elementOrId}`);\n}\nfunction openTarget(options) {\n  return options && options.newWindow === false ? \"_self\" : \"_blank\";\n}\nfunction setFrameDimensions(frame, options = {}) {\n  const height = Object.hasOwnProperty.call(options, \"height\") ? `${options.height}` : `${DEFAULT_FRAME_HEIGHT}`;\n  const width = Object.hasOwnProperty.call(options, \"width\") ? `${options.width}` : void 0;\n  frame.setAttribute(\"height\", height);\n  if (width) {\n    frame.setAttribute(\"width\", width);\n  } else {\n    frame.setAttribute(\"style\", \"width:100%;\");\n  }\n}\nfunction setFrameAllowList(target, frame, options = {}) {\n  const allowList = target.allow?.split(\";\")?.map((key) => key.trim()) ?? [];\n  if (options.crossOriginIsolated && !allowList.includes(\"cross-origin-isolated\")) {\n    allowList.push(\"cross-origin-isolated\");\n  }\n  if (allowList.length > 0) {\n    frame.allow = allowList.join(\"; \");\n  }\n}\nclass RDC {\n  constructor(port) {\n    this.pending = {};\n    this.port = port;\n    this.port.onmessage = this.messageListener.bind(this);\n  }\n  request({ type, payload }) {\n    return new Promise((resolve, reject) => {\n      const id = genID();\n      this.pending[id] = { resolve, reject };\n      this.port.postMessage({\n        type,\n        payload: {\n          ...payload,\n          // Ensure the payload object includes the request ID\n          __reqid: id\n        }\n      });\n    });\n  }\n  messageListener(event) {\n    if (typeof event.data.payload?.__reqid !== \"string\") {\n      return;\n    }\n    const { type, payload } = event.data;\n    const { __reqid: id, __success: success, __error: error } = payload;\n    if (this.pending[id]) {\n      if (success) {\n        this.pending[id].resolve(this.cleanResult(payload));\n      } else {\n        this.pending[id].reject(error ? `${type}: ${error}` : type);\n      }\n      delete this.pending[id];\n    }\n  }\n  cleanResult(payload) {\n    const result = { ...payload };\n    delete result.__reqid;\n    delete result.__success;\n    delete result.__error;\n    return Object.keys(result).length ? result : null;\n  }\n}\nclass VM {\n  constructor(port, config) {\n    this.editor = {\n      /**\n       * Open one of several files in tabs and/or split panes.\n       *\n       * @since 1.7.0 Added support for opening multiple files\n       */\n      openFile: (path) => {\n        return this._rdc.request({\n          type: \"SDK_OPEN_FILE\",\n          payload: { path }\n        });\n      },\n      /**\n       * Set a project file as the currently selected file.\n       *\n       * - This may update the highlighted file in the file explorer,\n       *   and the currently open and/or focused editor tab.\n       * - It will _not_ open a new editor tab if the provided path does not\n       *   match a currently open tab. See `vm.editor.openFile` to open files.\n       *\n       * @since 1.7.0\n       * @experimental\n       */\n      setCurrentFile: (path) => {\n        return this._rdc.request({\n          type: \"SDK_SET_CURRENT_FILE\",\n          payload: { path }\n        });\n      },\n      /**\n       * Change the color theme\n       *\n       * @since 1.7.0\n       */\n      setTheme: (theme) => {\n        return this._rdc.request({\n          type: \"SDK_SET_UI_THEME\",\n          payload: { theme }\n        });\n      },\n      /**\n       * Change the display mode of the project:\n       *\n       * - `default`: show the editor and preview pane\n       * - `editor`: show the editor pane only\n       * - `preview`: show the preview pane only\n       *\n       * @since 1.7.0\n       */\n      setView: (view) => {\n        return this._rdc.request({\n          type: \"SDK_SET_UI_VIEW\",\n          payload: { view }\n        });\n      },\n      /**\n       * Change the display mode of the sidebar:\n       *\n       * - `true`: show the sidebar\n       * - `false`: hide the sidebar\n       *\n       * @since 1.7.0\n       */\n      showSidebar: (visible = true) => {\n        return this._rdc.request({\n          type: \"SDK_TOGGLE_SIDEBAR\",\n          payload: { visible }\n        });\n      }\n    };\n    this.preview = {\n      /**\n       * The origin (protocol and domain) of the preview iframe.\n       *\n       * In WebContainers-based projects, the origin will always be `null`;\n       * try using `vm.preview.getUrl` instead.\n       *\n       * @see https://developer.stackblitz.com/guides/user-guide/available-environments\n       */\n      origin: \"\",\n      /**\n       * Get the current preview URL.\n       *\n       * In both and EngineBlock and WebContainers-based projects, the preview URL\n       * may not reflect the exact path of the current page, after user navigation.\n       *\n       * In WebContainers-based projects, the preview URL will be `null` initially,\n       * and until the project starts a web server.\n       *\n       * @since 1.7.0\n       * @experimental\n       */\n      getUrl: () => {\n        return this._rdc.request({\n          type: \"SDK_GET_PREVIEW_URL\",\n          payload: {}\n        }).then((data) => data?.url ?? null);\n      },\n      /**\n       * Change the path of the preview URL.\n       *\n       * In WebContainers-based projects, this will be ignored if there is no\n       * currently running web server.\n       *\n       * @since 1.7.0\n       * @experimental\n       */\n      setUrl: (path = \"/\") => {\n        if (typeof path !== \"string\" || !path.startsWith(\"/\")) {\n          throw new Error(`Invalid argument: expected a path starting with '/', got '${path}'`);\n        }\n        return this._rdc.request({\n          type: \"SDK_SET_PREVIEW_URL\",\n          payload: { path }\n        });\n      }\n    };\n    this._rdc = new RDC(port);\n    Object.defineProperty(this.preview, \"origin\", {\n      value: typeof config.previewOrigin === \"string\" ? config.previewOrigin : null,\n      writable: false\n    });\n  }\n  /**\n   * Apply batch updates to the project files in one call.\n   */\n  applyFsDiff(diff) {\n    const isObject = (val) => val !== null && typeof val === \"object\";\n    if (!isObject(diff) || !isObject(diff.create)) {\n      throw new Error(\"Invalid diff object: expected diff.create to be an object.\");\n    } else if (!Array.isArray(diff.destroy)) {\n      throw new Error(\"Invalid diff object: expected diff.destroy to be an array.\");\n    }\n    return this._rdc.request({\n      type: \"SDK_APPLY_FS_DIFF\",\n      payload: diff\n    });\n  }\n  /**\n   * Get the project’s defined dependencies.\n   *\n   * In EngineBlock projects, version numbers represent the resolved dependency versions.\n   * In WebContainers-based projects, returns data from the project’s `package.json` without resolving installed version numbers.\n   */\n  getDependencies() {\n    return this._rdc.request({\n      type: \"SDK_GET_DEPS_SNAPSHOT\",\n      payload: {}\n    });\n  }\n  /**\n   * Get a snapshot of the project files and their content.\n   */\n  getFsSnapshot() {\n    return this._rdc.request({\n      type: \"SDK_GET_FS_SNAPSHOT\",\n      payload: {}\n    });\n  }\n}\nconst connections = [];\nclass Connection {\n  constructor(element) {\n    this.id = genID();\n    this.element = element;\n    this.pending = new Promise((resolve, reject) => {\n      const listenForSuccess = ({ data, ports }) => {\n        if (data?.action === \"SDK_INIT_SUCCESS\" && data.id === this.id) {\n          this.vm = new VM(ports[0], data.payload);\n          resolve(this.vm);\n          cleanup();\n        }\n      };\n      const pingFrame = () => {\n        this.element.contentWindow?.postMessage(\n          {\n            action: \"SDK_INIT\",\n            id: this.id\n          },\n          \"*\"\n        );\n      };\n      function cleanup() {\n        window.clearInterval(interval);\n        window.removeEventListener(\"message\", listenForSuccess);\n      }\n      window.addEventListener(\"message\", listenForSuccess);\n      pingFrame();\n      let attempts = 0;\n      const interval = window.setInterval(() => {\n        if (this.vm) {\n          cleanup();\n          return;\n        }\n        if (attempts >= CONNECT_MAX_ATTEMPTS) {\n          cleanup();\n          reject(\"Timeout: Unable to establish a connection with the StackBlitz VM\");\n          connections.forEach((connection, index) => {\n            if (connection.id === this.id) {\n              connections.splice(index, 1);\n            }\n          });\n          return;\n        }\n        attempts++;\n        pingFrame();\n      }, CONNECT_INTERVAL);\n    });\n    connections.push(this);\n  }\n}\nconst getConnection = (identifier) => {\n  const key = identifier instanceof Element ? \"element\" : \"id\";\n  return connections.find((c) => c[key] === identifier) ?? null;\n};\nfunction createHiddenInput(name, value) {\n  const input = document.createElement(\"input\");\n  input.type = \"hidden\";\n  input.name = name;\n  input.value = value;\n  return input;\n}\nfunction encodeFilePath(path) {\n  return path.replace(/\\[/g, \"%5B\").replace(/\\]/g, \"%5D\");\n}\nfunction createProjectForm({\n  template,\n  title,\n  description,\n  dependencies,\n  files,\n  settings\n}) {\n  if (!PROJECT_TEMPLATES.includes(template)) {\n    const names = PROJECT_TEMPLATES.map((t) => `'${t}'`).join(\", \");\n    console.warn(`Unsupported project.template: must be one of ${names}`);\n  }\n  const inputs = [];\n  const addInput = (name, value, defaultValue = \"\") => {\n    inputs.push(createHiddenInput(name, typeof value === \"string\" ? value : defaultValue));\n  };\n  addInput(\"project[title]\", title);\n  if (typeof description === \"string\" && description.length > 0) {\n    addInput(\"project[description]\", description);\n  }\n  addInput(\"project[template]\", template, \"javascript\");\n  if (dependencies) {\n    if (template === \"node\") {\n      console.warn(\n        `Invalid project.dependencies: dependencies must be provided as a 'package.json' file when using the 'node' template.`\n      );\n    } else {\n      addInput(\"project[dependencies]\", JSON.stringify(dependencies));\n    }\n  }\n  if (settings) {\n    addInput(\"project[settings]\", JSON.stringify(settings));\n  }\n  Object.entries(files).forEach(([path, contents]) => {\n    addInput(`project[files][${encodeFilePath(path)}]`, contents);\n  });\n  const form = document.createElement(\"form\");\n  form.method = \"POST\";\n  form.setAttribute(\"style\", \"display:none!important;\");\n  form.append(...inputs);\n  return form;\n}\nfunction createProjectFrameHTML(project, options) {\n  const form = createProjectForm(project);\n  form.action = embedUrl(\"/run\", options);\n  form.id = \"sb_run\";\n  const html = `<!doctype html>\n<html>\n<head><title></title></head>\n<body>\n  ${form.outerHTML}\n  <script>document.getElementById('${form.id}').submit();<\\/script>\n</body>\n</html>`;\n  return html;\n}\nfunction openNewProject(project, options) {\n  const form = createProjectForm(project);\n  form.action = openUrl(\"/run\", options);\n  form.target = openTarget(options);\n  document.body.appendChild(form);\n  form.submit();\n  document.body.removeChild(form);\n}\nfunction connect(frameEl) {\n  if (!frameEl?.contentWindow) {\n    return Promise.reject(\"Provided element is not an iframe.\");\n  }\n  const connection = getConnection(frameEl) ?? new Connection(frameEl);\n  return connection.pending;\n}\nfunction openProject(project, options) {\n  openNewProject(project, options);\n}\nfunction openProjectId(projectId, options) {\n  const url = openUrl(`/edit/${projectId}`, options);\n  const target = openTarget(options);\n  window.open(url, target);\n}\nfunction openGithubProject(repoSlug, options) {\n  const url = openUrl(`/github/${repoSlug}`, options);\n  const target = openTarget(options);\n  window.open(url, target);\n}\nfunction embedProject(elementOrId, project, options) {\n  const element = findElement(elementOrId);\n  const html = createProjectFrameHTML(project, options);\n  const frame = document.createElement(\"iframe\");\n  replaceAndEmbed(element, frame, options);\n  frame.contentDocument?.write(html);\n  return connect(frame);\n}\nfunction embedProjectId(elementOrId, projectId, options) {\n  const element = findElement(elementOrId);\n  const frame = document.createElement(\"iframe\");\n  frame.src = embedUrl(`/edit/${projectId}`, options);\n  replaceAndEmbed(element, frame, options);\n  return connect(frame);\n}\nfunction embedGithubProject(elementOrId, repoSlug, options) {\n  const element = findElement(elementOrId);\n  const frame = document.createElement(\"iframe\");\n  frame.src = embedUrl(`/github/${repoSlug}`, options);\n  replaceAndEmbed(element, frame, options);\n  return connect(frame);\n}\nconst StackBlitzSDK = {\n  connect,\n  embedGithubProject,\n  embedProject,\n  embedProjectId,\n  openGithubProject,\n  openProject,\n  openProjectId\n};\nexport {\n  StackBlitzSDK as default\n};\n//# sourceMappingURL=sdk.m.js.map\n"],"names":["n","CONNECT_INTERVAL","CONNECT_MAX_ATTEMPTS","DEFAULT_FRAME_HEIGHT","DEFAULT_ORIGIN","PROJECT_TEMPLATES","UI_SIDEBAR_VIEWS","UI_THEMES","UI_VIEWS","generators","value","trueParam","percentParam","stringParams","booleanParam","enumParam","buildParams","options","params","key","name","clamped","allowList","val","genID","openUrl","route","getOrigin","embedUrl","config","replaceAndEmbed","target","frame","setFrameDimensions","setFrameAllowList","findElement","elementOrId","element","openTarget","height","width","RDC","port","type","payload","resolve","reject","id","event","success","error","result","VM","path","theme","view","visible","data","diff","isObject","connections","Connection","listenForSuccess","ports","cleanup","pingFrame","interval","attempts","connection","index","getConnection","identifier","c","createHiddenInput","input","encodeFilePath","createProjectForm","template","title","description","dependencies","files","settings","names","t","inputs","addInput","defaultValue","contents","form","createProjectFrameHTML","project","openNewProject","connect","frameEl","openProject","openProjectId","projectId","url","openGithubProject","repoSlug","embedProject","html","embedProjectId","embedGithubProject","StackBlitzSDK"],"mappings":"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","x_google_ignoreList":[0]}
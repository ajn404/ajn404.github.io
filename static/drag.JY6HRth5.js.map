{"version":3,"file":"drag.JY6HRth5.js","sources":["../../node_modules/.pnpm/d3-drag@3.0.0/node_modules/d3-drag/src/constant.js","../../node_modules/.pnpm/d3-drag@3.0.0/node_modules/d3-drag/src/event.js","../../node_modules/.pnpm/d3-drag@3.0.0/node_modules/d3-drag/src/drag.js"],"sourcesContent":["export default x => () => x;\n","export default function DragEvent(type, {\n  sourceEvent,\n  subject,\n  target,\n  identifier,\n  active,\n  x, y, dx, dy,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    subject: {value: subject, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    identifier: {value: identifier, enumerable: true, configurable: true},\n    active: {value: active, enumerable: true, configurable: true},\n    x: {value: x, enumerable: true, configurable: true},\n    y: {value: y, enumerable: true, configurable: true},\n    dx: {value: dx, enumerable: true, configurable: true},\n    dy: {value: dy, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n\nDragEvent.prototype.on = function() {\n  var value = this._.on.apply(this._, arguments);\n  return value === this._ ? this : value;\n};\n","import {dispatch} from \"d3-dispatch\";\nimport {select, pointer} from \"d3-selection\";\nimport nodrag, {yesdrag} from \"./nodrag.js\";\nimport noevent, {nonpassive, nonpassivecapture, nopropagation} from \"./noevent.js\";\nimport constant from \"./constant.js\";\nimport DragEvent from \"./event.js\";\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter(event) {\n  return !event.ctrlKey && !event.button;\n}\n\nfunction defaultContainer() {\n  return this.parentNode;\n}\n\nfunction defaultSubject(event, d) {\n  return d == null ? {x: event.x, y: event.y} : d;\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      container = defaultContainer,\n      subject = defaultSubject,\n      touchable = defaultTouchable,\n      gestures = {},\n      listeners = dispatch(\"start\", \"drag\", \"end\"),\n      active = 0,\n      mousedownx,\n      mousedowny,\n      mousemoving,\n      touchending,\n      clickDistance2 = 0;\n\n  function drag(selection) {\n    selection\n        .on(\"mousedown.drag\", mousedowned)\n      .filter(touchable)\n        .on(\"touchstart.drag\", touchstarted)\n        .on(\"touchmove.drag\", touchmoved, nonpassive)\n        .on(\"touchend.drag touchcancel.drag\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  function mousedowned(event, d) {\n    if (touchending || !filter.call(this, event, d)) return;\n    var gesture = beforestart(this, container.call(this, event, d), event, d, \"mouse\");\n    if (!gesture) return;\n    select(event.view)\n      .on(\"mousemove.drag\", mousemoved, nonpassivecapture)\n      .on(\"mouseup.drag\", mouseupped, nonpassivecapture);\n    nodrag(event.view);\n    nopropagation(event);\n    mousemoving = false;\n    mousedownx = event.clientX;\n    mousedowny = event.clientY;\n    gesture(\"start\", event);\n  }\n\n  function mousemoved(event) {\n    noevent(event);\n    if (!mousemoving) {\n      var dx = event.clientX - mousedownx, dy = event.clientY - mousedowny;\n      mousemoving = dx * dx + dy * dy > clickDistance2;\n    }\n    gestures.mouse(\"drag\", event);\n  }\n\n  function mouseupped(event) {\n    select(event.view).on(\"mousemove.drag mouseup.drag\", null);\n    yesdrag(event.view, mousemoving);\n    noevent(event);\n    gestures.mouse(\"end\", event);\n  }\n\n  function touchstarted(event, d) {\n    if (!filter.call(this, event, d)) return;\n    var touches = event.changedTouches,\n        c = container.call(this, event, d),\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = beforestart(this, c, event, d, touches[i].identifier, touches[i])) {\n        nopropagation(event);\n        gesture(\"start\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchmoved(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        noevent(event);\n        gesture(\"drag\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchended(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        nopropagation(event);\n        gesture(\"end\", event, touches[i]);\n      }\n    }\n  }\n\n  function beforestart(that, container, event, d, identifier, touch) {\n    var dispatch = listeners.copy(),\n        p = pointer(touch || event, container), dx, dy,\n        s;\n\n    if ((s = subject.call(that, new DragEvent(\"beforestart\", {\n        sourceEvent: event,\n        target: drag,\n        identifier,\n        active,\n        x: p[0],\n        y: p[1],\n        dx: 0,\n        dy: 0,\n        dispatch\n      }), d)) == null) return;\n\n    dx = s.x - p[0] || 0;\n    dy = s.y - p[1] || 0;\n\n    return function gesture(type, event, touch) {\n      var p0 = p, n;\n      switch (type) {\n        case \"start\": gestures[identifier] = gesture, n = active++; break;\n        case \"end\": delete gestures[identifier], --active; // falls through\n        case \"drag\": p = pointer(touch || event, container), n = active; break;\n      }\n      dispatch.call(\n        type,\n        that,\n        new DragEvent(type, {\n          sourceEvent: event,\n          subject: s,\n          target: drag,\n          identifier,\n          active: n,\n          x: p[0] + dx,\n          y: p[1] + dy,\n          dx: p[0] - p0[0],\n          dy: p[1] - p0[1],\n          dispatch\n        }),\n        d\n      );\n    };\n  }\n\n  drag.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), drag) : filter;\n  };\n\n  drag.container = function(_) {\n    return arguments.length ? (container = typeof _ === \"function\" ? _ : constant(_), drag) : container;\n  };\n\n  drag.subject = function(_) {\n    return arguments.length ? (subject = typeof _ === \"function\" ? _ : constant(_), drag) : subject;\n  };\n\n  drag.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), drag) : touchable;\n  };\n\n  drag.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? drag : value;\n  };\n\n  drag.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, drag) : Math.sqrt(clickDistance2);\n  };\n\n  return drag;\n}\n"],"names":["constant","x","DragEvent","type","sourceEvent","subject","target","identifier","active","dx","dy","dispatch","value","defaultFilter","event","defaultContainer","defaultSubject","d","defaultTouchable","drag","filter","container","touchable","gestures","listeners","mousedownx","mousedowny","mousemoving","touchending","clickDistance2","selection","mousedowned","touchstarted","touchmoved","nonpassive","touchended","gesture","beforestart","select","mousemoved","nonpassivecapture","mouseupped","nodrag","nopropagation","noevent","yesdrag","touches","c","n","i","that","touch","p","pointer","s","p0","_"],"mappings":"mgBAAA,MAAeA,EAAAC,GAAK,IAAMA,ECAX,SAASC,EAAUC,EAAM,CACtC,YAAAC,EACA,QAAAC,EACA,OAAAC,EACA,WAAAC,EACA,OAAAC,EACA,EAAAP,EAAG,EAAG,GAAAQ,EAAI,GAAAC,EACV,SAAAC,CACF,EAAG,CACD,OAAO,iBAAiB,KAAM,CAC5B,KAAM,CAAC,MAAOR,EAAM,WAAY,GAAM,aAAc,EAAI,EACxD,YAAa,CAAC,MAAOC,EAAa,WAAY,GAAM,aAAc,EAAI,EACtE,QAAS,CAAC,MAAOC,EAAS,WAAY,GAAM,aAAc,EAAI,EAC9D,OAAQ,CAAC,MAAOC,EAAQ,WAAY,GAAM,aAAc,EAAI,EAC5D,WAAY,CAAC,MAAOC,EAAY,WAAY,GAAM,aAAc,EAAI,EACpE,OAAQ,CAAC,MAAOC,EAAQ,WAAY,GAAM,aAAc,EAAI,EAC5D,EAAG,CAAC,MAAOP,EAAG,WAAY,GAAM,aAAc,EAAI,EAClD,EAAG,CAAC,MAAO,EAAG,WAAY,GAAM,aAAc,EAAI,EAClD,GAAI,CAAC,MAAOQ,EAAI,WAAY,GAAM,aAAc,EAAI,EACpD,GAAI,CAAC,MAAOC,EAAI,WAAY,GAAM,aAAc,EAAI,EACpD,EAAG,CAAC,MAAOC,CAAQ,CACvB,CAAG,CACH,CAEAT,EAAU,UAAU,GAAK,UAAW,CAClC,IAAIU,EAAQ,KAAK,EAAE,GAAG,MAAM,KAAK,EAAG,SAAS,EAC7C,OAAOA,IAAU,KAAK,EAAI,KAAOA,CACnC,ECnBA,SAASC,EAAcC,EAAO,CAC5B,MAAO,CAACA,EAAM,SAAW,CAACA,EAAM,MAClC,CAEA,SAASC,GAAmB,CAC1B,OAAO,KAAK,UACd,CAEA,SAASC,EAAeF,EAAOG,EAAG,CAChC,OAAOA,GAAY,CAAC,EAAGH,EAAM,EAAG,EAAGA,EAAM,CAAC,CAC5C,CAEA,SAASI,GAAmB,CAC1B,OAAO,UAAU,gBAAmB,iBAAkB,IACxD,CAEe,SAAAC,IAAW,CACxB,IAAIC,EAASP,EACTQ,EAAYN,EACZV,EAAUW,EACVM,EAAYJ,EACZK,EAAW,CAAE,EACbC,EAAYb,EAAS,QAAS,OAAQ,KAAK,EAC3CH,EAAS,EACTiB,EACAC,EACAC,EACAC,EACAC,EAAiB,EAErB,SAASV,EAAKW,EAAW,CACvBA,EACK,GAAG,iBAAkBC,CAAW,EAClC,OAAOT,CAAS,EACd,GAAG,kBAAmBU,CAAY,EAClC,GAAG,iBAAkBC,EAAYC,CAAU,EAC3C,GAAG,iCAAkCC,CAAU,EAC/C,MAAM,eAAgB,MAAM,EAC5B,MAAM,8BAA+B,eAAe,CAC7D,CAEE,SAASJ,EAAYjB,EAAOG,EAAG,CAC7B,GAAI,EAAAW,GAAe,CAACR,EAAO,KAAK,KAAMN,EAAOG,CAAC,GAC9C,KAAImB,EAAUC,EAAY,KAAMhB,EAAU,KAAK,KAAMP,EAAOG,CAAC,EAAGH,EAAOG,EAAG,OAAO,EAC5EmB,IACLE,EAAOxB,EAAM,IAAI,EACd,GAAG,iBAAkByB,EAAYC,CAAiB,EAClD,GAAG,eAAgBC,EAAYD,CAAiB,EACnDE,EAAO5B,EAAM,IAAI,EACjB6B,EAAc7B,CAAK,EACnBa,EAAc,GACdF,EAAaX,EAAM,QACnBY,EAAaZ,EAAM,QACnBsB,EAAQ,QAAStB,CAAK,GAC1B,CAEE,SAASyB,EAAWzB,EAAO,CAEzB,GADA8B,EAAQ9B,CAAK,EACT,CAACa,EAAa,CAChB,IAAIlB,EAAKK,EAAM,QAAUW,EAAYf,EAAKI,EAAM,QAAUY,EAC1DC,EAAclB,EAAKA,EAAKC,EAAKA,EAAKmB,CACxC,CACIN,EAAS,MAAM,OAAQT,CAAK,CAChC,CAEE,SAAS2B,EAAW3B,EAAO,CACzBwB,EAAOxB,EAAM,IAAI,EAAE,GAAG,8BAA+B,IAAI,EACzD+B,EAAQ/B,EAAM,KAAMa,CAAW,EAC/BiB,EAAQ9B,CAAK,EACbS,EAAS,MAAM,MAAOT,CAAK,CAC/B,CAEE,SAASkB,EAAalB,EAAOG,EAAG,CAC9B,GAAKG,EAAO,KAAK,KAAMN,EAAOG,CAAC,EAC/B,KAAI6B,EAAUhC,EAAM,eAChBiC,EAAI1B,EAAU,KAAK,KAAMP,EAAOG,CAAC,EACjC+B,EAAIF,EAAQ,OAAQG,EAAGb,EAE3B,IAAKa,EAAI,EAAGA,EAAID,EAAG,EAAEC,GACfb,EAAUC,EAAY,KAAMU,EAAGjC,EAAOG,EAAG6B,EAAQG,CAAC,EAAE,WAAYH,EAAQG,CAAC,CAAC,KAC5EN,EAAc7B,CAAK,EACnBsB,EAAQ,QAAStB,EAAOgC,EAAQG,CAAC,CAAC,GAG1C,CAEE,SAAShB,EAAWnB,EAAO,CACzB,IAAIgC,EAAUhC,EAAM,eAChBkC,EAAIF,EAAQ,OAAQG,EAAGb,EAE3B,IAAKa,EAAI,EAAGA,EAAID,EAAG,EAAEC,GACfb,EAAUb,EAASuB,EAAQG,CAAC,EAAE,UAAU,KAC1CL,EAAQ9B,CAAK,EACbsB,EAAQ,OAAQtB,EAAOgC,EAAQG,CAAC,CAAC,EAGzC,CAEE,SAASd,EAAWrB,EAAO,CACzB,IAAIgC,EAAUhC,EAAM,eAChBkC,EAAIF,EAAQ,OAAQG,EAAGb,EAI3B,IAFIR,GAAa,aAAaA,CAAW,EACzCA,EAAc,WAAW,UAAW,CAAEA,EAAc,IAAK,EAAI,GAAG,EAC3DqB,EAAI,EAAGA,EAAID,EAAG,EAAEC,GACfb,EAAUb,EAASuB,EAAQG,CAAC,EAAE,UAAU,KAC1CN,EAAc7B,CAAK,EACnBsB,EAAQ,MAAOtB,EAAOgC,EAAQG,CAAC,CAAC,EAGxC,CAEE,SAASZ,EAAYa,EAAM7B,EAAWP,EAAOG,EAAGV,EAAY4C,EAAO,CACjE,IAAIxC,EAAWa,EAAU,KAAM,EAC3B4B,EAAIC,EAAQF,GAASrC,EAAOO,CAAS,EAAGZ,EAAIC,EAC5C4C,EAEJ,IAAKA,EAAIjD,EAAQ,KAAK6C,EAAM,IAAIhD,EAAU,cAAe,CACrD,YAAaY,EACb,OAAQK,EACR,WAAAZ,EACA,OAAAC,EACA,EAAG4C,EAAE,CAAC,EACN,EAAGA,EAAE,CAAC,EACN,GAAI,EACJ,GAAI,EACJ,SAAAzC,CACR,CAAO,EAAGM,CAAC,IAAM,KAEb,OAAAR,EAAK6C,EAAE,EAAIF,EAAE,CAAC,GAAK,EACnB1C,EAAK4C,EAAE,EAAIF,EAAE,CAAC,GAAK,EAEZ,SAAShB,EAAQjC,EAAMW,EAAOqC,EAAO,CAC1C,IAAII,EAAKH,EAAGJ,EACZ,OAAQ7C,EAAI,CACV,IAAK,QAASoB,EAAShB,CAAU,EAAI6B,EAASY,EAAIxC,IAAU,MAC5D,IAAK,MAAO,OAAOe,EAAShB,CAAU,EAAG,EAAEC,EAC3C,IAAK,OAAQ4C,EAAIC,EAAQF,GAASrC,EAAOO,CAAS,EAAG2B,EAAIxC,EAAQ,KACzE,CACMG,EAAS,KACPR,EACA+C,EACA,IAAIhD,EAAUC,EAAM,CAClB,YAAaW,EACb,QAASwC,EACT,OAAQnC,EACR,WAAAZ,EACA,OAAQyC,EACR,EAAGI,EAAE,CAAC,EAAI3C,EACV,EAAG2C,EAAE,CAAC,EAAI1C,EACV,GAAI0C,EAAE,CAAC,EAAIG,EAAG,CAAC,EACf,GAAIH,EAAE,CAAC,EAAIG,EAAG,CAAC,EACf,SAAA5C,CACV,CAAS,EACDM,CACD,CACF,CACL,CAEE,OAAAE,EAAK,OAAS,SAASqC,EAAG,CACxB,OAAO,UAAU,QAAUpC,EAAS,OAAOoC,GAAM,WAAaA,EAAIxD,EAAS,CAAC,CAACwD,CAAC,EAAGrC,GAAQC,CAC1F,EAEDD,EAAK,UAAY,SAASqC,EAAG,CAC3B,OAAO,UAAU,QAAUnC,EAAY,OAAOmC,GAAM,WAAaA,EAAIxD,EAASwD,CAAC,EAAGrC,GAAQE,CAC3F,EAEDF,EAAK,QAAU,SAASqC,EAAG,CACzB,OAAO,UAAU,QAAUnD,EAAU,OAAOmD,GAAM,WAAaA,EAAIxD,EAASwD,CAAC,EAAGrC,GAAQd,CACzF,EAEDc,EAAK,UAAY,SAASqC,EAAG,CAC3B,OAAO,UAAU,QAAUlC,EAAY,OAAOkC,GAAM,WAAaA,EAAIxD,EAAS,CAAC,CAACwD,CAAC,EAAGrC,GAAQG,CAC7F,EAEDH,EAAK,GAAK,UAAW,CACnB,IAAIP,EAAQY,EAAU,GAAG,MAAMA,EAAW,SAAS,EACnD,OAAOZ,IAAUY,EAAYL,EAAOP,CACrC,EAEDO,EAAK,cAAgB,SAASqC,EAAG,CAC/B,OAAO,UAAU,QAAU3B,GAAkB2B,EAAI,CAACA,GAAKA,EAAGrC,GAAQ,KAAK,KAAKU,CAAc,CAC3F,EAEMV,CACT","x_google_ignoreList":[0,1,2]}
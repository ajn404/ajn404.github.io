{"version":3,"file":"useCesium.MJG7k46j.js","sources":["../../src/components/react/cesium/hooks/useCesium.ts"],"sourcesContent":["import { useEffect, useRef } from \"react\";\nimport { Viewer, Ion } from \"cesium\";\n\n// 自定义 Hook，用于初始化 Cesium 和管理生命周期\nexport const useCesium = () => {\n  const cesiumContainerRef = useRef(null); // DOM 容器引用\n  const viewerRef = useRef(null); // 使用 useRef 保存 Cesium Viewer 实例\n\n  // 设置 Cesium 的默认访问令牌\n  Ion.defaultAccessToken =\n    \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIwOWRkMzFlYS0yMDVhLTRkNzYtYWJmMC1hMmE1NjljN2MyNjMiLCJpZCI6NzMzNDQsImlhdCI6MTYzNjgxNDEzNX0.Q2MfD_lkQgsJ-R3NPfYjS9QA9q_j4Py8DktYKsPmZNg\";\n\n  useEffect(() => {\n    if (cesiumContainerRef.current && !viewerRef.current) {\n      // 初始化 Cesium Viewer\n      const cesiumViewer = new Viewer(cesiumContainerRef.current, {\n        terrainProvider: undefined, // 不使用地形提供者\n        baseLayerPicker: false, // 禁用基础图层选择器\n        geocoder: false, // 禁用地理编码器\n        homeButton: false, // 禁用主页按钮\n        sceneModePicker: false, // 禁用场景模式选择器\n        navigationHelpButton: false, // 禁用导航帮助按钮\n        animation: false, // 禁用动画控件\n        timeline: false, // 禁用时间轴\n        fullscreenButton: false, // 禁用全屏按钮\n      });\n\n      // 移除 Cesium 的版权信息\n      //@ts-ignore\n      cesiumViewer._cesiumWidget._creditContainer.style.display = \"none\";\n\n      // 使 canvas 元素在点击时获得焦点\n      cesiumViewer.canvas.onclick = () => cesiumViewer.canvas.focus();\n\n      // 停止滚轮事件的传播\n      const handleWheel = event => event.stopPropagation();\n      cesiumContainerRef.current.addEventListener(\"wheel\", handleWheel);\n\n      // 保存 viewer 实例\n      viewerRef.current = cesiumViewer;\n\n      // 清理：在组件卸载时销毁 Viewer 实例\n      return () => {\n        if (cesiumViewer && !cesiumViewer.isDestroyed()) {\n          cesiumViewer.destroy();\n        }\n      };\n    }\n  }, []); // 依赖项为空数组，确保只初始化一次\n\n  return { cesiumContainerRef, viewer: viewerRef };\n};\n"],"names":["useCesium","cesiumContainerRef","useRef","viewerRef","Ion","useEffect","cesiumViewer","Viewer","handleWheel","event"],"mappings":"ueAIO,MAAMA,EAAY,IAAM,CACvB,MAAAC,EAAqBC,SAAO,IAAI,EAChCC,EAAYD,SAAO,IAAI,EAG7B,OAAAE,EAAI,mBACF,uLAEFC,EAAAA,UAAU,IAAM,CACd,GAAIJ,EAAmB,SAAW,CAACE,EAAU,QAAS,CAEpD,MAAMG,EAAe,IAAIC,EAAON,EAAmB,QAAS,CAC1D,gBAAiB,OACjB,gBAAiB,GACjB,SAAU,GACV,WAAY,GACZ,gBAAiB,GACjB,qBAAsB,GACtB,UAAW,GACX,SAAU,GACV,iBAAkB,EAAA,CACnB,EAIYK,EAAA,cAAc,iBAAiB,MAAM,QAAU,OAG5DA,EAAa,OAAO,QAAU,IAAMA,EAAa,OAAO,MAAM,EAGxD,MAAAE,EAAuBC,GAAAA,EAAM,gBAAgB,EAChC,OAAAR,EAAA,QAAQ,iBAAiB,QAASO,CAAW,EAGhEL,EAAU,QAAUG,EAGb,IAAM,CACPA,GAAgB,CAACA,EAAa,eAChCA,EAAa,QAAQ,CAEzB,CAAA,CAEJ,EAAG,EAAE,EAEE,CAAE,mBAAAL,EAAoB,OAAQE,CAAU,CACjD"}
{"version":3,"mappings":"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","names":["dispatch","node","type","detail","document","event","isarray","value","isindex","key","inspectName","name","n","symbolToString","formatSymbol","symbol","getOwnPropertySymbols","hasOwnProperty","toStringTag","FORBIDDEN","symbolsof","isown","object","tagof","valueof","SYMBOLS","immutableName","obj","symbols","s","prefix","arrayish","setish","getPrototypeOf","getOwnPropertyDescriptors","objectPrototype","inspectExpanded","_","proto","tag","fields","next","iterateMap","iterateObject","iterateSet","iterateArray","iterateImArray","iterateImSet","iterateImObject","iterateProto","span","a","replace","inspectCollapsed","i","map","formatMapField","set","formatSetField","array","formatField","i1","formatPrototype","item","inspect","className","hasSelection","elem","sel","shallow","i0","formatEmpty","fragment","formatDate","date","format","errorToString","formatError","regExpToString","formatRegExp","NEWLINE_LIMIT","formatString","string","expanded","count","textValue","lines","div","templatify","splitter","truncatedCount","templatifyChar","char","code","re","toString","TYPE_ASYNC","TYPE_ASYNC_GENERATOR","TYPE_CLASS","TYPE_FUNCTION","TYPE_GENERATOR","inspectFunction","f","m","t","formatFunction","args","cellname","spanType","expand","spanOld","spanNew","LOCATION_MATCH","Inspector","_node","isnode","error","container","dependency","version","main","path","d3","inputs","plot","graphviz","highlight","katex","lodash","htl","jszip","marked","sql","vega","vegalite","vegaliteApi","arrow4","arrow9","arrow11","arquero","topojson","exceljs","mermaid","leaflet","duckdb","metas","queue","some","identifierRe","versionRe","extensionRe","RequireError","message","parseIdentifier","identifier","match","resolveFrom","origin","mains","meta","resolveMeta","target","url","response","base","require","requireFrom","resolver","cache","requireBase","requireRelative","requireAbsolute","module","resolve","reject","script","define","requireAlias","aliases","merge","modules","o","k","getter","isbuiltin","dependencies","factory","exports","cdn","requireDefault","initialRequire","setDefaultRequire","requirer","SQLite","init","dist","file","SQLiteDatabaseClient","db","source","SQL","buffer","load","query","params","exec","rows","element","text","row","schema","table","notnull","sqliteType","columns","c","r","strings","result","values","props","children","p","isArqueroTable","isArrowTable","getArrowTableSchema","getArrowFieldSchema","field","getArrowType","loadArrow","arrow","promise","DuckDBClient","connection","reader","batch","results","done","column_name","column_type","nullable","getDuckDBType","sources","config","createDuckDB","FileAttachment","insertFile","insertArrowTable","insertArray","insertArqueroTable","data","options","database","insertUntypedCSV","loadDuckDB","__vitePreload","bundle","logger","worker","nChecks","isDatabaseClient","mode","__query","isDataArray","isQueryResultSetSchema","isQueryResultSetColumns","arrayContainsObjects","arrayContainsPrimitives","arrayContainsDates","isTypedArray","v","objectHasEnumerableKeys","schemas","isColumnSchema","arrayIsPrimitive","hasPrimitive","hasDate","operations","invalidation","loadTableDataSource","evaluateQuery","makeQueryTemplate","__table","loadSqlDataSource","sourceCache","loadSource","loadDuckDBClient","asArrowTable","getFileSourceName","abortController","accumulateQuery","queryRequest","then","queryResponse","escaper","select","from","filter","sort","slice","names","column","override","formatTable","appendSql","appendWhereEntry","appendOrderBy","direction","operands","appendOperand","likeOperand","appendListOperands","ops","first","op","operand","defined","b","ascendingDefined","descendingDefined","isValidNumber","isValidInteger","isValidString","isValidBoolean","isValidBigint","isValidDate","isValidBuffer","isValidArray","isValidObject","isValidOther","getTypeValidator","colType","DATE_TEST","coerceToType","trimValue","getSchema","inferSchema","applyTypes","input","inferred","types","colIndex","col","d","coerceRow","applyNames","overridesByName","errors","typed","derivedSource","columnErrors","index","resolved","typedDerived","isValid","time","reverse","compare","to","fullSchema","schemaByName","coerced","createTypeCount","getAllKeys","keys","sample","colCount","minCount","greatest","Workbook","workbook","sname","sheet","extract","range","headers","c0","r0","c1","r1","parseRange","headerRow","valueOf","toColumn","output","_row","cell","richText","specifier","columnCount","rowCount","fromCellReference","sc","sr","remote_fetch","enforceSchema","dsv","delimiter","parse","tsvParseRows","tsvParse","csvParseRows","csvParse","autoType","AbstractFile","mimeType","Arrow","JSZip","ZipArchive","ExcelJS","NoFileAttachments","FileAttachments","archive","ZipArchiveEntry","canvas","width","height","context2d","dpi","context","download","label","reset","namespaces","attributes","min","max","step","option","svg","uid","Id","id","that","disposable","dispose","iterator","test","observe","initialize","stale","change","x","eventof","inputted","transform","push","start","stop","valueAt","template","render","wrapper","parts","part","root","nodes","walker","j","html","L","ll","link","md","hl","block","language","mer","merd","Mutable","now","delay","duration","timeouts","timeout","when","tick","raw","style","href","tex","renderer","vl","api","resized","w","Library","properties","Inputs","DOM","Files","Generators","Promises","property","RuntimeError","generatorish","constant","identity","rethrow","prototype","noop","TYPE_NORMAL","TYPE_IMPLICIT","TYPE_DUPLICATE","no_observer","Variable","observer","variable_undefined","variable_rejector","initShadow","variable_pending","variable_fulfilled","variable_rejected","variable_resolve","variable_define","variable_delete","variable_import","definition","variable_attach","variable","variable_detach","variable_stale","variable_duplicate","variable_defineImpl","scope","runtime","found","remote","variable_variable","variable_invalidation","variable_visibility","Module","builtins","module_resolve","module_redefine","module_define","module_derive","module_import","module_value","module_variable","module_builtin","module_revalue","injects","injectModule","copies","alias","derive","inject","importedModule","sourceVariable","targetVariable","sourceInput","sourceModule","variable_name","frame","Runtime","global","window_global","builtin","runtime_precompute","runtime_compute","runtime_computeSoon","runtime_computeNow","runtime_dispose","runtime_module","callback","variables","precomputes","runtime_defer","reachable","variable_reachable","variable_increment","variable_compute","postqueue","variable_circular","variable_error","variable_decrement","depth","variable_value","variable_invalidator","variable_intersector","visible","entry","y","value0","generate","variable_return","variable_generate","generator","currentValue","compute","onfulfilled","recompute","postcompute","outputs"],"ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],"sources":["../../node_modules/.pnpm/@observablehq+inspector@5.0.1/node_modules/@observablehq/inspector/src/dispatch.js","../../node_modules/.pnpm/@observablehq+inspector@5.0.1/node_modules/@observablehq/inspector/src/array.js","../../node_modules/.pnpm/@observablehq+inspector@5.0.1/node_modules/@observablehq/inspector/src/inspectName.js","../../node_modules/.pnpm/@observablehq+inspector@5.0.1/node_modules/@observablehq/inspector/src/formatSymbol.js","../../node_modules/.pnpm/@observablehq+inspector@5.0.1/node_modules/@observablehq/inspector/src/object.js","../../node_modules/.pnpm/@observablehq+inspector@5.0.1/node_modules/@observablehq/inspector/src/immutable.js","../../node_modules/.pnpm/@observablehq+inspector@5.0.1/node_modules/@observablehq/inspector/src/expanded.js","../../node_modules/.pnpm/@observablehq+inspector@5.0.1/node_modules/@observablehq/inspector/src/collapsed.js","../../node_modules/.pnpm/@observablehq+inspector@5.0.1/node_modules/@observablehq/inspector/src/formatDate.js","../../node_modules/.pnpm/@observablehq+inspector@5.0.1/node_modules/@observablehq/inspector/src/formatError.js","../../node_modules/.pnpm/@observablehq+inspector@5.0.1/node_modules/@observablehq/inspector/src/formatRegExp.js","../../node_modules/.pnpm/@observablehq+inspector@5.0.1/node_modules/@observablehq/inspector/src/formatString.js","../../node_modules/.pnpm/@observablehq+inspector@5.0.1/node_modules/@observablehq/inspector/src/inspectFunction.js","../../node_modules/.pnpm/@observablehq+inspector@5.0.1/node_modules/@observablehq/inspector/src/inspect.js","../../node_modules/.pnpm/@observablehq+inspector@5.0.1/node_modules/@observablehq/inspector/src/index.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/dependency.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/dependencies.js","../../node_modules/.pnpm/d3-require@1.3.0/node_modules/d3-require/src/index.mjs","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/require.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/sqlite.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/arquero.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/arrow.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/duckdb.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/table.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/xlsx.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/fileAttachment.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/dom/canvas.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/dom/context2d.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/dom/download.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/dom/element.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/dom/input.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/dom/range.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/dom/select.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/dom/svg.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/dom/text.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/dom/uid.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/files/buffer.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/files/text.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/files/url.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/that.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/generators/disposable.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/generators/filter.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/generators/observe.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/generators/input.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/generators/map.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/generators/queue.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/generators/range.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/generators/valueAt.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/generators/worker.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/template.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/html.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/leaflet.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/md.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/mermaid.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/mutable.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/now.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/promises/delay.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/promises/when.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/promises/tick.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/resolve.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/svg.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/tex.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/vegalite.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/width.js","../../node_modules/.pnpm/@observablehq+stdlib@5.8.8/node_modules/@observablehq/stdlib/src/library.js","../../node_modules/.pnpm/@observablehq+runtime@5.9.9/node_modules/@observablehq/runtime/src/errors.js","../../node_modules/.pnpm/@observablehq+runtime@5.9.9/node_modules/@observablehq/runtime/src/generatorish.js","../../node_modules/.pnpm/@observablehq+runtime@5.9.9/node_modules/@observablehq/runtime/src/constant.js","../../node_modules/.pnpm/@observablehq+runtime@5.9.9/node_modules/@observablehq/runtime/src/identity.js","../../node_modules/.pnpm/@observablehq+runtime@5.9.9/node_modules/@observablehq/runtime/src/rethrow.js","../../node_modules/.pnpm/@observablehq+runtime@5.9.9/node_modules/@observablehq/runtime/src/array.js","../../node_modules/.pnpm/@observablehq+runtime@5.9.9/node_modules/@observablehq/runtime/src/noop.js","../../node_modules/.pnpm/@observablehq+runtime@5.9.9/node_modules/@observablehq/runtime/src/variable.js","../../node_modules/.pnpm/@observablehq+runtime@5.9.9/node_modules/@observablehq/runtime/src/module.js","../../node_modules/.pnpm/@observablehq+runtime@5.9.9/node_modules/@observablehq/runtime/src/runtime.js"],"sourcesContent":["export default function dispatch(node, type, detail) {\n  detail = detail || {};\n  var document = node.ownerDocument, event = document.defaultView.CustomEvent;\n  if (typeof event === \"function\") {\n    event = new event(type, {detail: detail});\n  } else {\n    event = document.createEvent(\"Event\");\n    event.initEvent(type, false, false);\n    event.detail = detail;\n  }\n  node.dispatchEvent(event);\n}\n","// TODO https://twitter.com/mbostock/status/702737065121742848\nexport function isarray(value) {\n  return Array.isArray(value)\n      || value instanceof Int8Array\n      || value instanceof Int16Array\n      || value instanceof Int32Array\n      || value instanceof Uint8Array\n      || value instanceof Uint8ClampedArray\n      || value instanceof Uint16Array\n      || value instanceof Uint32Array\n      || value instanceof Float32Array\n      || value instanceof Float64Array;\n}\n\n// Non-integer keys in arrays, e.g. [1, 2, 0.5: \"value\"].\nexport function isindex(key) {\n  return key === (key | 0) + \"\";\n}\n","export default function inspectName(name) {\n  const n = document.createElement(\"span\");\n  n.className = \"observablehq--cellname\";\n  n.textContent = `${name} = `;\n  return n;\n}\n","const symbolToString = Symbol.prototype.toString;\n\n// Symbols do not coerce to strings; they must be explicitly converted.\nexport default function formatSymbol(symbol) {\n  return symbolToString.call(symbol);\n}\n","const {getOwnPropertySymbols, prototype: {hasOwnProperty}} = Object;\nconst {toStringTag} = Symbol;\n\nexport const FORBIDDEN = {};\n\nexport const symbolsof = getOwnPropertySymbols;\n\nexport function isown(object, key) {\n  return hasOwnProperty.call(object, key);\n}\n\nexport function tagof(object) {\n  return object[toStringTag]\n      || (object.constructor && object.constructor.name)\n      || \"Object\";\n}\n\nexport function valueof(object, key) {\n  try {\n    const value = object[key];\n    if (value) value.constructor; // Test for SecurityError.\n    return value;\n  } catch (ignore) {\n    return FORBIDDEN;\n  }\n}\n","const SYMBOLS = [\n  { symbol: \"@@__IMMUTABLE_INDEXED__@@\", name: \"Indexed\", modifier: true },\n  { symbol: \"@@__IMMUTABLE_KEYED__@@\", name: \"Keyed\", modifier: true },\n  { symbol: \"@@__IMMUTABLE_LIST__@@\", name: \"List\", arrayish: true },\n  { symbol: \"@@__IMMUTABLE_MAP__@@\", name: \"Map\" },\n  {\n    symbol: \"@@__IMMUTABLE_ORDERED__@@\",\n    name: \"Ordered\",\n    modifier: true,\n    prefix: true\n  },\n  { symbol: \"@@__IMMUTABLE_RECORD__@@\", name: \"Record\" },\n  {\n    symbol: \"@@__IMMUTABLE_SET__@@\",\n    name: \"Set\",\n    arrayish: true,\n    setish: true\n  },\n  { symbol: \"@@__IMMUTABLE_STACK__@@\", name: \"Stack\", arrayish: true }\n];\n\nexport function immutableName(obj) {\n  try {\n    let symbols = SYMBOLS.filter(({ symbol }) => obj[symbol] === true);\n    if (!symbols.length) return;\n\n    const name = symbols.find(s => !s.modifier);\n    const prefix =\n      name.name === \"Map\" && symbols.find(s => s.modifier && s.prefix);\n\n    const arrayish = symbols.some(s => s.arrayish);\n    const setish = symbols.some(s => s.setish);\n\n    return {\n      name: `${prefix ? prefix.name : \"\"}${name.name}`,\n      symbols,\n      arrayish: arrayish && !setish,\n      setish\n    };\n  } catch (e) {\n    return null;\n  }\n}\n","import dispatch from \"./dispatch.js\";\nimport inspectName from \"./inspectName.js\";\nimport {isarray, isindex} from \"./array.js\";\nimport inspectCollapsed from \"./collapsed.js\";\nimport formatSymbol from \"./formatSymbol.js\";\nimport {inspect, replace} from \"./inspect.js\";\nimport {isown, symbolsof, tagof, valueof} from \"./object.js\";\nimport {immutableName} from \"./immutable.js\";\n\nconst {getPrototypeOf, getOwnPropertyDescriptors} = Object;\nconst objectPrototype = getPrototypeOf({});\n\nexport default function inspectExpanded(object, _, name, proto) {\n  let arrayish = isarray(object);\n  let tag, fields, next, n;\n\n  if (object instanceof Map) {\n    if (object instanceof object.constructor) {\n      tag = `Map(${object.size})`;\n      fields = iterateMap;\n    } else { // avoid incompatible receiver error for prototype\n      tag = \"Map()\";\n      fields = iterateObject;\n    }\n  } else if (object instanceof Set) {\n    if (object instanceof object.constructor) {\n      tag = `Set(${object.size})`;\n      fields = iterateSet;\n    } else { // avoid incompatible receiver error for prototype\n      tag = \"Set()\";\n      fields = iterateObject;\n    }\n  } else if (arrayish) {\n    tag = `${object.constructor.name}(${object.length})`;\n    fields = iterateArray;\n  } else if ((n = immutableName(object))) {\n    tag = `Immutable.${n.name}${n.name === \"Record\" ? \"\" : `(${object.size})`}`;\n    arrayish = n.arrayish;\n    fields = n.arrayish\n      ? iterateImArray\n      : n.setish\n      ? iterateImSet\n      : iterateImObject;\n  } else if (proto) {\n    tag = tagof(object);\n    fields = iterateProto;\n  } else {\n    tag = tagof(object);\n    fields = iterateObject;\n  }\n\n  const span = document.createElement(\"span\");\n  span.className = \"observablehq--expanded\";\n  if (name) {\n    span.appendChild(inspectName(name));\n  }\n  const a = span.appendChild(document.createElement(\"a\"));\n  a.innerHTML = `<svg width=8 height=8 class='observablehq--caret'>\n    <path d='M4 7L0 1h8z' fill='currentColor' />\n  </svg>`;\n  a.appendChild(document.createTextNode(`${tag}${arrayish ? \" [\" : \" {\"}`));\n  a.addEventListener(\"mouseup\", function(event) {\n    event.stopPropagation();\n    replace(span, inspectCollapsed(object, null, name, proto));\n  });\n\n  fields = fields(object);\n  for (let i = 0; !(next = fields.next()).done && i < 20; ++i) {\n    span.appendChild(next.value);\n  }\n\n  if (!next.done) {\n    const a = span.appendChild(document.createElement(\"a\"));\n    a.className = \"observablehq--field\";\n    a.style.display = \"block\";\n    a.appendChild(document.createTextNode(`   more`));\n    a.addEventListener(\"mouseup\", function(event) {\n      event.stopPropagation();\n      span.insertBefore(next.value, span.lastChild.previousSibling);\n      for (let i = 0; !(next = fields.next()).done && i < 19; ++i) {\n        span.insertBefore(next.value, span.lastChild.previousSibling);\n      }\n      if (next.done) span.removeChild(span.lastChild.previousSibling);\n      dispatch(span, \"load\");\n    });\n  }\n\n  span.appendChild(document.createTextNode(arrayish ? \"]\" : \"}\"));\n\n  return span;\n}\n\nfunction* iterateMap(map) {\n  for (const [key, value] of map) {\n    yield formatMapField(key, value);\n  }\n  yield* iterateObject(map);\n}\n\nfunction* iterateSet(set) {\n  for (const value of set) {\n    yield formatSetField(value);\n  }\n  yield* iterateObject(set);\n}\n\nfunction* iterateImSet(set) {\n  for (const value of set) {\n    yield formatSetField(value);\n  }\n}\n\nfunction* iterateArray(array) {\n  for (let i = 0, n = array.length; i < n; ++i) {\n    if (i in array) {\n      yield formatField(i, valueof(array, i), \"observablehq--index\");\n    }\n  }\n  for (const key in array) {\n    if (!isindex(key) && isown(array, key)) {\n      yield formatField(key, valueof(array, key), \"observablehq--key\");\n    }\n  }\n  for (const symbol of symbolsof(array)) {\n    yield formatField(\n      formatSymbol(symbol),\n      valueof(array, symbol),\n      \"observablehq--symbol\"\n    );\n  }\n}\n\nfunction* iterateImArray(array) {\n  let i1 = 0;\n  for (const n = array.size; i1 < n; ++i1) {\n    yield formatField(i1, array.get(i1), true);\n  }\n}\n\nfunction* iterateProto(object) {\n  for (const key in getOwnPropertyDescriptors(object)) {\n    yield formatField(key, valueof(object, key), \"observablehq--key\");\n  }\n  for (const symbol of symbolsof(object)) {\n    yield formatField(\n      formatSymbol(symbol),\n      valueof(object, symbol),\n      \"observablehq--symbol\"\n    );\n  }\n\n  const proto = getPrototypeOf(object);\n  if (proto && proto !== objectPrototype) {\n    yield formatPrototype(proto);\n  }\n}\n\nfunction* iterateObject(object) {\n  for (const key in object) {\n    if (isown(object, key)) {\n      yield formatField(key, valueof(object, key), \"observablehq--key\");\n    }\n  }\n  for (const symbol of symbolsof(object)) {\n    yield formatField(\n      formatSymbol(symbol),\n      valueof(object, symbol),\n      \"observablehq--symbol\"\n    );\n  }\n\n  const proto = getPrototypeOf(object);\n  if (proto && proto !== objectPrototype) {\n    yield formatPrototype(proto);\n  }\n}\n\nfunction* iterateImObject(object) {\n  for (const [key, value] of object) {\n    yield formatField(key, value, \"observablehq--key\");\n  }\n}\n\nfunction formatPrototype(value) {\n  const item = document.createElement(\"div\");\n  const span = item.appendChild(document.createElement(\"span\"));\n  item.className = \"observablehq--field\";\n  span.className = \"observablehq--prototype-key\";\n  span.textContent = `  <prototype>`;\n  item.appendChild(document.createTextNode(\": \"));\n  item.appendChild(inspect(value, undefined, undefined, undefined, true));\n  return item;\n}\n\nfunction formatField(key, value, className) {\n  const item = document.createElement(\"div\");\n  const span = item.appendChild(document.createElement(\"span\"));\n  item.className = \"observablehq--field\";\n  span.className = className;\n  span.textContent = `  ${key}`;\n  item.appendChild(document.createTextNode(\": \"));\n  item.appendChild(inspect(value));\n  return item;\n}\n\nfunction formatMapField(key, value) {\n  const item = document.createElement(\"div\");\n  item.className = \"observablehq--field\";\n  item.appendChild(document.createTextNode(\"  \"));\n  item.appendChild(inspect(key));\n  item.appendChild(document.createTextNode(\" => \"));\n  item.appendChild(inspect(value));\n  return item;\n}\n\nfunction formatSetField(value) {\n  const item = document.createElement(\"div\");\n  item.className = \"observablehq--field\";\n  item.appendChild(document.createTextNode(\"  \"));\n  item.appendChild(inspect(value));\n  return item;\n}\n","import {isarray, isindex} from \"./array.js\";\nimport inspectExpanded from \"./expanded.js\";\nimport formatSymbol from \"./formatSymbol.js\";\nimport inspectName from \"./inspectName.js\";\nimport {inspect, replace} from \"./inspect.js\";\nimport {isown, symbolsof, tagof, valueof} from \"./object.js\";\nimport {immutableName} from \"./immutable.js\";\n\nfunction hasSelection(elem) {\n  const sel = window.getSelection();\n  return (\n    sel.type === \"Range\" &&\n    (sel.containsNode(elem, true) ||\n      elem.contains(sel.anchorNode) ||\n      elem.contains(sel.focusNode))\n  );\n}\n\nexport default function inspectCollapsed(object, shallow, name, proto) {\n  let arrayish = isarray(object);\n  let tag, fields, next, n;\n\n  if (object instanceof Map) {\n    if (object instanceof object.constructor) {\n      tag = `Map(${object.size})`;\n      fields = iterateMap;\n    } else { // avoid incompatible receiver error for prototype\n      tag = \"Map()\";\n      fields = iterateObject;\n    }\n  } else if (object instanceof Set) {\n    if (object instanceof object.constructor) {\n      tag = `Set(${object.size})`;\n      fields = iterateSet;\n    } else { // avoid incompatible receiver error for prototype\n      tag = \"Set()\";\n      fields = iterateObject;\n    }\n  } else if (arrayish) {\n    tag = `${object.constructor.name}(${object.length})`;\n    fields = iterateArray;\n  } else if ((n = immutableName(object))) {\n    tag = `Immutable.${n.name}${n.name === 'Record' ? '' : `(${object.size})`}`;\n    arrayish = n.arrayish;\n    fields = n.arrayish ? iterateImArray : n.setish ? iterateImSet : iterateImObject;\n  } else {\n    tag = tagof(object);\n    fields = iterateObject;\n  }\n\n  if (shallow) {\n    const span = document.createElement(\"span\");\n    span.className = \"observablehq--shallow\";\n    if (name) {\n      span.appendChild(inspectName(name));\n    }\n    span.appendChild(document.createTextNode(tag));\n    span.addEventListener(\"mouseup\", function(event) {\n      if (hasSelection(span)) return;\n      event.stopPropagation();\n      replace(span, inspectCollapsed(object));\n    });\n    return span;\n  }\n\n  const span = document.createElement(\"span\");\n  span.className = \"observablehq--collapsed\";\n  if (name) {\n    span.appendChild(inspectName(name));\n  }\n  const a = span.appendChild(document.createElement(\"a\"));\n  a.innerHTML = `<svg width=8 height=8 class='observablehq--caret'>\n    <path d='M7 4L1 8V0z' fill='currentColor' />\n  </svg>`;\n  a.appendChild(document.createTextNode(`${tag}${arrayish ? \" [\" : \" {\"}`));\n  span.addEventListener(\"mouseup\", function(event) {\n    if (hasSelection(span)) return;\n    event.stopPropagation();\n    replace(span, inspectExpanded(object, null, name, proto));\n  }, true);\n\n  fields = fields(object);\n  for (let i = 0; !(next = fields.next()).done && i < 20; ++i) {\n    if (i > 0) span.appendChild(document.createTextNode(\", \"));\n    span.appendChild(next.value);\n  }\n\n  if (!next.done) span.appendChild(document.createTextNode(\", \"));\n  span.appendChild(document.createTextNode(arrayish ? \"]\" : \"}\"));\n\n  return span;\n}\n\nfunction* iterateMap(map) {\n  for (const [key, value] of map) {\n    yield formatMapField(key, value);\n  }\n  yield* iterateObject(map);\n}\n\nfunction* iterateSet(set) {\n  for (const value of set) {\n    yield inspect(value, true);\n  }\n  yield* iterateObject(set);\n}\n\nfunction* iterateImSet(set) {\n  for (const value of set) {\n    yield inspect(value, true);\n  }\n}\n\nfunction* iterateImArray(array) {\n  let i0 = -1, i1 = 0;\n  for (const n = array.size; i1 < n; ++i1) {\n    if (i1 > i0 + 1) yield formatEmpty(i1 - i0 - 1);\n    yield inspect(array.get(i1), true);\n    i0 = i1;\n  }\n  if (i1 > i0 + 1) yield formatEmpty(i1 - i0 - 1);\n}\n\nfunction* iterateArray(array) {\n  let i0 = -1, i1 = 0;\n  for (const n = array.length; i1 < n; ++i1) {\n    if (i1 in array) {\n      if (i1 > i0 + 1) yield formatEmpty(i1 - i0 - 1);\n      yield inspect(valueof(array, i1), true);\n      i0 = i1;\n    }\n  }\n  if (i1 > i0 + 1) yield formatEmpty(i1 - i0 - 1);\n  for (const key in array) {\n    if (!isindex(key) && isown(array, key)) {\n      yield formatField(key, valueof(array, key), \"observablehq--key\");\n    }\n  }\n  for (const symbol of symbolsof(array)) {\n    yield formatField(formatSymbol(symbol), valueof(array, symbol), \"observablehq--symbol\");\n  }\n}\n\nfunction* iterateObject(object) {\n  for (const key in object) {\n    if (isown(object, key)) {\n      yield formatField(key, valueof(object, key), \"observablehq--key\");\n    }\n  }\n  for (const symbol of symbolsof(object)) {\n    yield formatField(formatSymbol(symbol), valueof(object, symbol), \"observablehq--symbol\");\n  }\n}\n\nfunction* iterateImObject(object) {\n  for (const [key, value] of object) {\n    yield formatField(key, value, \"observablehq--key\");\n  }\n}\n\nfunction formatEmpty(e) {\n  const span = document.createElement(\"span\");\n  span.className = \"observablehq--empty\";\n  span.textContent = e === 1 ? \"empty\" : `empty  ${e}`;\n  return span;\n}\n\nfunction formatField(key, value, className) {\n  const fragment = document.createDocumentFragment();\n  const span = fragment.appendChild(document.createElement(\"span\"));\n  span.className = className;\n  span.textContent = key;\n  fragment.appendChild(document.createTextNode(\": \"));\n  fragment.appendChild(inspect(value, true));\n  return fragment;\n}\n\nfunction formatMapField(key, value) {\n  const fragment = document.createDocumentFragment();\n  fragment.appendChild(inspect(key, true));\n  fragment.appendChild(document.createTextNode(\" => \"));\n  fragment.appendChild(inspect(value, true));\n  return fragment;\n}\n","import {format} from \"isoformat\";\n\nexport default function formatDate(date) {\n  return format(date, \"Invalid Date\");\n}\n","var errorToString = Error.prototype.toString;\n\nexport default function formatError(value) {\n  return value.stack || errorToString.call(value);\n}\n","var regExpToString = RegExp.prototype.toString;\n\nexport default function formatRegExp(value) {\n  return regExpToString.call(value);\n}\n","import inspectName from \"./inspectName.js\";\nimport {inspect, replace} from \"./inspect.js\";\n\n/* eslint-disable no-control-regex */\nconst NEWLINE_LIMIT = 20;\n\nexport default function formatString(string, shallow, expanded, name) {\n  if (shallow === false) {\n    // String has fewer escapes displayed with double quotes\n    if (count(string, /[\"\\n]/g) <= count(string, /`|\\${/g)) {\n      const span = document.createElement(\"span\");\n      if (name) span.appendChild(inspectName(name));\n      const textValue = span.appendChild(document.createElement(\"span\"));\n      textValue.className = \"observablehq--string\";\n      textValue.textContent = JSON.stringify(string);\n      return span;\n    }\n    const lines = string.split(\"\\n\");\n    if (lines.length > NEWLINE_LIMIT && !expanded) {\n      const div = document.createElement(\"div\");\n      if (name) div.appendChild(inspectName(name));\n      const textValue = div.appendChild(document.createElement(\"span\"));\n      textValue.className = \"observablehq--string\";\n      textValue.textContent = \"`\" + templatify(lines.slice(0, NEWLINE_LIMIT).join(\"\\n\"));\n      const splitter = div.appendChild(document.createElement(\"span\"));\n      const truncatedCount = lines.length - NEWLINE_LIMIT;\n      splitter.textContent = `Show ${truncatedCount} truncated line${truncatedCount > 1 ? \"s\": \"\"}`; splitter.className = \"observablehq--string-expand\";\n      splitter.addEventListener(\"mouseup\", function (event) {\n        event.stopPropagation();\n        replace(div, inspect(string, shallow, true, name));\n      });\n      return div;\n    }\n    const span = document.createElement(\"span\");\n    if (name) span.appendChild(inspectName(name));\n    const textValue = span.appendChild(document.createElement(\"span\"));\n    textValue.className = `observablehq--string${expanded ? \" observablehq--expanded\" : \"\"}`;\n    textValue.textContent = \"`\" + templatify(string) + \"`\";\n    return span;\n  }\n\n  const span = document.createElement(\"span\");\n  if (name) span.appendChild(inspectName(name));\n  const textValue = span.appendChild(document.createElement(\"span\"));\n  textValue.className = \"observablehq--string\";\n  textValue.textContent = JSON.stringify(string.length > 100 ?\n    `${string.slice(0, 50)}${string.slice(-49)}` : string);\n  return span;\n}\n\nfunction templatify(string) {\n  return string.replace(/[\\\\`\\x00-\\x09\\x0b-\\x19]|\\${/g, templatifyChar);\n}\n\nfunction templatifyChar(char) {\n  var code = char.charCodeAt(0);\n  switch (code) {\n    case 0x8: return \"\\\\b\";\n    case 0x9: return \"\\\\t\";\n    case 0xb: return \"\\\\v\";\n    case 0xc: return \"\\\\f\";\n    case 0xd: return \"\\\\r\";\n  }\n  return code < 0x10 ? \"\\\\x0\" + code.toString(16)\n      : code < 0x20 ? \"\\\\x\" + code.toString(16)\n      : \"\\\\\" + char;\n}\n\nfunction count(string, re) {\n  var n = 0;\n  while (re.exec(string)) ++n;\n  return n;\n}\n","import inspectName from \"./inspectName.js\";\nvar toString = Function.prototype.toString,\n    TYPE_ASYNC = {prefix: \"async \"},\n    TYPE_ASYNC_GENERATOR = {prefix: \"async *\"},\n    TYPE_CLASS = {prefix: \"class\"},\n    TYPE_FUNCTION = {prefix: \"\"},\n    TYPE_GENERATOR = {prefix: \"*\"};\n\nexport default function inspectFunction(f, name) {\n  var type, m, t = toString.call(f);\n\n  switch (f.constructor && f.constructor.name) {\n    case \"AsyncFunction\": type = TYPE_ASYNC; break;\n    case \"AsyncGeneratorFunction\": type = TYPE_ASYNC_GENERATOR; break;\n    case \"GeneratorFunction\": type = TYPE_GENERATOR; break;\n    default: type = /^class\\b/.test(t) ? TYPE_CLASS : TYPE_FUNCTION; break;\n  }\n\n  // A class, possibly named.\n  // class Name\n  if (type === TYPE_CLASS) {\n    return formatFunction(type, \"\", name);\n  }\n\n  // An arrow function with a single argument.\n  // foo =>\n  // async foo =>\n  if ((m = /^(?:async\\s*)?(\\w+)\\s*=>/.exec(t))) {\n    return formatFunction(type, \"(\" + m[1] + \")\", name);\n  }\n\n  // An arrow function with parenthesized arguments.\n  // ()\n  // async ()\n  if ((m = /^(?:async\\s*)?\\(\\s*(\\w+(?:\\s*,\\s*\\w+)*)?\\s*\\)/.exec(t))) {\n    return formatFunction(type, m[1] ? \"(\" + m[1].replace(/\\s*,\\s*/g, \", \") + \")\" : \"()\", name);\n  }\n\n  // A function, possibly: async, generator, anonymous, simply arguments.\n  // function name()\n  // function* name()\n  // async function name()\n  // async function* name()\n  if ((m = /^(?:async\\s*)?function(?:\\s*\\*)?(?:\\s*\\w+)?\\s*\\(\\s*(\\w+(?:\\s*,\\s*\\w+)*)?\\s*\\)/.exec(t))) {\n    return formatFunction(type, m[1] ? \"(\" + m[1].replace(/\\s*,\\s*/g, \", \") + \")\" : \"()\", name);\n  }\n\n  // Something else, like destructuring, comments or default values.\n  return formatFunction(type, \"()\", name);\n}\n\nfunction formatFunction(type, args, cellname) {\n  var span = document.createElement(\"span\");\n  span.className = \"observablehq--function\";\n  if (cellname) {\n    span.appendChild(inspectName(cellname));\n  }\n  var spanType = span.appendChild(document.createElement(\"span\"));\n  spanType.className = \"observablehq--keyword\";\n  spanType.textContent = type.prefix;\n  span.appendChild(document.createTextNode(args));\n  return span;\n}\n","import dispatch from \"./dispatch.js\";\nimport inspectCollapsed from \"./collapsed.js\";\nimport inspectExpanded from \"./expanded.js\";\nimport inspectName from \"./inspectName.js\";\nimport formatDate from \"./formatDate.js\";\nimport formatError from \"./formatError.js\";\nimport formatRegExp from \"./formatRegExp.js\";\nimport formatString from \"./formatString.js\";\nimport formatSymbol from \"./formatSymbol.js\";\nimport inspectFunction from \"./inspectFunction.js\";\nimport {FORBIDDEN} from \"./object.js\";\n\nconst {prototype: {toString}} = Object;\n\nexport function inspect(value, shallow, expand, name, proto) {\n  let type = typeof value;\n  switch (type) {\n    case \"boolean\":\n    case \"undefined\": { value += \"\"; break; }\n    case \"number\": { value = value === 0 && 1 / value < 0 ? \"-0\" : value + \"\"; break; }\n    case \"bigint\": { value = value + \"n\"; break; }\n    case \"symbol\": { value = formatSymbol(value, name); break; }\n    case \"function\": { return inspectFunction(value, name); }\n    case \"string\": { return formatString(value, shallow, expand, name); }\n    default: {\n      if (value === null) { type = null, value = \"null\"; break; }\n      if (value instanceof Date) { type = \"date\", value = formatDate(value, name); break; }\n      if (value === FORBIDDEN) { type = \"forbidden\", value = \"[forbidden]\"; break; }\n      switch (toString.call(value)) {\n        case \"[object RegExp]\": { type = \"regexp\", value = formatRegExp(value, name); break; }\n        case \"[object Error]\": // https://github.com/lodash/lodash/blob/master/isError.js#L26\n        case \"[object DOMException]\": { type = \"error\", value = formatError(value, name); break; }\n        default: return (expand ? inspectExpanded : inspectCollapsed)(value, shallow, name, proto);\n      }\n      break;\n    }\n  }\n  const span = document.createElement(\"span\");\n  if (name) span.appendChild(inspectName(name));\n  const n = span.appendChild(document.createElement(\"span\"));\n  n.className = `observablehq--${type}`;\n  n.textContent = value;\n  return span;\n}\n\nexport function replace(spanOld, spanNew) {\n  if (spanOld.classList.contains(\"observablehq--inspect\")) spanNew.classList.add(\"observablehq--inspect\");\n  spanOld.parentNode.replaceChild(spanNew, spanOld);\n  dispatch(spanNew, \"load\");\n}\n","import dispatch from \"./dispatch.js\";\nimport {inspect} from \"./inspect.js\";\nimport inspectName from \"./inspectName.js\";\n\nconst LOCATION_MATCH = /\\s+\\(\\d+:\\d+\\)$/m;\n\nexport class Inspector {\n  constructor(node) {\n    if (!node) throw new Error(\"invalid node\");\n    this._node = node;\n    node.classList.add(\"observablehq\");\n  }\n  pending() {\n    const {_node} = this;\n    _node.classList.remove(\"observablehq--error\");\n    _node.classList.add(\"observablehq--running\");\n  }\n  fulfilled(value, name) {\n    const {_node} = this;\n    if (!isnode(value) || (value.parentNode && value.parentNode !== _node)) {\n      value = inspect(value, false, _node.firstChild // TODO Do this better.\n          && _node.firstChild.classList\n          && _node.firstChild.classList.contains(\"observablehq--expanded\"), name);\n      value.classList.add(\"observablehq--inspect\");\n    }\n    _node.classList.remove(\"observablehq--running\", \"observablehq--error\");\n    if (_node.firstChild !== value) {\n      if (_node.firstChild) {\n        while (_node.lastChild !== _node.firstChild) _node.removeChild(_node.lastChild);\n        _node.replaceChild(value, _node.firstChild);\n      } else {\n        _node.appendChild(value);\n      }\n    }\n    dispatch(_node, \"update\");\n  }\n  rejected(error, name) {\n    const {_node} = this;\n    _node.classList.remove(\"observablehq--running\");\n    _node.classList.add(\"observablehq--error\");\n    while (_node.lastChild) _node.removeChild(_node.lastChild);\n    var div = document.createElement(\"div\");\n    div.className = \"observablehq--inspect\";\n    if (name) div.appendChild(inspectName(name));\n    div.appendChild(document.createTextNode((error + \"\").replace(LOCATION_MATCH, \"\")));\n    _node.appendChild(div);\n    dispatch(_node, \"error\", {error: error});\n  }\n}\n\nInspector.into = function(container) {\n  if (typeof container === \"string\") {\n    container = document.querySelector(container);\n    if (container == null) throw new Error(\"container not found\");\n  }\n  return function() {\n    return new Inspector(container.appendChild(document.createElement(\"div\")));\n  };\n};\n\n// Returns true if the given value is something that should be added to the DOM\n// by the inspector, rather than being inspected. This deliberately excludes\n// DocumentFragment since appending a fragment dissolves (mutates) the\n// fragment, and we wish for the inspector to not have side-effects. Also,\n// HTMLElement.prototype is an instanceof Element, but not an element!\nfunction isnode(value) {\n  return (value instanceof Element || value instanceof Text)\n      && (value instanceof value.constructor);\n}\n","export function dependency(name, version, main) {\n  return {\n    resolve(path = main) {\n      return `${name}@${version}/${path}`;\n    }\n  };\n}\n","import {dependency} from \"./dependency.js\";\nexport const d3 = dependency(\"d3\", \"7.9.0\", \"dist/d3.min.js\");\nexport const inputs = dependency(\"@observablehq/inputs\", \"0.11.0\", \"dist/inputs.min.js\");\nexport const plot = dependency(\"@observablehq/plot\", \"0.6.16\", \"dist/plot.umd.min.js\");\nexport const graphviz = dependency(\"@observablehq/graphviz\", \"0.2.1\", \"dist/graphviz.min.js\");\nexport const highlight = dependency(\"@observablehq/highlight.js\", \"2.0.0\", \"highlight.min.js\");\nexport const katex = dependency(\"@observablehq/katex\", \"0.11.1\", \"dist/katex.min.js\");\nexport const lodash = dependency(\"lodash\", \"4.17.21\", \"lodash.min.js\");\nexport const htl = dependency(\"htl\", \"0.3.1\", \"dist/htl.min.js\");\nexport const jszip = dependency(\"jszip\", \"3.10.1\", \"dist/jszip.min.js\");\nexport const marked = dependency(\"marked\", \"0.3.12\", \"marked.min.js\");\nexport const sql = dependency(\"sql.js\", \"1.8.0\", \"dist/sql-wasm.js\");\nexport const vega = dependency(\"vega\", \"5.22.1\", \"build/vega.min.js\");\nexport const vegalite = dependency(\"vega-lite\", \"5.6.0\", \"build/vega-lite.min.js\");\nexport const vegaliteApi = dependency(\"vega-lite-api\", \"5.0.0\", \"build/vega-lite-api.min.js\");\nexport const arrow4 = dependency(\"apache-arrow\", \"4.0.1\", \"Arrow.es2015.min.js\");\nexport const arrow9 = dependency(\"apache-arrow\", \"9.0.0\", \"+esm\");\nexport const arrow11 = dependency(\"apache-arrow\", \"11.0.0\", \"+esm\");\nexport const arquero = dependency(\"arquero\", \"4.8.8\", \"dist/arquero.min.js\");\nexport const topojson = dependency(\"topojson-client\", \"3.1.0\", \"dist/topojson-client.min.js\");\nexport const exceljs = dependency(\"exceljs\", \"4.3.0\", \"dist/exceljs.min.js\");\nexport const mermaid = dependency(\"mermaid\", \"9.2.2\", \"dist/mermaid.min.js\");\nexport const leaflet = dependency(\"leaflet\", \"1.9.3\", \"dist/leaflet.js\");\nexport const duckdb = dependency(\"@duckdb/duckdb-wasm\", \"1.24.0\", \"+esm\");\n","const metas = new Map;\nconst queue = [];\nconst map = queue.map;\nconst some = queue.some;\nconst hasOwnProperty = queue.hasOwnProperty;\nconst identifierRe = /^((?:@[^/@]+\\/)?[^/@]+)(?:@([^/]+))?(?:\\/(.*))?$/;\nconst versionRe = /^\\d+\\.\\d+\\.\\d+(-[\\w-.+]+)?$/;\nconst extensionRe = /(?:\\.[^/]*|\\/)$/;\n\nexport class RequireError extends Error {\n  constructor(message) {\n    super(message);\n  }\n}\n\nRequireError.prototype.name = RequireError.name;\n\nfunction parseIdentifier(identifier) {\n  const match = identifierRe.exec(identifier);\n  return match && {\n    name: match[1],\n    version: match[2],\n    path: match[3]\n  };\n}\n\nexport function resolveFrom(origin = \"https://cdn.jsdelivr.net/npm/\", mains = [\"unpkg\", \"jsdelivr\", \"browser\", \"main\"]) {\n  if (!/\\/$/.test(origin)) throw new Error(\"origin lacks trailing slash\");\n\n  function main(meta) {\n    for (const key of mains) {\n      let value = meta[key];\n      if (typeof value === \"string\") {\n        if (value.startsWith(\"./\")) value = value.slice(2);\n        return extensionRe.test(value) ? value : `${value}.js`;\n      }\n    }\n  }\n\n  function resolveMeta(target) {\n    const url = `${origin}${target.name}${target.version ? `@${target.version}` : \"\"}/package.json`;\n    let meta = metas.get(url);\n    if (!meta) metas.set(url, meta = fetch(url).then(response => {\n      if (!response.ok) throw new RequireError(\"unable to load package.json\");\n      if (response.redirected && !metas.has(response.url)) metas.set(response.url, meta);\n      return response.json();\n    }));\n    return meta;\n  }\n\n  return async function resolve(name, base) {\n    if (name.startsWith(origin)) name = name.substring(origin.length);\n    if (/^(\\w+:)|\\/\\//i.test(name)) return name;\n    if (/^[.]{0,2}\\//i.test(name)) return new URL(name, base == null ? location : base).href;\n    if (!name.length || /^[\\s._]/.test(name) || /\\s$/.test(name)) throw new RequireError(\"illegal name\");\n    const target = parseIdentifier(name);\n    if (!target) return `${origin}${name}`;\n    if (!target.version && base != null && base.startsWith(origin)) {\n      const meta = await resolveMeta(parseIdentifier(base.substring(origin.length)));\n      target.version = meta.dependencies && meta.dependencies[target.name] || meta.peerDependencies && meta.peerDependencies[target.name];\n    }\n    if (target.path && !extensionRe.test(target.path)) target.path += \".js\";\n    if (target.path && target.version && versionRe.test(target.version)) return `${origin}${target.name}@${target.version}/${target.path}`;\n    const meta = await resolveMeta(target);\n    return `${origin}${meta.name}@${meta.version}/${target.path || main(meta) || \"index.js\"}`;\n  };\n}\n\nexport var require = requireFrom(resolveFrom());\n\nexport function requireFrom(resolver) {\n  const cache = new Map;\n  const requireBase = requireRelative(null);\n\n  function requireAbsolute(url) {\n    if (typeof url !== \"string\") return url;\n    let module = cache.get(url);\n    if (!module) cache.set(url, module = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.onload = () => {\n        try { resolve(queue.pop()(requireRelative(url))); }\n        catch (error) { reject(new RequireError(\"invalid module\")); }\n        script.remove();\n      };\n      script.onerror = () => {\n        reject(new RequireError(\"unable to load module\"));\n        script.remove();\n      };\n      script.async = true;\n      script.src = url;\n      window.define = define;\n      document.head.appendChild(script);\n    }));\n    return module;\n  }\n\n  function requireRelative(base) {\n    return name => Promise.resolve(resolver(name, base)).then(requireAbsolute);\n  }\n\n  function requireAlias(aliases) {\n    return requireFrom((name, base) => {\n      if (name in aliases) {\n        name = aliases[name], base = null;\n        if (typeof name !== \"string\") return name;\n      }\n      return resolver(name, base);\n    });\n  }\n\n  function require(name) {\n    return arguments.length > 1\n        ? Promise.all(map.call(arguments, requireBase)).then(merge)\n        : requireBase(name);\n  }\n\n  require.alias = requireAlias;\n  require.resolve = resolver;\n\n  return require;\n}\n\nfunction merge(modules) {\n  const o = {};\n  for (const m of modules) {\n    for (const k in m) {\n      if (hasOwnProperty.call(m, k)) {\n        if (m[k] == null) Object.defineProperty(o, k, {get: getter(m, k)});\n        else o[k] = m[k];\n      }\n    }\n  }\n  return o;\n}\n\nfunction getter(object, name) {\n  return () => object[name];\n}\n\nfunction isbuiltin(name) {\n  name = name + \"\";\n  return name === \"exports\" || name === \"module\";\n}\n\nfunction define(name, dependencies, factory) {\n  const n = arguments.length;\n  if (n < 2) factory = name, dependencies = [];\n  else if (n < 3) factory = dependencies, dependencies = typeof name === \"string\" ? [] : name;\n  queue.push(some.call(dependencies, isbuiltin) ? require => {\n    const exports = {};\n    const module = {exports};\n    return Promise.all(map.call(dependencies, name => {\n      name = name + \"\";\n      return name === \"exports\" ? exports : name === \"module\" ? module : require(name);\n    })).then(dependencies => {\n      factory.apply(null, dependencies);\n      return module.exports;\n    });\n  } : require => {\n    return Promise.all(map.call(dependencies, require)).then(dependencies => {\n      return typeof factory === \"function\" ? factory.apply(null, dependencies) : factory;\n    });\n  });\n}\n\ndefine.amd = {};\n","import {require as initialRequire, requireFrom} from \"d3-require\";\n\n// TODO Allow this to be overridden using the Librarys resolver.\nexport const cdn = \"https://cdn.observableusercontent.com/npm/\";\n\nexport let requireDefault = initialRequire;\n\nexport function setDefaultRequire(require) {\n  requireDefault = require;\n}\n\nexport function requirer(resolver) {\n  return resolver == null ? requireDefault : requireFrom(resolver);\n}\n","import {sql} from \"./dependencies.js\";\nimport {requireDefault} from \"./require.js\";\n\nexport async function SQLite(require) {\n  const [init, dist] = await Promise.all([require(sql.resolve()), require.resolve(sql.resolve(\"dist/\"))]);\n  return init({locateFile: file => `${dist}${file}`});\n}\n\nexport class SQLiteDatabaseClient {\n  constructor(db) {\n    Object.defineProperties(this, {\n      _db: {value: db}\n    });\n  }\n  static async open(source) {\n    const [SQL, buffer] = await Promise.all([SQLite(requireDefault), Promise.resolve(source).then(load)]);\n    return new SQLiteDatabaseClient(new SQL.Database(buffer));\n  }\n  async query(query, params) {\n    return await exec(this._db, query, params);\n  }\n  async queryRow(query, params) {\n    return (await this.query(query, params))[0] || null;\n  }\n  async explain(query, params) {\n    const rows = await this.query(`EXPLAIN QUERY PLAN ${query}`, params);\n    return element(\"pre\", {className: \"observablehq--inspect\"}, [\n      text(rows.map(row => row.detail).join(\"\\n\"))\n    ]);\n  }\n  async describeTables({schema} = {}) {\n    return this.query(`SELECT NULLIF(schema, 'main') AS schema, name FROM pragma_table_list() WHERE type = 'table'${schema == null ? \"\" : ` AND schema = ?`} AND name NOT LIKE 'sqlite_%' ORDER BY schema, name`, schema == null ? [] : [schema]);\n  }\n  async describeColumns({schema, table} = {}) {\n    if (table == null) throw new Error(`missing table`);\n    const rows = await this.query(`SELECT name, type, \"notnull\" FROM pragma_table_info(?${schema == null ? \"\" : `, ?`}) ORDER BY cid`, schema == null ? [table] : [table, schema]);\n    if (!rows.length) throw new Error(`table not found: ${table}`);\n    return rows.map(({name, type, notnull}) => ({name, type: sqliteType(type), databaseType: type, nullable: !notnull}));\n  }\n  async describe(object) {\n    const rows = await (object === undefined\n      ? this.query(`SELECT name FROM sqlite_master WHERE type = 'table'`)\n      : this.query(`SELECT * FROM pragma_table_info(?)`, [object]));\n    if (!rows.length) throw new Error(\"Not found\");\n    const {columns} = rows;\n    return element(\"table\", {value: rows}, [\n      element(\"thead\", [element(\"tr\", columns.map(c => element(\"th\", [text(c)])))]),\n      element(\"tbody\", rows.map(r => element(\"tr\", columns.map(c => element(\"td\", [text(r[c])])))))\n    ]);\n  }\n  async sql() {\n    return this.query(...this.queryTag.apply(this, arguments));\n  }\n  queryTag(strings, ...params) {\n    return [strings.join(\"?\"), params];\n  }\n}\n\nObject.defineProperty(SQLiteDatabaseClient.prototype, \"dialect\", {\n  value: \"sqlite\"\n});\n\n// https://www.sqlite.org/datatype3.html\nfunction sqliteType(type) {\n  switch (type) {\n    case \"NULL\":\n      return \"null\";\n    case \"INT\":\n    case \"INTEGER\":\n    case \"TINYINT\":\n    case \"SMALLINT\":\n    case \"MEDIUMINT\":\n    case \"BIGINT\":\n    case \"UNSIGNED BIG INT\":\n    case \"INT2\":\n    case \"INT8\":\n      return \"integer\";\n    case \"TEXT\":\n    case \"CLOB\":\n      return \"string\";\n    case \"REAL\":\n    case \"DOUBLE\":\n    case \"DOUBLE PRECISION\":\n    case \"FLOAT\":\n    case \"NUMERIC\":\n      return \"number\";\n    case \"BLOB\":\n      return \"buffer\";\n    case \"DATE\":\n    case \"DATETIME\":\n      return \"string\"; // TODO convert strings to Date instances in sql.js\n    default:\n      return /^(?:(?:(?:VARYING|NATIVE) )?CHARACTER|(?:N|VAR|NVAR)CHAR)\\(/.test(type) ? \"string\"\n        : /^(?:DECIMAL|NUMERIC)\\(/.test(type) ? \"number\"\n        : \"other\";\n  }\n}\n\nfunction load(source) {\n  return typeof source === \"string\" ? fetch(source).then(load)\n    : source instanceof Response || source instanceof Blob ? source.arrayBuffer().then(load)\n    : source instanceof ArrayBuffer ? new Uint8Array(source)\n    : source;\n}\n\nasync function exec(db, query, params) {\n  const [result] = await db.exec(query, params);\n  if (!result) return [];\n  const {columns, values} = result;\n  const rows = values.map(row => Object.fromEntries(row.map((value, i) => [columns[i], value])));\n  rows.columns = columns;\n  return rows;\n}\n\nfunction element(name, props, children) {\n  if (arguments.length === 2) children = props, props = undefined;\n  const element = document.createElement(name);\n  if (props !== undefined) for (const p in props) element[p] = props[p];\n  if (children !== undefined) for (const c of children) element.appendChild(c);\n  return element;\n}\n\nfunction text(value) {\n  return document.createTextNode(value);\n}\n","export function isArqueroTable(value) {\n  // Arquero tables have a `toArrowBuffer` function\n  return value && typeof value.toArrowBuffer === \"function\";\n}\n","import {arrow11 as arrow} from \"./dependencies.js\";\nimport {cdn} from \"./require.js\";\n\n// Returns true if the vaue is an Apache Arrow table. This uses a duck test\n// (instead of strict instanceof) because we want it to work with a range of\n// Apache Arrow versions at least 7.0.0 or above.\n// https://arrow.apache.org/docs/7.0/js/classes/Arrow_dom.Table.html\nexport function isArrowTable(value) {\n  return (\n    value &&\n    typeof value.getChild === \"function\" &&\n    typeof value.toArray === \"function\" &&\n    value.schema &&\n    Array.isArray(value.schema.fields)\n  );\n}\n\nexport function getArrowTableSchema(table) {\n  return table.schema.fields.map(getArrowFieldSchema);\n}\n\nfunction getArrowFieldSchema(field) {\n  return {\n    name: field.name,\n    type: getArrowType(field.type),\n    nullable: field.nullable,\n    databaseType: String(field.type)\n  };\n}\n\n// https://github.com/apache/arrow/blob/89f9a0948961f6e94f1ef5e4f310b707d22a3c11/js/src/enum.ts#L140-L141\nfunction getArrowType(type) {\n  switch (type.typeId) {\n    case 2: // Int\n      return \"integer\";\n    case 3: // Float\n    case 7: // Decimal\n      return \"number\";\n    case 4: // Binary\n    case 15: // FixedSizeBinary\n      return \"buffer\";\n    case 5: // Utf8\n      return \"string\";\n    case 6: // Bool\n      return \"boolean\";\n    case 8: // Date\n    case 9: // Time\n    case 10: // Timestamp\n      return \"date\";\n    case 12: // List\n    case 16: // FixedSizeList\n      return \"array\";\n    case 13: // Struct\n    case 14: // Union\n      return \"object\";\n    case 11: // Interval\n    case 17: // Map\n    default:\n      return \"other\";\n  }\n}\n\nexport async function loadArrow() {\n  return await import(`${cdn}${arrow.resolve()}`);\n}\n","import {isArqueroTable} from \"./arquero.js\";\nimport {getArrowTableSchema, isArrowTable, loadArrow} from \"./arrow.js\";\nimport {duckdb} from \"./dependencies.js\";\nimport {FileAttachment} from \"./fileAttachment.js\";\nimport {cdn} from \"./require.js\";\n\n// Adapted from https://observablehq.com/@cmudig/duckdb-client\n// Copyright 2021 CMU Data Interaction Group\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice,\n//    this list of conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice,\n//    this list of conditions and the following disclaimer in the documentation\n//    and/or other materials provided with the distribution.\n//\n// 3. Neither the name of the copyright holder nor the names of its contributors\n//    may be used to endorse or promote products derived from this software\n//    without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n// AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n// ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\n// LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n// SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n// INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n// CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n// ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n// POSSIBILITY OF SUCH DAMAGE.\n\nlet promise;\n\nexport class DuckDBClient {\n  constructor(db) {\n    Object.defineProperties(this, {\n      _db: {value: db}\n    });\n  }\n\n  async queryStream(query, params) {\n    const connection = await this._db.connect();\n    let reader, batch;\n    try {\n      if (params?.length > 0) {\n        const statement = await connection.prepare(query);\n        reader = await statement.send(...params);\n      } else {\n        reader = await connection.send(query);\n      }\n      batch = await reader.next();\n      if (batch.done) throw new Error(\"missing first batch\");\n    } catch (error) {\n      await connection.close();\n      throw error;\n    }\n    return {\n      schema: getArrowTableSchema(batch.value),\n      async *readRows() {\n        try {\n          while (!batch.done) {\n            yield batch.value.toArray();\n            batch = await reader.next();\n          }\n        } finally {\n          await connection.close();\n        }\n      }\n    };\n  }\n\n  async query(query, params) {\n    const result = await this.queryStream(query, params);\n    const results = [];\n    for await (const rows of result.readRows()) {\n      for (const row of rows) {\n        results.push(row);\n      }\n    }\n    results.schema = result.schema;\n    return results;\n  }\n\n  async queryRow(query, params) {\n    const result = await this.queryStream(query, params);\n    const reader = result.readRows();\n    try {\n      const {done, value} = await reader.next();\n      return done || !value.length ? null : value[0];\n    } finally {\n      await reader.return();\n    }\n  }\n\n  async sql(strings, ...args) {\n    return await this.query(strings.join(\"?\"), args);\n  }\n\n  queryTag(strings, ...params) {\n    return [strings.join(\"?\"), params];\n  }\n\n  escape(name) {\n    return `\"${name}\"`;\n  }\n\n  async describeTables() {\n    const tables = await this.query(`SHOW TABLES`);\n    return tables.map(({name}) => ({name}));\n  }\n\n  async describeColumns({table} = {}) {\n    const columns = await this.query(`DESCRIBE ${this.escape(table)}`);\n    return columns.map(({column_name, column_type, null: nullable}) => ({\n      name: column_name,\n      type: getDuckDBType(column_type),\n      nullable: nullable !== \"NO\",\n      databaseType: column_type\n    }));\n  }\n\n  static async of(sources = {}, config = {}) {\n    const db = await createDuckDB();\n    if (config.query?.castTimestampToDate === undefined) {\n      config = {...config, query: {...config.query, castTimestampToDate: true}};\n    }\n    if (config.query?.castBigIntToDouble === undefined) {\n      config = {...config, query: {...config.query, castBigIntToDouble: true}};\n    }\n    await db.open(config);\n    await Promise.all(\n      Object.entries(sources).map(async ([name, source]) => {\n        if (source instanceof FileAttachment) { // bare file\n          await insertFile(db, name, source);\n        } else if (isArrowTable(source)) { // bare arrow table\n          await insertArrowTable(db, name, source);\n        } else if (Array.isArray(source)) { // bare array of objects\n          await insertArray(db, name, source);\n        } else if (isArqueroTable(source)) {\n          await insertArqueroTable(db, name, source);\n        } else if (\"data\" in source) { // data + options\n          const {data, ...options} = source;\n          if (isArrowTable(data)) {\n            await insertArrowTable(db, name, data, options);\n          } else {\n            await insertArray(db, name, data, options);\n          }\n        } else if (\"file\" in source) { // file + options\n          const {file, ...options} = source;\n          await insertFile(db, name, file, options);\n        } else {\n          throw new Error(`invalid source: ${source}`);\n        }\n      })\n    );\n    return new DuckDBClient(db);\n  }\n}\n\nObject.defineProperty(DuckDBClient.prototype, \"dialect\", {\n  value: \"duckdb\"\n});\n\nasync function insertFile(database, name, file, options) {\n  const url = await file.url();\n  if (url.startsWith(\"blob:\")) {\n    const buffer = await file.arrayBuffer();\n    await database.registerFileBuffer(file.name, new Uint8Array(buffer));\n  } else {\n    await database.registerFileURL(file.name, new URL(url, location).href, 4); // duckdb.DuckDBDataProtocol.HTTP\n  }\n  const connection = await database.connect();\n  try {\n    switch (file.mimeType) {\n      case \"text/csv\":\n      case \"text/tab-separated-values\": {\n        return await connection.insertCSVFromPath(file.name, {\n          name,\n          schema: \"main\",\n          ...options\n        }).catch(async (error) => {\n          // If initial attempt to insert CSV resulted in a conversion\n          // error, try again, this time treating all columns as strings.\n          if (error.toString().includes(\"Could not convert\")) {\n            return await insertUntypedCSV(connection, file, name);\n          }\n          throw error;\n        });\n      }\n      case \"application/json\":\n        return await connection.insertJSONFromPath(file.name, {\n          name,\n          schema: \"main\",\n          ...options\n        });\n      default:\n        if (/\\.arrow$/i.test(file.name)) {\n          const buffer = new Uint8Array(await file.arrayBuffer());\n          return await connection.insertArrowFromIPCStream(buffer, {\n            name,\n            schema: \"main\",\n            ...options\n          });\n        }\n        if (/\\.parquet$/i.test(file.name)) {\n          return await connection.query(\n            `CREATE VIEW '${name}' AS SELECT * FROM parquet_scan('${file.name}')`\n          );\n        }\n        throw new Error(`unknown file type: ${file.mimeType}`);\n    }\n  } finally {\n    await connection.close();\n  }\n}\n\nasync function insertUntypedCSV(connection, file, name) {\n  const statement = await connection.prepare(\n    `CREATE TABLE '${name}' AS SELECT * FROM read_csv_auto(?, ALL_VARCHAR=TRUE)`\n  );\n  return await statement.send(file.name);\n}\n\nasync function insertArrowTable(database, name, table, options) {\n  const connection = await database.connect();\n  try {\n    await connection.insertArrowTable(table, {\n      name,\n      schema: \"main\",\n      ...options\n    });\n  } finally {\n    await connection.close();\n  }\n}\n\nasync function insertArqueroTable(database, name, source) {\n  // TODO When we have stdlib versioning and can upgrade Arquero to version 5,\n  // we can then call source.toArrow() directly, with insertArrowTable()\n  const arrow = await loadArrow();\n  const table = arrow.tableFromIPC(source.toArrowBuffer());\n  return await insertArrowTable(database, name, table);\n}\n\nasync function insertArray(database, name, array, options) {\n  const arrow = await loadArrow();\n  const table = arrow.tableFromJSON(array);\n  return await insertArrowTable(database, name, table, options);\n}\n\nasync function loadDuckDB() {\n  const module = await import(`${cdn}${duckdb.resolve()}`);\n  const bundle = await module.selectBundle({\n    mvp: {\n      mainModule: `${cdn}${duckdb.resolve(\"dist/duckdb-mvp.wasm\")}`,\n      mainWorker: `${cdn}${duckdb.resolve(\"dist/duckdb-browser-mvp.worker.js\")}`\n    },\n    eh: {\n      mainModule: `${cdn}${duckdb.resolve(\"dist/duckdb-eh.wasm\")}`,\n      mainWorker: `${cdn}${duckdb.resolve(\"dist/duckdb-browser-eh.worker.js\")}`\n    }\n  });\n  const logger = new module.ConsoleLogger();\n  return {module, bundle, logger};\n}\n\nasync function createDuckDB() {\n  if (promise === undefined) promise = loadDuckDB();\n  const {module, bundle, logger} = await promise;\n  const worker = await module.createWorker(bundle.mainWorker);\n  const db = new module.AsyncDuckDB(logger, worker);\n  await db.instantiate(bundle.mainModule);\n  return db;\n}\n\n// https://duckdb.org/docs/sql/data_types/overview\nfunction getDuckDBType(type) {\n  switch (type) {\n    case \"BIGINT\":\n    case \"HUGEINT\":\n    case \"UBIGINT\":\n      return \"bigint\";\n    case \"DOUBLE\":\n    case \"REAL\":\n    case \"FLOAT\":\n      return \"number\";\n    case \"INTEGER\":\n    case \"SMALLINT\":\n    case \"TINYINT\":\n    case \"USMALLINT\":\n    case \"UINTEGER\":\n    case \"UTINYINT\":\n      return \"integer\";\n    case \"BOOLEAN\":\n      return \"boolean\";\n    case \"DATE\":\n    case \"TIMESTAMP\":\n    case \"TIMESTAMP WITH TIME ZONE\":\n      return \"date\";\n    case \"VARCHAR\":\n    case \"UUID\":\n      return \"string\";\n    // case \"BLOB\":\n    // case \"INTERVAL\":\n    // case \"TIME\":\n    default:\n      if (/^DECIMAL\\(/.test(type)) return \"integer\";\n      return \"other\";\n  }\n}\n","import {greatest, reverse} from \"d3-array\";\nimport {FileAttachment} from \"./fileAttachment.js\";\nimport {isArqueroTable} from \"./arquero.js\";\nimport {isArrowTable, loadArrow} from \"./arrow.js\";\nimport {DuckDBClient} from \"./duckdb.js\";\n\nconst nChecks = 20; // number of values to check in each array\n\n// We support two levels of DatabaseClient. The simplest DatabaseClient\n// implements only the client.sql tagged template literal. More advanced\n// DatabaseClients implement client.query and client.queryStream, which support\n// streaming and abort, and the client.queryTag tagged template literal is used\n// to translate the contents of a SQL cell or Table cell into the appropriate\n// arguments for calling client.query or client.queryStream. For table cells, we\n// additionally require client.describeColumns. The client.describeTables method\n// is optional.\nexport function isDatabaseClient(value, mode) {\n  return (\n    value &&\n    (typeof value.sql === \"function\" ||\n      (typeof value.queryTag === \"function\" &&\n        (typeof value.query === \"function\" ||\n          typeof value.queryStream === \"function\"))) &&\n    (mode !== \"table\" || typeof value.describeColumns === \"function\") &&\n    value !== __query // dont match our internal helper\n  );\n}\n\n// Returns true if the value is a typed array (for a single-column table), or if\n// its an array. In the latter case, the elements of the array must be\n// consistently typed: either plain objects or primitives or dates.\nexport function isDataArray(value) {\n  return (\n    (Array.isArray(value) &&\n      (isQueryResultSetSchema(value.schema) ||\n        isQueryResultSetColumns(value.columns) ||\n        arrayContainsObjects(value) ||\n        arrayContainsPrimitives(value) ||\n        arrayContainsDates(value))) ||\n    isTypedArray(value)\n  );\n}\n\n// Given an array, checks that the given value is an array that does not contain\n// any primitive values (at least for the first few values that we check), and\n// that the first object contains enumerable keys (see computeSchema for how we\n// infer the columns). We assume that the contents of the table are homogenous,\n// but we dont currently enforce this.\n// https://observablehq.com/@observablehq/database-client-specification#1\nfunction arrayContainsObjects(value) {\n  const n = Math.min(nChecks, value.length);\n  for (let i = 0; i < n; ++i) {\n    const v = value[i];\n    if (v === null || typeof v !== \"object\") return false;\n  }\n  return n > 0 && objectHasEnumerableKeys(value[0]);\n}\n\n// Using a for-in loop here means that we can abort after finding at least one\n// enumerable key (whereas Object.keys would require materializing the array of\n// all keys, which would be considerably slower if the value has many keys!).\n// This function assumes that value is an object; see arrayContainsObjects.\nfunction objectHasEnumerableKeys(value) {\n  for (const _ in value) return true;\n  return false;\n}\n\nfunction isQueryResultSetSchema(schemas) {\n  return (\n    Array.isArray(schemas) &&\n    schemas.every(isColumnSchema)\n  );\n}\n\nfunction isQueryResultSetColumns(columns) {\n  return (Array.isArray(columns) && columns.every((name) => typeof name === \"string\"));\n}\n\nfunction isColumnSchema(schema) {\n  return schema && typeof schema.name === \"string\" && typeof schema.type === \"string\";\n}\n\n// Returns true if the value represents an array of primitives (i.e., a\n// single-column table). This should only be passed values for which\n// isDataArray returns true.\nexport function arrayIsPrimitive(value) {\n  return (\n    isTypedArray(value) ||\n    arrayContainsPrimitives(value) ||\n    arrayContainsDates(value)\n  );\n}\n\n// Given an array, checks that the first n elements are primitives (number,\n// string, boolean, bigint) of a consistent type.\nfunction arrayContainsPrimitives(value) {\n  const n = Math.min(nChecks, value.length);\n  if (!(n > 0)) return false;\n  let type;\n  let hasPrimitive = false; // ensure we encounter 1+ primitives\n  for (let i = 0; i < n; ++i) {\n    const v = value[i];\n    if (v == null) continue; // ignore null and undefined\n    const t = typeof v;\n    if (type === undefined) {\n      switch (t) {\n        case \"number\":\n        case \"boolean\":\n        case \"string\":\n        case \"bigint\":\n          type = t;\n          break;\n        default:\n          return false;\n      }\n    } else if (t !== type) {\n      return false;\n    }\n    hasPrimitive = true;\n  }\n  return hasPrimitive;\n}\n\n// Given an array, checks that the first n elements are dates.\nfunction arrayContainsDates(value) {\n  const n = Math.min(nChecks, value.length);\n  if (!(n > 0)) return false;\n  let hasDate = false; // ensure we encounter 1+ dates\n  for (let i = 0; i < n; ++i) {\n    const v = value[i];\n    if (v == null) continue; // ignore null and undefined\n    if (!(v instanceof Date)) return false;\n    hasDate = true;\n  }\n  return hasDate;\n}\n\nfunction isTypedArray(value) {\n  return (\n    value instanceof Int8Array ||\n    value instanceof Int16Array ||\n    value instanceof Int32Array ||\n    value instanceof Uint8Array ||\n    value instanceof Uint8ClampedArray ||\n    value instanceof Uint16Array ||\n    value instanceof Uint32Array ||\n    value instanceof Float32Array ||\n    value instanceof Float64Array\n  );\n}\n\n// __query is used by table cells; __query.sql is used by SQL cells.\nexport const __query = Object.assign(\n  async (source, operations, invalidation, name) => {\n    source = await loadTableDataSource(await source, name);\n    if (isDatabaseClient(source)) return evaluateQuery(source, makeQueryTemplate(operations, source), invalidation);\n    if (isDataArray(source)) return __table(source, operations);\n    if (!source) throw new Error(\"missing data source\");\n    throw new Error(\"invalid data source\");\n  },\n  {\n    sql(source, invalidation, name) {\n      return async function () {\n        return evaluateQuery(await loadSqlDataSource(await source, name), arguments, invalidation);\n      };\n    }\n  }\n);\n\nexport async function loadDataSource(source, mode, name) {\n  switch (mode) {\n    case \"chart\": return loadChartDataSource(source);\n    case \"table\": return loadTableDataSource(source, name);\n    case \"sql\": return loadSqlDataSource(source, name);\n  }\n  return source;\n}\n\n// We use a weak map to cache loaded data sources by key so that we dont have\n// to e.g. create separate SQLiteDatabaseClients every time were querying the\n// same SQLite file attachment. Since this is a weak map, unused references will\n// be garbage collected when they are no longer desired. Note: the name should\n// be consistent, as it is not part of the cache key!\nfunction sourceCache(loadSource) {\n  const cache = new WeakMap();\n  return (source, name) => {\n    if (!source || typeof source !== \"object\") throw new Error(\"invalid data source\");\n    let promise = cache.get(source);\n    if (!promise || (isDataArray(source) && source.length !== promise._numRows)) {\n      // Warning: do not await here! We need to populate the cache synchronously.\n      promise = loadSource(source, name);\n      promise._numRows = source.length; // This will be undefined for DatabaseClients\n      cache.set(source, promise);\n    }\n    return promise;\n  };\n}\n\nconst loadChartDataSource = sourceCache(async (source) => {\n  if (source instanceof FileAttachment) {\n    switch (source.mimeType) {\n      case \"text/csv\": return source.csv({typed: \"auto\"});\n      case \"text/tab-separated-values\": return source.tsv({typed: \"auto\"});\n      case \"application/json\": return source.json();\n    }\n    throw new Error(`unsupported file type: ${source.mimeType}`);\n  }\n  return source;\n});\n\nconst loadTableDataSource = sourceCache(async (source, name) => {\n  if (source instanceof FileAttachment) {\n    switch (source.mimeType) {\n      case \"text/csv\": return source.csv();\n      case \"text/tab-separated-values\": return source.tsv();\n      case \"application/json\": return source.json();\n      case \"application/x-sqlite3\": return source.sqlite();\n    }\n    if (/\\.(arrow|parquet)$/i.test(source.name)) return loadDuckDBClient(source, name);\n    throw new Error(`unsupported file type: ${source.mimeType}`);\n  }\n  if (isArrowTable(source) || isArqueroTable(source)) return loadDuckDBClient(source, name);\n  if (isDataArray(source) && arrayIsPrimitive(source))\n    return Array.from(source, (value) => ({value}));\n  return source;\n});\n\nconst loadSqlDataSource = sourceCache(async (source, name) => {\n  if (source instanceof FileAttachment) {\n    switch (source.mimeType) {\n      case \"text/csv\":\n      case \"text/tab-separated-values\":\n      case \"application/json\": return loadDuckDBClient(source, name);\n      case \"application/x-sqlite3\": return source.sqlite();\n    }\n    if (/\\.(arrow|parquet)$/i.test(source.name)) return loadDuckDBClient(source, name);\n    throw new Error(`unsupported file type: ${source.mimeType}`);\n  }\n  if (isDataArray(source)) return loadDuckDBClient(await asArrowTable(source, name), name);\n  if (isArrowTable(source) || isArqueroTable(source)) return loadDuckDBClient(source, name);\n  return source;\n});\n\nasync function asArrowTable(array, name) {\n  const arrow = await loadArrow();\n  return arrayIsPrimitive(array)\n    ? arrow.tableFromArrays({[name]: array})\n    : arrow.tableFromJSON(array);\n}\n\nfunction loadDuckDBClient(\n  source,\n  name = source instanceof FileAttachment\n    ? getFileSourceName(source)\n    : \"__table\"\n) {\n  return DuckDBClient.of({[name]: source});\n}\n\nfunction getFileSourceName(file) {\n  return file.name\n    .replace(/@\\d+(?=\\.|$)/, \"\") // strip Observable file version number\n    .replace(/\\.\\w+$/, \"\"); // strip file extension\n}\n\nasync function evaluateQuery(source, args, invalidation) {\n  if (!source) throw new Error(\"missing data source\");\n\n  // If this DatabaseClient supports abort and streaming, use that.\n  if (typeof source.queryTag === \"function\") {\n    const abortController = new AbortController();\n    const options = {signal: abortController.signal};\n    invalidation.then(() => abortController.abort(\"invalidated\"));\n    if (typeof source.queryStream === \"function\") {\n      return accumulateQuery(\n        source.queryStream(...source.queryTag.apply(source, args), options)\n      );\n    }\n    if (typeof source.query === \"function\") {\n      return source.query(...source.queryTag.apply(source, args), options);\n    }\n  }\n\n  // Otherwise, fallback to the basic sql tagged template literal.\n  if (typeof source.sql === \"function\") {\n    return source.sql.apply(source, args);\n  }\n\n  // TODO: test if source is a file attachment, and support CSV etc.\n  throw new Error(\"source does not implement query, queryStream, or sql\");\n}\n\n// Generator function that yields accumulated query results client.queryStream\nasync function* accumulateQuery(queryRequest) {\n  let then = performance.now();\n  const queryResponse = await queryRequest;\n  const values = [];\n  values.done = false;\n  values.error = null;\n  values.schema = queryResponse.schema;\n  try {\n    for await (const rows of queryResponse.readRows()) {\n      if (performance.now() - then > 150 && values.length > 0) {\n        yield values;\n        then = performance.now();\n      }\n      for (const value of rows) {\n        values.push(value);\n      }\n    }\n    values.done = true;\n    yield values;\n  } catch (error) {\n    values.error = error;\n    yield values;\n  }\n}\n\n/**\n * Returns a SQL query in the form [[parts], ...params] where parts is an array\n * of sub-strings and params are the parameter values to be inserted between each\n * sub-string.\n */\nexport function makeQueryTemplate(operations, source) {\n  const escaper =\n    typeof source.escape === \"function\" ? source.escape : (i) => i;\n  const {select, from, filter, sort, slice} = operations;\n  if (!from.table)\n    throw new Error(\"missing from table\");\n  if (select.columns && select.columns.length === 0)\n    throw new Error(\"at least one column must be selected\");\n  const names = new Map(operations.names?.map(({column, name}) => [column, name]));\n  const columns = select.columns ? select.columns.map((column) =>  {\n    const override = names.get(column);\n    return override ? `${escaper(column)} AS ${escaper(override)}` : escaper(column);\n  }).join(\", \") : \"*\";\n  const args = [\n    [`SELECT ${columns} FROM ${formatTable(from.table, escaper)}`]\n  ];\n  for (let i = 0; i < filter.length; ++i) {\n    appendSql(i ? `\\nAND ` : `\\nWHERE `, args);\n    appendWhereEntry(filter[i], args, escaper);\n  }\n  for (let i = 0; i < sort.length; ++i) {\n    appendSql(i ? `, ` : `\\nORDER BY `, args);\n    appendOrderBy(sort[i], args, escaper);\n  }\n  if (source.dialect === \"mssql\" || source.dialect === \"oracle\") {\n    if (slice.to !== null || slice.from !== null) {\n      if (!sort.length) {\n        if (!select.columns)\n          throw new Error(\n              \"at least one column must be explicitly specified. Received '*'.\"\n          );\n        appendSql(`\\nORDER BY `, args);\n        appendOrderBy(\n          {column: select.columns[0], direction: \"ASC\"},\n          args,\n          escaper\n        );\n      }\n      appendSql(`\\nOFFSET ${slice.from || 0} ROWS`, args);\n      appendSql(\n        `\\nFETCH NEXT ${\n          slice.to !== null ? slice.to - (slice.from || 0) : 1e9\n        } ROWS ONLY`,\n        args\n      );\n    }\n  } else {\n    if (slice.to !== null || slice.from !== null) {\n      appendSql(\n        `\\nLIMIT ${slice.to !== null ? slice.to - (slice.from || 0) : 1e9}`,\n        args\n      );\n    }\n    if (slice.from !== null) {\n      appendSql(` OFFSET ${slice.from}`, args);\n    }\n  }\n  return args;\n}\n\nfunction formatTable(table, escaper) {\n  if (typeof table === \"object\") { // i.e., not a bare string specifier\n    let from = \"\";\n    if (table.database != null) from += escaper(table.database) + \".\";\n    if (table.schema != null) from += escaper(table.schema) + \".\";\n    from += escaper(table.table);\n    return from;\n  } else {\n    return escaper(table);\n  }\n}\n\nfunction appendSql(sql, args) {\n  const strings = args[0];\n  strings[strings.length - 1] += sql;\n}\n\nfunction appendOrderBy({column, direction}, args, escaper) {\n  appendSql(`${escaper(column)} ${direction.toUpperCase()}`, args);\n}\n\nfunction appendWhereEntry({type, operands}, args, escaper) {\n  if (operands.length < 1) throw new Error(\"Invalid operand length\");\n\n  // Unary operations\n  // We treat `v` and `nv` as `NULL` and `NOT NULL` unary operations in SQL,\n  // since the database already validates column types.\n  if (operands.length === 1 || type === \"v\" || type === \"nv\") {\n    appendOperand(operands[0], args, escaper);\n    switch (type) {\n      case \"n\":\n      case \"nv\":\n        appendSql(` IS NULL`, args);\n        return;\n      case \"nn\":\n      case \"v\":\n        appendSql(` IS NOT NULL`, args);\n        return;\n      default:\n        throw new Error(\"Invalid filter operation\");\n    }\n  }\n\n  // Binary operations\n  if (operands.length === 2) {\n    if ([\"in\", \"nin\"].includes(type)) {\n      // Fallthrough to next parent block.\n    } else if ([\"c\", \"nc\"].includes(type)) {\n      // TODO: Case (in)sensitive?\n      appendOperand(operands[0], args, escaper);\n      switch (type) {\n        case \"c\":\n          appendSql(` LIKE `, args);\n          break;\n        case \"nc\":\n          appendSql(` NOT LIKE `, args);\n          break;\n      }\n      appendOperand(likeOperand(operands[1]), args, escaper);\n      return;\n    } else {\n      appendOperand(operands[0], args, escaper);\n      switch (type) {\n        case \"eq\":\n          appendSql(` = `, args);\n          break;\n        case \"ne\":\n          appendSql(` <> `, args);\n          break;\n        case \"gt\":\n          appendSql(` > `, args);\n          break;\n        case \"lt\":\n          appendSql(` < `, args);\n          break;\n        case \"gte\":\n          appendSql(` >= `, args);\n          break;\n        case \"lte\":\n          appendSql(` <= `, args);\n          break;\n        default:\n          throw new Error(\"Invalid filter operation\");\n      }\n      appendOperand(operands[1], args, escaper);\n      return;\n    }\n  }\n\n  // List operations\n  appendOperand(operands[0], args, escaper);\n  switch (type) {\n    case \"in\":\n      appendSql(` IN (`, args);\n      break;\n    case \"nin\":\n      appendSql(` NOT IN (`, args);\n      break;\n    default:\n      throw new Error(\"Invalid filter operation\");\n  }\n  appendListOperands(operands.slice(1), args);\n  appendSql(\")\", args);\n}\n\nfunction appendOperand(o, args, escaper) {\n  if (o.type === \"column\") {\n    appendSql(escaper(o.value), args);\n  } else {\n    args.push(o.value);\n    args[0].push(\"\");\n  }\n}\n\n// TODO: Support column operands here?\nfunction appendListOperands(ops, args) {\n  let first = true;\n  for (const op of ops) {\n    if (first) first = false;\n    else appendSql(\",\", args);\n    args.push(op.value);\n    args[0].push(\"\");\n  }\n}\n\nfunction likeOperand(operand) {\n  return {...operand, value: `%${operand.value}%`};\n}\n\n// Comparator function that moves null values (undefined, null, NaN) to the\n// end of the array.\nfunction defined(a, b) {\n  return (a == null || !(a >= a)) - (b == null || !(b >= b));\n}\n\n// Comparator function that sorts values in ascending order, with null values at\n// the end.\nfunction ascendingDefined(a, b) {\n  return defined(a, b) || (a < b ? -1 : a > b ? 1 : 0);\n}\n\n// Comparator function that sorts values in descending order, with null values\n// at the end.\nfunction descendingDefined(a, b) {\n  return defined(a, b) || (a > b ? -1 : a < b ? 1 : 0);\n}\n\n// Functions for checking type validity\nconst isValidNumber = (value) => typeof value === \"number\" && !Number.isNaN(value);\nconst isValidInteger = (value) => Number.isInteger(value) && !Number.isNaN(value);\nconst isValidString = (value) => typeof value === \"string\";\nconst isValidBoolean = (value) => typeof value === \"boolean\";\nconst isValidBigint = (value) => typeof value === \"bigint\";\nconst isValidDate = (value) => value instanceof Date && !isNaN(value);\nconst isValidBuffer = (value) => value instanceof ArrayBuffer;\nconst isValidArray = (value) => Array.isArray(value);\nconst isValidObject = (value) => typeof value === \"object\" && value !== null;\nconst isValidOther = (value) => value != null;\n\n// Function to get the correct validity checking function based on type\nexport function getTypeValidator(colType) {\n  switch (colType) {\n    case \"string\":\n      return isValidString;\n    case \"bigint\":\n      return isValidBigint;\n    case \"boolean\":\n      return isValidBoolean;\n    case \"number\":\n      return isValidNumber;\n    case \"integer\":\n      return isValidInteger;\n    case \"date\":\n      return isValidDate;\n    case \"buffer\":\n      return isValidBuffer;\n    case \"array\":\n      return isValidArray;\n    case \"object\":\n      return isValidObject;\n    case \"other\":\n    default:\n      return isValidOther;\n  }\n}\n\n// Accepts dates in the form of ISOString and LocaleDateString, with or without time\nconst DATE_TEST = /^(([-+]\\d{2})?\\d{4}(-\\d{2}(-\\d{2}))|(\\d{1,2})\\/(\\d{1,2})\\/(\\d{2,4}))([T ]\\d{2}:\\d{2}(:\\d{2}(\\.\\d{3})?)?(Z|[-+]\\d{2}:\\d{2})?)?$/;\n\nexport function coerceToType(value, type) {\n  switch (type) {\n    case \"string\":\n      return typeof value === \"string\" || value == null ? value : String(value);\n    case \"boolean\":\n      if (typeof value === \"string\") {\n        const trimValue = value.trim().toLowerCase();\n        return trimValue === \"true\"\n          ? true\n          : trimValue === \"false\"\n          ? false\n          : null;\n      }\n      return typeof value === \"boolean\" || value == null\n        ? value\n        : Boolean(value);\n    case \"bigint\":\n      return typeof value === \"bigint\" || value == null\n        ? value\n        : Number.isInteger(typeof value === \"string\" && !value.trim() ? NaN : +value)\n        ? BigInt(value) // eslint-disable-line no-undef\n        : undefined;\n    case \"integer\": // not a target type for coercion, but can be inferred\n    case \"number\": {\n      return typeof value === \"number\"\n        ? value\n        : value == null || (typeof value === \"string\" && !value.trim())\n        ? NaN\n        : Number(value);\n    }\n    case \"date\": {\n      if (value instanceof Date || value == null) return value;\n      if (typeof value === \"number\") return new Date(value);\n      const trimValue = String(value).trim();\n      if (typeof value === \"string\" && !trimValue) return null;\n      return new Date(DATE_TEST.test(trimValue) ? trimValue : NaN);\n    }\n    case \"array\":\n    case \"object\":\n    case \"buffer\":\n    case \"other\":\n      return value;\n    default:\n      throw new Error(`Unable to coerce to type: ${type}`);\n  }\n}\n\nexport function getSchema(source) {\n  const {columns} = source;\n  let {schema} = source;\n  if (!isQueryResultSetSchema(schema)) {\n    schema = inferSchema(source, isQueryResultSetColumns(columns) ? columns : undefined);\n    return {schema, inferred: true};\n  }\n  return {schema, inferred: false};\n}\n\n// This function infers a schema from the source data, if one doesn't already\n// exist, and merges type assertions into that schema. If the schema was\n// inferred or if there are type assertions, it then coerces the rows in the\n// source data to the types specified in the schema.\nfunction applyTypes(source, operations) {\n  const input = source;\n  let {schema, inferred} = getSchema(source);\n  const types = new Map(schema.map(({name, type}) => [name, type]));\n  if (operations.types) {\n    for (const {name, type} of operations.types) {\n      types.set(name, type);\n      // update schema with user-selected type\n      if (schema === input.schema) schema = schema.slice(); // copy on write\n      const colIndex = schema.findIndex((col) => col.name === name);\n      if (colIndex > -1) schema[colIndex] = {...schema[colIndex], type};\n    }\n    source = source.map(d => coerceRow(d, types, schema));\n  } else if (inferred) {\n    // Coerce data according to new schema, unless that happened due to\n    // operations.types, above.\n    source = source.map(d => coerceRow(d, types, schema));\n  }\n  return {source, schema};\n}\n\nfunction applyNames(source, operations) {\n  if (!operations.names) return source;\n  const overridesByName = new Map(operations.names.map((n) => [n.column, n]));\n  return source.map((d) =>\n    Object.fromEntries(Object.keys(d).map((k) => {\n      const override = overridesByName.get(k);\n      return [override?.name ?? k, d[k]];\n    }))\n  );\n}\n\n// This function applies table cell operations to an in-memory table (array of\n// objects); it should be equivalent to the corresponding SQL query. TODO Use\n// DuckDBClient for data arrays, too, and then we wouldnt need our own __table\n// function to do table operations on in-memory data?\nexport function __table(source, operations) {\n  const errors = new Map();\n  const input = source;\n  const typed = applyTypes(source, operations);\n  source = typed.source;\n  let schema = typed.schema;\n  if (operations.derive) {\n    // Derived columns may depend on coerced values from the original data source,\n    // so we must evaluate derivations after the initial inference and coercion\n    // step.\n    const derivedSource = [];\n    operations.derive.map(({name, value}) => {\n      let columnErrors = [];\n      // Derived column formulas may reference renamed columns, so we must\n      // compute derivations on the renamed source. However, we don't modify the\n      // source itself with renamed names until after the other operations are\n      // applied, because operations like filter and sort reference original\n      // column names.\n      // TODO Allow derived columns to reference other derived columns.\n      applyNames(source, operations).map((row, index) => {\n        let resolved;\n        try {\n          // TODO Support referencing `index` and `rows` in the derive function.\n          resolved = value(row);\n        } catch (error) {\n          columnErrors.push({index, error});\n          resolved = undefined;\n        }\n        if (derivedSource[index]) {\n          derivedSource[index] = {...derivedSource[index], [name]: resolved};\n        } else {\n          derivedSource.push({[name]: resolved});\n        }\n      });\n      if (columnErrors.length) errors.set(name, columnErrors);\n    });\n    // Since derived columns are untyped by default, we do a pass of type\n    // inference and coercion after computing the derived values.\n    const typedDerived = applyTypes(derivedSource, operations);\n    // Merge derived source and schema with the source dataset.\n    source = source.map((row, i) => ({...row, ...typedDerived.source[i]}));\n    schema = [...schema, ...typedDerived.schema];\n  }\n  for (const {type, operands} of operations.filter) {\n    const [{value: column}] = operands;\n    const values = operands.slice(1).map(({value}) => value);\n    switch (type) {\n      // valid (matches the column type)\n      case \"v\": {\n        const [colType] = values;\n        const isValid = getTypeValidator(colType);\n        source = source.filter(d => isValid(d[column]));\n        break;\n      }\n      // not valid (doesn't match the column type)\n      case \"nv\": {\n        const [colType] = values;\n        const isValid = getTypeValidator(colType);\n        source = source.filter(d => !isValid(d[column]));\n        break;\n      }\n      case \"eq\": {\n        const [value] = values;\n        if (value instanceof Date) {\n          const time = +value; // compare as primitive\n          source = source.filter((d) => +d[column] === time);\n        } else {\n          source = source.filter((d) => d[column] === value);\n        }\n        break;\n      }\n      case \"ne\": {\n        const [value] = values;\n        source = source.filter((d) => d[column] !== value);\n        break;\n      }\n      case \"c\": {\n        const [value] = values;\n        source = source.filter(\n          (d) => typeof d[column] === \"string\" && d[column].includes(value)\n        );\n        break;\n      }\n      case \"nc\": {\n        const [value] = values;\n        source = source.filter(\n          (d) => typeof d[column] === \"string\" && !d[column].includes(value)\n        );\n        break;\n      }\n      case \"in\": {\n        const set = new Set(values); // TODO support dates?\n        source = source.filter((d) => set.has(d[column]));\n        break;\n      }\n      case \"nin\": {\n        const set = new Set(values); // TODO support dates?\n        source = source.filter((d) => !set.has(d[column]));\n        break;\n      }\n      case \"n\": {\n        source = source.filter((d) => d[column] == null);\n        break;\n      }\n      case \"nn\": {\n        source = source.filter((d) => d[column] != null);\n        break;\n      }\n      case \"lt\": {\n        const [value] = values;\n        source = source.filter((d) => d[column] < value);\n        break;\n      }\n      case \"lte\": {\n        const [value] = values;\n        source = source.filter((d) => d[column] <= value);\n        break;\n      }\n      case \"gt\": {\n        const [value] = values;\n        source = source.filter((d) => d[column] > value);\n        break;\n      }\n      case \"gte\": {\n        const [value] = values;\n        source = source.filter((d) => d[column] >= value);\n        break;\n      }\n      default:\n        throw new Error(`unknown filter type: ${type}`);\n    }\n  }\n  for (const {column, direction} of reverse(operations.sort)) {\n    const compare = direction === \"desc\" ? descendingDefined : ascendingDefined;\n    if (source === input) source = source.slice(); // defensive copy\n    source.sort((a, b) => compare(a[column], b[column]));\n  }\n  let {from, to} = operations.slice;\n  from = from == null ? 0 : Math.max(0, from);\n  to = to == null ? Infinity : Math.max(0, to);\n  if (from > 0 || to < Infinity) {\n    source = source.slice(Math.max(0, from), Math.max(0, to));\n  }\n  // Preserve the schema for all columns.\n  let fullSchema = schema.slice();\n  if (operations.select.columns) {\n    if (schema) {\n      const schemaByName = new Map(schema.map((s) => [s.name, s]));\n      schema = operations.select.columns.map((c) => schemaByName.get(c));\n    }\n    source = source.map((d) =>\n      Object.fromEntries(operations.select.columns.map((c) => [c, d[c]]))\n    );\n  }\n  if (operations.names) {\n    const overridesByName = new Map(operations.names.map((n) => [n.column, n]));\n    if (schema) {\n      schema = schema.map((s) => {\n        const override = overridesByName.get(s.name);\n        return ({...s, ...(override ? {name: override.name} : null)});\n      });\n    }\n    if (fullSchema) {\n      fullSchema = fullSchema.map((s) => {\n        const override = overridesByName.get(s.name);\n        return ({...s, ...(override ? {name: override.name} : null)});\n      });\n    }\n    source = applyNames(source, operations);\n  }\n  if (source !== input) {\n    if (schema) source.schema = schema;\n  }\n  source.fullSchema = fullSchema;\n  source.errors = errors;\n  return source;\n}\n\nexport function coerceRow(object, types, schema) {\n  const coerced = {};\n  for (const col of schema) {\n    const type = types.get(col.name);\n    const value = object[col.name];\n    coerced[col.name] = type === \"raw\" ? value : coerceToType(value, type);\n  }\n  return coerced;\n}\n\nfunction createTypeCount() {\n  return {\n    boolean: 0,\n    integer: 0,\n    number: 0,\n    date: 0,\n    string: 0,\n    array: 0,\n    object: 0,\n    bigint: 0,\n    buffer: 0,\n    defined: 0\n  };\n}\n\n// Caution: the order below matters!  The first one that passes the 90% test\n// should be the one that we chose, and therefore these types should be listed\n// from most specific to least specific.\nconst types = [\n  \"boolean\",\n  \"integer\",\n  \"number\",\n  \"date\",\n  \"bigint\",\n  \"array\",\n  \"object\",\n  \"buffer\"\n  // Note: \"other\" and \"string\" are intentionally omitted; see below!\n];\n\n// We need to show *all* keys present in the array of Objects\nfunction getAllKeys(rows) {\n  const keys = new Set();\n  for (const row of rows) {\n    // avoid crash if row is null or undefined\n    if (row) {\n      // only enumerable properties\n      for (const key in row) {\n        // only own properties\n        if (Object.prototype.hasOwnProperty.call(row, key)) {\n          // unique properties, in the order they appear\n          keys.add(key);\n        }\n      }\n    }\n  }\n  return Array.from(keys);\n}\n\nexport function inferSchema(source, columns = getAllKeys(source)) {\n  const schema = [];\n  const sampleSize = 100;\n  const sample = source.slice(0, sampleSize);\n  const typeCounts = {};\n  for (const col of columns) {\n    const colCount = typeCounts[col] = createTypeCount();\n    for (const d of sample) {\n      let value = d[col];\n      if (value == null) continue;\n      const type = typeof value;\n      if (type !== \"string\") {\n        ++colCount.defined;\n        if (Array.isArray(value)) ++colCount.array;\n        else if (value instanceof Date) ++colCount.date;\n        else if (value instanceof ArrayBuffer) ++colCount.buffer;\n        else if (type === \"number\") {\n          ++colCount.number;\n          if (Number.isInteger(value)) ++colCount.integer;\n        }\n        // bigint, boolean, or object\n        else if (type in colCount) ++colCount[type];\n      } else {\n        value = value.trim();\n        if (!value) continue;\n        ++colCount.defined;\n        ++colCount.string;\n        if (/^(true|false)$/i.test(value)) {\n          ++colCount.boolean;\n        } else if (value && !isNaN(value)) {\n          ++colCount.number;\n          if (Number.isInteger(+value)) ++colCount.integer;\n        } else if (DATE_TEST.test(value)) ++colCount.date;\n      }\n    }\n    // Chose the non-string, non-other type with the greatest count that is also\n    // 90%; or if no such type meets that criterion, fallback to string if\n    // 90%; and lastly fallback to other.\n    const minCount = Math.max(1, colCount.defined * 0.9);\n    const type =\n      greatest(types, (type) =>\n        colCount[type] >= minCount ? colCount[type] : NaN\n      ) ?? (colCount.string >= minCount ? \"string\" : \"other\");\n    schema.push({\n      name: col,\n      type: type,\n      inferred: type\n    });\n  }\n  return schema;\n}\n","export class Workbook {\n  constructor(workbook) {\n    Object.defineProperties(this, {\n      _: {value: workbook},\n      sheetNames: {\n        value: workbook.worksheets.map((s) => s.name),\n        enumerable: true\n      }\n    });\n  }\n  sheet(name, options) {\n    const sname =\n      typeof name === \"number\"\n        ? this.sheetNames[name]\n        : this.sheetNames.includes((name += \"\"))\n        ? name\n        : null;\n    if (sname == null) throw new Error(`Sheet not found: ${name}`);\n    const sheet = this._.getWorksheet(sname);\n    return extract(sheet, options);\n  }\n}\n\nfunction extract(sheet, {range, headers} = {}) {\n  let [[c0, r0], [c1, r1]] = parseRange(range, sheet);\n  const headerRow = headers ? sheet._rows[r0++] : null;\n  let names = new Set([\"#\"]);\n  for (let n = c0; n <= c1; n++) {\n    const value = headerRow ? valueOf(headerRow.findCell(n + 1)) : null;\n    let name = (value && value + \"\") || toColumn(n);\n    while (names.has(name)) name += \"_\";\n    names.add(name);\n  }\n  names = new Array(c0).concat(Array.from(names));\n\n  const output = new Array(r1 - r0 + 1);\n  for (let r = r0; r <= r1; r++) {\n    const row = (output[r - r0] = Object.create(null, {\"#\": {value: r + 1}}));\n    const _row = sheet.getRow(r + 1);\n    if (_row.hasValues)\n      for (let c = c0; c <= c1; c++) {\n        const value = valueOf(_row.findCell(c + 1));\n        if (value != null) row[names[c + 1]] = value;\n      }\n  }\n\n  output.columns = names.filter(() => true); // Filter sparse columns\n  return output;\n}\n\nfunction valueOf(cell) {\n  if (!cell) return;\n  const {value} = cell;\n  if (value && typeof value === \"object\" && !(value instanceof Date)) {\n    if (value.formula || value.sharedFormula) {\n      return value.result && value.result.error ? NaN : value.result;\n    }\n    if (value.richText) {\n      return richText(value);\n    }\n    if (value.text) {\n      let {text} = value;\n      if (text.richText) text = richText(text);\n      return value.hyperlink && value.hyperlink !== text\n        ? `${value.hyperlink} ${text}`\n        : text;\n    }\n    return value;\n  }\n  return value;\n}\n\nfunction richText(value) {\n  return value.richText.map((d) => d.text).join(\"\");\n}\n\nfunction parseRange(specifier = \":\", {columnCount, rowCount}) {\n  specifier += \"\";\n  if (!specifier.match(/^[A-Z]*\\d*:[A-Z]*\\d*$/))\n    throw new Error(\"Malformed range specifier\");\n  const [[c0 = 0, r0 = 0], [c1 = columnCount - 1, r1 = rowCount - 1]] =\n    specifier.split(\":\").map(fromCellReference);\n  return [\n    [c0, r0],\n    [c1, r1]\n  ];\n}\n\n// Returns the default column name for a zero-based column index.\n// For example: 0 -> \"A\", 1 -> \"B\", 25 -> \"Z\", 26 -> \"AA\", 27 -> \"AB\".\nfunction toColumn(c) {\n  let sc = \"\";\n  c++;\n  do {\n    sc = String.fromCharCode(64 + (c % 26 || 26)) + sc;\n  } while ((c = Math.floor((c - 1) / 26)));\n  return sc;\n}\n\n// Returns the zero-based indexes from a cell reference.\n// For example: \"A1\" -> [0, 0], \"B2\" -> [1, 1], \"AA10\" -> [26, 9].\nfunction fromCellReference(s) {\n  const [, sc, sr] = s.match(/^([A-Z]*)(\\d*)$/);\n  let c = 0;\n  if (sc)\n    for (let i = 0; i < sc.length; i++)\n      c += Math.pow(26, sc.length - i - 1) * (sc.charCodeAt(i) - 64);\n  return [c ? c - 1 : undefined, sr ? +sr - 1 : undefined];\n}\n","import {autoType, csvParse, csvParseRows, tsvParse, tsvParseRows} from \"d3-dsv\";\nimport {arrow4, arrow9, arrow11, jszip, exceljs} from \"./dependencies.js\";\nimport {cdn, requireDefault} from \"./require.js\";\nimport {SQLiteDatabaseClient} from \"./sqlite.js\";\nimport {inferSchema, coerceRow} from \"./table.js\";\nimport {Workbook} from \"./xlsx.js\";\n\nasync function remote_fetch(file) {\n  const response = await fetch(await file.url());\n  if (!response.ok) throw new Error(`Unable to load file: ${file.name}`);\n  return response;\n}\n\nexport function enforceSchema(source, schema) {\n  const types = new Map(schema.map(({name, type}) => [name, type]));\n  return Object.assign(source.map(d => coerceRow(d, types, schema)), {schema});\n}\n\nasync function dsv(file, delimiter, {array = false, typed = false} = {}) {\n  const text = await file.text();\n  const parse = (delimiter === \"\\t\"\n    ? (array ? tsvParseRows : tsvParse)\n    : (array ? csvParseRows : csvParse));\n  if (typed === \"auto\" && !array) {\n    const source = parse(text);\n    return enforceSchema(source, inferSchema(source, source.columns));\n  }\n  return parse(text, typed && autoType);\n}\n\nexport class AbstractFile {\n  constructor(name, mimeType) {\n    Object.defineProperty(this, \"name\", {value: name, enumerable: true});\n    if (mimeType !== undefined) Object.defineProperty(this, \"mimeType\", {value: mimeType + \"\", enumerable: true});\n  }\n  async blob() {\n    return (await remote_fetch(this)).blob();\n  }\n  async arrayBuffer() {\n    return (await remote_fetch(this)).arrayBuffer();\n  }\n  async text() {\n    return (await remote_fetch(this)).text();\n  }\n  async json() {\n    return (await remote_fetch(this)).json();\n  }\n  async stream() {\n    return (await remote_fetch(this)).body;\n  }\n  async csv(options) {\n    return dsv(this, \",\", options);\n  }\n  async tsv(options) {\n    return dsv(this, \"\\t\", options);\n  }\n  async image(props) {\n    const url = await this.url();\n    return new Promise((resolve, reject) => {\n      const i = new Image();\n      if (new URL(url, document.baseURI).origin !== new URL(location).origin) {\n        i.crossOrigin = \"anonymous\";\n      }\n      Object.assign(i, props);\n      i.onload = () => resolve(i);\n      i.onerror = () => reject(new Error(`Unable to load file: ${this.name}`));\n      i.src = url;\n    });\n  }\n  async arrow({version = 4} = {}) {\n    switch (version) {\n      case 4: {\n        const [Arrow, response] = await Promise.all([requireDefault(arrow4.resolve()), remote_fetch(this)]);\n        return Arrow.Table.from(response);\n      }\n      case 9: {\n        const [Arrow, response] = await Promise.all([import(`${cdn}${arrow9.resolve()}`), remote_fetch(this)]);\n        return Arrow.tableFromIPC(response);\n      }\n      case 11: {\n        const [Arrow, response] = await Promise.all([import(`${cdn}${arrow11.resolve()}`), remote_fetch(this)]);\n        return Arrow.tableFromIPC(response);\n      }\n      default: throw new Error(`unsupported arrow version: ${version}`);\n    }\n  }\n  async sqlite() {\n    return SQLiteDatabaseClient.open(remote_fetch(this));\n  }\n  async zip() {\n    const [JSZip, buffer] = await Promise.all([requireDefault(jszip.resolve()), this.arrayBuffer()]);\n    return new ZipArchive(await JSZip.loadAsync(buffer));\n  }\n  async xml(mimeType = \"application/xml\") {\n    return (new DOMParser).parseFromString(await this.text(), mimeType);\n  }\n  async html() {\n    return this.xml(\"text/html\");\n  }\n  async xlsx() {\n    const [ExcelJS, buffer] = await Promise.all([requireDefault(exceljs.resolve()), this.arrayBuffer()]);\n    return new Workbook(await new ExcelJS.Workbook().xlsx.load(buffer));\n  }\n}\n\nexport class FileAttachment extends AbstractFile {\n  constructor(url, name, mimeType) {\n    super(name, mimeType);\n    Object.defineProperty(this, \"_url\", {value: url});\n  }\n  async url() {\n    return (await this._url) + \"\";\n  }\n}\n\nexport function NoFileAttachments(name) {\n  throw new Error(`File not found: ${name}`);\n}\n\nexport function FileAttachments(resolve) {\n  return Object.assign(\n    name => {\n      const result = resolve(name += \"\");\n      if (result == null) throw new Error(`File not found: ${name}`);\n      if (typeof result === \"object\" && \"url\" in result) {\n        const {url, mimeType} = result;\n        return new FileAttachment(url, name, mimeType);\n      }\n      return new FileAttachment(result, name);\n    },\n    {prototype: FileAttachment.prototype} // instanceof\n  );\n}\n\nexport class ZipArchive {\n  constructor(archive) {\n    Object.defineProperty(this, \"_\", {value: archive});\n    this.filenames = Object.keys(archive.files).filter(name => !archive.files[name].dir);\n  }\n  file(path) {\n    const object = this._.file(path += \"\");\n    if (!object || object.dir) throw new Error(`file not found: ${path}`);\n    return new ZipArchiveEntry(object);\n  }\n}\n\nclass ZipArchiveEntry extends AbstractFile {\n  constructor(object) {\n    super(object.name);\n    Object.defineProperty(this, \"_\", {value: object});\n    Object.defineProperty(this, \"_url\", {writable: true});\n  }\n  async url() {\n    return this._url || (this._url = this.blob().then(URL.createObjectURL));\n  }\n  async blob() {\n    return this._.async(\"blob\");\n  }\n  async arrayBuffer() {\n    return this._.async(\"arraybuffer\");\n  }\n  async text() {\n    return this._.async(\"text\");\n  }\n  async json() {\n    return JSON.parse(await this.text());\n  }\n}\n","export function canvas(width, height) {\n  var canvas = document.createElement(\"canvas\");\n  canvas.width = width;\n  canvas.height = height;\n  return canvas;\n}\n","export function context2d(width, height, dpi) {\n  if (dpi == null) dpi = devicePixelRatio;\n  var canvas = document.createElement(\"canvas\");\n  canvas.width = width * dpi;\n  canvas.height = height * dpi;\n  canvas.style.width = width + \"px\";\n  var context = canvas.getContext(\"2d\");\n  context.scale(dpi, dpi);\n  return context;\n}\n","export function download(value, name = \"untitled\", label = \"Save\") {\n  const a = document.createElement(\"a\");\n  const b = a.appendChild(document.createElement(\"button\"));\n  b.textContent = label;\n  a.download = name;\n\n  async function reset() {\n    await new Promise(requestAnimationFrame);\n    URL.revokeObjectURL(a.href);\n    a.removeAttribute(\"href\");\n    b.textContent = label;\n    b.disabled = false;\n  }\n\n  a.onclick = async event => {\n    b.disabled = true;\n    if (a.href) return reset(); // Already saved.\n    b.textContent = \"Saving\";\n    try {\n      const object = await (typeof value === \"function\" ? value() : value);\n      b.textContent = \"Download\";\n      a.href = URL.createObjectURL(object); // eslint-disable-line require-atomic-updates\n    } catch (ignore) {\n      b.textContent = label;\n    }\n    if (event.eventPhase) return reset(); // Already downloaded.\n    b.disabled = false;\n  };\n\n  return a;\n}\n","var namespaces = {\n  math: \"http://www.w3.org/1998/Math/MathML\",\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: \"http://www.w3.org/1999/xhtml\",\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n\nexport function element(name, attributes) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\"), value;\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  var element = namespaces.hasOwnProperty(prefix) // eslint-disable-line no-prototype-builtins\n      ? document.createElementNS(namespaces[prefix], name)\n      : document.createElement(name);\n  if (attributes) for (var key in attributes) {\n    prefix = key, i = prefix.indexOf(\":\"), value = attributes[key];\n    if (i >= 0 && (prefix = key.slice(0, i)) !== \"xmlns\") key = key.slice(i + 1);\n    if (namespaces.hasOwnProperty(prefix)) element.setAttributeNS(namespaces[prefix], key, value); // eslint-disable-line no-prototype-builtins\n    else element.setAttribute(key, value);\n  }\n  return element;\n}\n","export function input(type) {\n  var input = document.createElement(\"input\");\n  if (type != null) input.type = type;\n  return input;\n}\n","export function range(min, max, step) {\n  if (arguments.length === 1) max = min, min = null;\n  var input = document.createElement(\"input\");\n  input.min = min = min == null ? 0 : +min;\n  input.max = max = max == null ? 1 : +max;\n  input.step = step == null ? \"any\" : step = +step;\n  input.type = \"range\";\n  return input;\n}\n","export function select(values) {\n  var select = document.createElement(\"select\");\n  Array.prototype.forEach.call(values, function(value) {\n    var option = document.createElement(\"option\");\n    option.value = option.textContent = value;\n    select.appendChild(option);\n  });\n  return select;\n}\n","export function svg(width, height) {\n  var svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  svg.setAttribute(\"viewBox\", [0, 0, width, height]);\n  svg.setAttribute(\"width\", width);\n  svg.setAttribute(\"height\", height);\n  return svg;\n}\n","export function text(value) {\n  return document.createTextNode(value);\n}\n","var count = 0;\n\nexport function uid(name) {\n  return new Id(\"O-\" + (name == null ? \"\" : name + \"-\") + ++count);\n}\n\nfunction Id(id) {\n  this.id = id;\n  this.href = new URL(`#${id}`, location) + \"\";\n}\n\nId.prototype.toString = function() {\n  return \"url(\" + this.href + \")\";\n};\n","export function buffer(file) {\n  return new Promise(function(resolve, reject) {\n    var reader = new FileReader;\n    reader.onload = function() { resolve(reader.result); };\n    reader.onerror = reject;\n    reader.readAsArrayBuffer(file);\n  });\n}\n","export function text(file) {\n  return new Promise(function(resolve, reject) {\n    var reader = new FileReader;\n    reader.onload = function() { resolve(reader.result); };\n    reader.onerror = reject;\n    reader.readAsText(file);\n  });\n}\n","export function url(file) {\n  return new Promise(function(resolve, reject) {\n    var reader = new FileReader;\n    reader.onload = function() { resolve(reader.result); };\n    reader.onerror = reject;\n    reader.readAsDataURL(file);\n  });\n}\n","export function that() {\n  return this;\n}\n","import {that} from \"../that.js\";\n\nexport function disposable(value, dispose) {\n  let done = false;\n  if (typeof dispose !== \"function\") {\n    throw new Error(\"dispose is not a function\");\n  }\n  return {\n    [Symbol.iterator]: that,\n    next: () => done ? {done: true} : (done = true, {done: false, value}),\n    return: () => (done = true, dispose(value), {done: true}),\n    throw: () => ({done: done = true})\n  };\n}\n","export function* filter(iterator, test) {\n  var result, index = -1;\n  while (!(result = iterator.next()).done) {\n    if (test(result.value, ++index)) {\n      yield result.value;\n    }\n  }\n}\n","import {that} from \"../that.js\";\n\nexport function observe(initialize) {\n  let stale = false;\n  let value;\n  let resolve;\n  const dispose = initialize(change);\n\n  if (dispose != null && typeof dispose !== \"function\") {\n    throw new Error(typeof dispose.then === \"function\"\n        ? \"async initializers are not supported\"\n        : \"initializer returned something, but not a dispose function\");\n  }\n\n  function change(x) {\n    if (resolve) resolve(x), resolve = null;\n    else stale = true;\n    return value = x;\n  }\n\n  function next() {\n    return {done: false, value: stale\n        ? (stale = false, Promise.resolve(value))\n        : new Promise(_ => (resolve = _))};\n  }\n\n  return {\n    [Symbol.iterator]: that,\n    throw: () => ({done: true}),\n    return: () => (dispose != null && dispose(), {done: true}),\n    next\n  };\n}\n","import {observe} from \"./observe.js\";\n\nexport function input(input) {\n  return observe(function(change) {\n    var event = eventof(input), value = valueof(input);\n    function inputted() { change(valueof(input)); }\n    input.addEventListener(event, inputted);\n    if (value !== undefined) change(value);\n    return function() { input.removeEventListener(event, inputted); };\n  });\n}\n\nfunction valueof(input) {\n  switch (input.type) {\n    case \"range\":\n    case \"number\": return input.valueAsNumber;\n    case \"date\": return input.valueAsDate;\n    case \"checkbox\": return input.checked;\n    case \"file\": return input.multiple ? input.files : input.files[0];\n    case \"select-multiple\": return Array.from(input.selectedOptions, o => o.value);\n    default: return input.value;\n  }\n}\n\nfunction eventof(input) {\n  switch (input.type) {\n    case \"button\":\n    case \"submit\":\n    case \"checkbox\": return \"click\";\n    case \"file\": return \"change\";\n    default: return \"input\";\n  }\n}\n","export function* map(iterator, transform) {\n  var result, index = -1;\n  while (!(result = iterator.next()).done) {\n    yield transform(result.value, ++index);\n  }\n}\n","import {that} from \"../that.js\";\n\nexport function queue(initialize) {\n  let resolve;\n  const queue = [];\n  const dispose = initialize(push);\n\n  if (dispose != null && typeof dispose !== \"function\") {\n    throw new Error(typeof dispose.then === \"function\"\n        ? \"async initializers are not supported\"\n        : \"initializer returned something, but not a dispose function\");\n  }\n\n  function push(x) {\n    queue.push(x);\n    if (resolve) resolve(queue.shift()), resolve = null;\n    return x;\n  }\n\n  function next() {\n    return {done: false, value: queue.length\n        ? Promise.resolve(queue.shift())\n        : new Promise(_ => (resolve = _))};\n  }\n\n  return {\n    [Symbol.iterator]: that,\n    throw: () => ({done: true}),\n    return: () => (dispose != null && dispose(), {done: true}),\n    next\n  };\n}\n","export function* range(start, stop, step) {\n  start = +start;\n  stop = +stop;\n  step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n  var i = -1, n = Math.max(0, Math.ceil((stop - start) / step)) | 0;\n  while (++i < n) {\n    yield start + i * step;\n  }\n}\n","export function valueAt(iterator, i) {\n  if (!isFinite(i = +i) || i < 0 || i !== i | 0) return;\n  var result, index = -1;\n  while (!(result = iterator.next()).done) {\n    if (++index === i) {\n      return result.value;\n    }\n  }\n}\n","import {disposable} from \"./disposable.js\";\n\nexport function worker(source) {\n  const url = URL.createObjectURL(new Blob([source], {type: \"text/javascript\"}));\n  const worker = new Worker(url);\n  return disposable(worker, () => {\n    worker.terminate();\n    URL.revokeObjectURL(url);\n  });\n}\n","export function template(render, wrapper) {\n  return function(strings) {\n    var string = strings[0],\n        parts = [], part,\n        root = null,\n        node, nodes,\n        walker,\n        i, n, j, m, k = -1;\n\n    // Concatenate the text using comments as placeholders.\n    for (i = 1, n = arguments.length; i < n; ++i) {\n      part = arguments[i];\n      if (part instanceof Node) {\n        parts[++k] = part;\n        string += \"<!--o:\" + k + \"-->\";\n      } else if (Array.isArray(part)) {\n        for (j = 0, m = part.length; j < m; ++j) {\n          node = part[j];\n          if (node instanceof Node) {\n            if (root === null) {\n              parts[++k] = root = document.createDocumentFragment();\n              string += \"<!--o:\" + k + \"-->\";\n            }\n            root.appendChild(node);\n          } else {\n            root = null;\n            string += node;\n          }\n        }\n        root = null;\n      } else {\n        string += part;\n      }\n      string += strings[i];\n    }\n\n    // Render the text.\n    root = render(string);\n\n    // Walk the rendered content to replace comment placeholders.\n    if (++k > 0) {\n      nodes = new Array(k);\n      walker = document.createTreeWalker(root, NodeFilter.SHOW_COMMENT, null, false);\n      while (walker.nextNode()) {\n        node = walker.currentNode;\n        if (/^o:/.test(node.nodeValue)) {\n          nodes[+node.nodeValue.slice(2)] = node;\n        }\n      }\n      for (i = 0; i < k; ++i) {\n        if (node = nodes[i]) {\n          node.parentNode.replaceChild(parts[i], node);\n        }\n      }\n    }\n\n    // Is the rendered content\n    //  a parent of a single child? Detach and return the child.\n    //  a document fragment? Replace the fragment with an element.\n    //  some other node? Return it.\n    return root.childNodes.length === 1 ? root.removeChild(root.firstChild)\n        : root.nodeType === 11 ? ((node = wrapper()).appendChild(root), node)\n        : root;\n  };\n}\n","import {template} from \"./template.js\";\n\nexport const html = template(function(string) {\n  var template = document.createElement(\"template\");\n  template.innerHTML = string.trim();\n  return document.importNode(template.content, true);\n}, function() {\n  return document.createElement(\"span\");\n});\n","import {leaflet as ll} from \"./dependencies.js\";\n\nexport async function leaflet(require) {\n  const L = await require(ll.resolve());\n  if (!L._style) {\n    const link = document.createElement(\"link\");\n    link.rel = \"stylesheet\";\n    link.href = await require.resolve(ll.resolve(\"dist/leaflet.css\"));\n    L._style = document.head.appendChild(link);\n  }\n  return L;\n}\n","import {highlight, marked} from \"./dependencies.js\";\nimport {template} from \"./template.js\";\n\nexport function md(require) {\n  return require(marked.resolve()).then(function(marked) {\n    return template(\n      function(string) {\n        var root = document.createElement(\"div\");\n        root.innerHTML = marked(string, {langPrefix: \"\"}).trim();\n        var code = root.querySelectorAll(\"pre code[class]\");\n        if (code.length > 0) {\n          require(highlight.resolve()).then(function(hl) {\n            code.forEach(function(block) {\n              function done() {\n                hl.highlightBlock(block);\n                block.parentNode.classList.add(\"observablehq--md-pre\");\n              }\n              if (hl.getLanguage(block.className)) {\n                done();\n              } else {\n                require(highlight.resolve(\"async-languages/index.js\"))\n                  .then(index => {\n                    if (index.has(block.className)) {\n                      return require(highlight.resolve(\"async-languages/\" + index.get(block.className))).then(language => {\n                        hl.registerLanguage(block.className, language);\n                      });\n                    }\n                  })\n                  .then(done, done);\n              }\n            });\n          });\n        }\n        return root;\n      },\n      function() {\n        return document.createElement(\"div\");\n      }\n    );\n  });\n}\n","import {mermaid as merd} from \"./dependencies.js\";\nimport {uid} from \"./dom/uid.js\";\n\nexport async function mermaid(require) {\n  const mer = await require(merd.resolve());\n  mer.initialize({securityLevel: \"loose\", theme: \"neutral\"});\n  return function mermaid() {\n    const root = document.createElement(\"div\");\n    root.innerHTML = mer.render(uid().id, String.raw.apply(String, arguments));\n    return root.removeChild(root.firstChild);\n  };\n}\n","import {observe} from \"./generators/observe.js\";\n\nexport function Mutable(value) {\n  let change;\n  Object.defineProperties(this, {\n    generator: {value: observe(_ => void (change = _))},\n    value: {get: () => value, set: x => change(value = x)} // eslint-disable-line no-setter-return\n  });\n  if (value !== undefined) change(value);\n}\n","export function* now() {\n  while (true) {\n    yield Date.now();\n  }\n}\n","export function delay(duration, value) {\n  return new Promise(function(resolve) {\n    setTimeout(function() {\n      resolve(value);\n    }, duration);\n  });\n}\n","var timeouts = new Map;\n\nfunction timeout(now, time) {\n  var t = new Promise(function(resolve) {\n    timeouts.delete(time);\n    var delay = time - now;\n    if (!(delay > 0)) throw new Error(\"invalid time\");\n    if (delay > 0x7fffffff) throw new Error(\"too long to wait\");\n    setTimeout(resolve, delay);\n  });\n  timeouts.set(time, t);\n  return t;\n}\n\nexport function when(time, value) {\n  var now;\n  return (now = timeouts.get(time = +time)) ? now.then(() => value)\n      : (now = Date.now()) >= time ? Promise.resolve(value)\n      : timeout(now, time).then(() => value);\n}\n","import {when} from \"./when.js\";\n\nexport function tick(duration, value) {\n  return when(Math.ceil((Date.now() + 1) / duration) * duration, value);\n}\n","export function resolve(name, base) {\n  if (/^(\\w+:)|\\/\\//i.test(name)) return name;\n  if (/^[.]{0,2}\\//i.test(name)) return new URL(name, base == null ? location : base).href;\n  if (!name.length || /^[\\s._]/.test(name) || /\\s$/.test(name)) throw new Error(\"illegal name\");\n  return \"https://unpkg.com/\" + name;\n}\n","import {template} from \"./template.js\";\n\nexport const svg = template(function(string) {\n  var root = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  root.innerHTML = string.trim();\n  return root;\n}, function() {\n  return document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n});\n","import {katex} from \"./dependencies.js\";\n\nvar raw = String.raw;\n\nfunction style(href) {\n  return new Promise(function(resolve, reject) {\n    var link = document.createElement(\"link\");\n    link.rel = \"stylesheet\";\n    link.href = href;\n    link.onerror = reject;\n    link.onload = resolve;\n    document.head.appendChild(link);\n  });\n}\n\nexport function tex(require) {\n  return Promise.all([\n    require(katex.resolve()),\n    require.resolve(katex.resolve(\"dist/katex.min.css\")).then(style)\n  ]).then(function(values) {\n    var katex = values[0], tex = renderer();\n\n    function renderer(options) {\n      return function() {\n        var root = document.createElement(\"div\");\n        katex.render(raw.apply(String, arguments), root, options);\n        return root.removeChild(root.firstChild);\n      };\n    }\n\n    tex.options = renderer;\n    tex.block = renderer({displayMode: true});\n    return tex;\n  });\n}\n","import {vega, vegalite, vegaliteApi} from \"./dependencies.js\";\n\nexport async function vl(require) {\n  const [v, vl, api] = await Promise.all([vega, vegalite, vegaliteApi].map(d => require(d.resolve())));\n  return api.register(v, vl);\n}\n","import {observe} from \"./generators/observe.js\";\n\nexport function width() {\n  return observe(function(change) {\n    var width = change(document.body.clientWidth);\n    function resized() {\n      var w = document.body.clientWidth;\n      if (w !== width) change(width = w);\n    }\n    window.addEventListener(\"resize\", resized);\n    return function() {\n      window.removeEventListener(\"resize\", resized);\n    };\n  });\n}\n","import {requireFrom, resolveFrom} from \"d3-require\";\nimport * as DOM from \"./dom/index.js\";\nimport * as Files from \"./files/index.js\";\nimport {AbstractFile, FileAttachment, NoFileAttachments} from \"./fileAttachment.js\";\nimport * as Generators from \"./generators/index.js\";\nimport {DuckDBClient} from \"./duckdb.js\";\nimport {html} from \"./html.js\";\nimport {leaflet} from \"./leaflet.js\";\nimport {md} from \"./md.js\";\nimport {mermaid} from \"./mermaid.js\";\nimport {Mutable} from \"./mutable.js\";\nimport {now} from \"./now.js\";\nimport * as Promises from \"./promises/index.js\";\nimport {resolve} from \"./resolve.js\";\nimport {requirer, requireDefault, setDefaultRequire} from \"./require.js\";\nimport {SQLite, SQLiteDatabaseClient} from \"./sqlite.js\";\nimport {svg} from \"./svg.js\";\nimport {tex} from \"./tex.js\";\nimport {vl} from \"./vegalite.js\";\nimport {width} from \"./width.js\";\nimport {arquero, arrow4, d3, graphviz, htl, inputs, lodash, plot, topojson} from \"./dependencies.js\";\nimport {__query} from \"./table.js\";\n\nexport const Library = Object.assign(Object.defineProperties(function Library(resolver) {\n  const require = requirer(resolver);\n  Object.defineProperties(this, properties({\n    FileAttachment: () => NoFileAttachments,\n    Mutable: () => Mutable,\n    now,\n    width,\n\n    // Tagged template literals\n    dot: () => require(graphviz.resolve()),\n    htl: () => require(htl.resolve()),\n    html: () => html,\n    md: () => md(require),\n    svg: () => svg,\n    tex: () => tex(require),\n\n    // Recommended libraries\n    // https://observablehq.com/@observablehq/recommended-libraries\n    _: () => require(lodash.resolve()),\n    aq: () => require.alias({\"apache-arrow\": arrow4.resolve()})(arquero.resolve()), // TODO upgrade to apache-arrow@9\n    Arrow: () => require(arrow4.resolve()), // TODO upgrade to apache-arrow@9\n    d3: () => require(d3.resolve()),\n    DuckDBClient: () => DuckDBClient,\n    Inputs: () => require(inputs.resolve()).then(Inputs => ({...Inputs, file: Inputs.fileOf(AbstractFile)})),\n    L: () => leaflet(require),\n    mermaid: () => mermaid(require),\n    Plot: () => require(plot.resolve()),\n    __query: () => __query,\n    require: () => require,\n    resolve: () => resolve, // deprecated; use async require.resolve instead\n    SQLite: () => SQLite(require),\n    SQLiteDatabaseClient: () => SQLiteDatabaseClient,\n    topojson: () => require(topojson.resolve()),\n    vl: () => vl(require),\n\n    // Sample datasets\n    // https://observablehq.com/@observablehq/sample-datasets\n    aapl: () => new FileAttachment(\"https://static.observableusercontent.com/files/3ccff97fd2d93da734e76829b2b066eafdaac6a1fafdec0faf6ebc443271cfc109d29e80dd217468fcb2aff1e6bffdc73f356cc48feb657f35378e6abbbb63b9\").csv({typed: true}),\n    alphabet: () => new FileAttachment(\"https://static.observableusercontent.com/files/75d52e6c3130b1cae83cda89305e17b50f33e7420ef205587a135e8562bcfd22e483cf4fa2fb5df6dff66f9c5d19740be1cfaf47406286e2eb6574b49ffc685d\").csv({typed: true}),\n    cars: () => new FileAttachment(\"https://static.observableusercontent.com/files/048ec3dfd528110c0665dfa363dd28bc516ffb7247231f3ab25005036717f5c4c232a5efc7bb74bc03037155cb72b1abe85a33d86eb9f1a336196030443be4f6\").csv({typed: true}),\n    citywages: () => new FileAttachment(\"https://static.observableusercontent.com/files/39837ec5121fcc163131dbc2fe8c1a2e0b3423a5d1e96b5ce371e2ac2e20a290d78b71a4fb08b9fa6a0107776e17fb78af313b8ea70f4cc6648fad68ddf06f7a\").csv({typed: true}),\n    diamonds: () => new FileAttachment(\"https://static.observableusercontent.com/files/87942b1f5d061a21fa4bb8f2162db44e3ef0f7391301f867ab5ba718b225a63091af20675f0bfe7f922db097b217b377135203a7eab34651e21a8d09f4e37252\").csv({typed: true}),\n    flare: () => new FileAttachment(\"https://static.observableusercontent.com/files/a6b0d94a7f5828fd133765a934f4c9746d2010e2f342d335923991f31b14120de96b5cb4f160d509d8dc627f0107d7f5b5070d2516f01e4c862b5b4867533000\").csv({typed: true}),\n    industries: () => new FileAttachment(\"https://static.observableusercontent.com/files/76f13741128340cc88798c0a0b7fa5a2df8370f57554000774ab8ee9ae785ffa2903010cad670d4939af3e9c17e5e18e7e05ed2b38b848ac2fc1a0066aa0005f\").csv({typed: true}),\n    miserables: () => new FileAttachment(\"https://static.observableusercontent.com/files/31d904f6e21d42d4963ece9c8cc4fbd75efcbdc404bf511bc79906f0a1be68b5a01e935f65123670ed04e35ca8cae3c2b943f82bf8db49c5a67c85cbb58db052\").json(),\n    olympians: () => new FileAttachment(\"https://static.observableusercontent.com/files/31ca24545a0603dce099d10ee89ee5ae72d29fa55e8fc7c9ffb5ded87ac83060d80f1d9e21f4ae8eb04c1e8940b7287d179fe8060d887fb1f055f430e210007c\").csv({typed: true}),\n    penguins: () => new FileAttachment(\"https://static.observableusercontent.com/files/715db1223e067f00500780077febc6cebbdd90c151d3d78317c802732252052ab0e367039872ab9c77d6ef99e5f55a0724b35ddc898a1c99cb14c31a379af80a\").csv({typed: true}),\n    pizza: () => new FileAttachment(\"https://static.observableusercontent.com/files/c653108ab176088cacbb338eaf2344c4f5781681702bd6afb55697a3f91b511c6686ff469f3e3a27c75400001a2334dbd39a4499fe46b50a8b3c278b7d2f7fb5\").csv({typed: true}),\n    weather: () => new FileAttachment(\"https://static.observableusercontent.com/files/693a46b22b33db0f042728700e0c73e836fa13d55446df89120682d55339c6db7cc9e574d3d73f24ecc9bc7eb9ac9a1e7e104a1ee52c00aab1e77eb102913c1f\").csv({typed: true}),\n\n    // Note: these are namespace objects, and thus exposed directly rather than\n    // being wrapped in a function. This allows library.Generators to resolve,\n    // rather than needing module.value.\n    DOM,\n    Files,\n    Generators,\n    Promises\n  }));\n}, {\n  resolve: {\n    get: () => requireDefault.resolve,\n    enumerable: true,\n    configurable: true\n  },\n  require: {\n    get: () => requireDefault,\n    set: setDefaultRequire,\n    enumerable: true,\n    configurable: true\n  }\n}), {\n  resolveFrom,\n  requireFrom\n});\n\nfunction properties(values) {\n  return Object.fromEntries(Object.entries(values).map(property));\n}\n\nfunction property([key, value]) {\n  return [key, ({value, writable: true, enumerable: true})];\n}\n","export class RuntimeError extends Error {\n  constructor(message, input) {\n    super(message);\n    this.input = input;\n  }\n}\n\nRuntimeError.prototype.name = \"RuntimeError\";\n","export function generatorish(value) {\n  return value\n      && typeof value.next === \"function\"\n      && typeof value.return === \"function\";\n}\n","export function constant(x) {\n  return () => x;\n}\n","export function identity(x) {\n  return x;\n}\n","export function rethrow(error) {\n  return () => {\n    throw error;\n  };\n}\n","const prototype = Array.prototype;\nexport const map = prototype.map;\nexport const forEach = prototype.forEach;\n","export function noop() {}\n","import {map} from \"./array.js\";\nimport {constant} from \"./constant.js\";\nimport {RuntimeError} from \"./errors.js\";\nimport {identity} from \"./identity.js\";\nimport {noop} from \"./noop.js\";\n\nexport const TYPE_NORMAL = 1; // a normal variable\nexport const TYPE_IMPLICIT = 2; // created on reference\nexport const TYPE_DUPLICATE = 3; // created on duplicate definition\n\nexport const no_observer = Symbol(\"no-observer\");\n\nexport function Variable(type, module, observer, options) {\n  if (!observer) observer = no_observer;\n  Object.defineProperties(this, {\n    _observer: {value: observer, writable: true},\n    _definition: {value: variable_undefined, writable: true},\n    _duplicate: {value: undefined, writable: true},\n    _duplicates: {value: undefined, writable: true},\n    _indegree: {value: NaN, writable: true}, // The number of computing inputs.\n    _inputs: {value: [], writable: true},\n    _invalidate: {value: noop, writable: true},\n    _module: {value: module},\n    _name: {value: null, writable: true},\n    _outputs: {value: new Set, writable: true},\n    _promise: {value: Promise.resolve(undefined), writable: true},\n    _reachable: {value: observer !== no_observer, writable: true}, // Is this variable transitively visible?\n    _rejector: {value: variable_rejector(this)},\n    _shadow: {value: initShadow(module, options)},\n    _type: {value: type},\n    _value: {value: undefined, writable: true},\n    _version: {value: 0, writable: true}\n  });\n}\n\nObject.defineProperties(Variable.prototype, {\n  _pending: {value: variable_pending, writable: true, configurable: true},\n  _fulfilled: {value: variable_fulfilled, writable: true, configurable: true},\n  _rejected: {value: variable_rejected, writable: true, configurable: true},\n  _resolve: {value: variable_resolve, writable: true, configurable: true},\n  define: {value: variable_define, writable: true, configurable: true},\n  delete: {value: variable_delete, writable: true, configurable: true},\n  import: {value: variable_import, writable: true, configurable: true}\n});\n\nfunction initShadow(module, options) {\n  if (!options?.shadow) return null;\n  return new Map(\n    Object.entries(options.shadow)\n      .map(([name, definition]) => [name, (new Variable(TYPE_IMPLICIT, module)).define([], definition)])\n  );\n}\n\nfunction variable_attach(variable) {\n  variable._module._runtime._dirty.add(variable);\n  variable._outputs.add(this);\n}\n\nfunction variable_detach(variable) {\n  variable._module._runtime._dirty.add(variable);\n  variable._outputs.delete(this);\n}\n\nfunction variable_undefined() {\n  throw variable_undefined;\n}\n\nexport function variable_stale() {\n  throw variable_stale;\n}\n\nfunction variable_rejector(variable) {\n  return (error) => {\n    if (error === variable_stale) throw error;\n    if (error === variable_undefined) throw new RuntimeError(`${variable._name} is not defined`, variable._name);\n    if (error instanceof Error && error.message) throw new RuntimeError(error.message, variable._name);\n    throw new RuntimeError(`${variable._name} could not be resolved`, variable._name);\n  };\n}\n\nfunction variable_duplicate(name) {\n  return () => {\n    throw new RuntimeError(`${name} is defined more than once`);\n  };\n}\n\nfunction variable_define(name, inputs, definition) {\n  switch (arguments.length) {\n    case 1: {\n      definition = name, name = inputs = null;\n      break;\n    }\n    case 2: {\n      definition = inputs;\n      if (typeof name === \"string\") inputs = null;\n      else inputs = name, name = null;\n      break;\n    }\n  }\n  return variable_defineImpl.call(this,\n    name == null ? null : String(name),\n    inputs == null ? [] : map.call(inputs, this._resolve, this),\n    typeof definition === \"function\" ? definition : constant(definition)\n  );\n}\n\nfunction variable_resolve(name) {\n  return this._shadow?.get(name) ?? this._module._resolve(name);\n}\n\nfunction variable_defineImpl(name, inputs, definition) {\n  const scope = this._module._scope, runtime = this._module._runtime;\n\n  this._inputs.forEach(variable_detach, this);\n  inputs.forEach(variable_attach, this);\n  this._inputs = inputs;\n  this._definition = definition;\n  this._value = undefined;\n\n  // Is this an active variable (that may require disposal)?\n  if (definition === noop) runtime._variables.delete(this);\n  else runtime._variables.add(this);\n\n  // Did the variables name change? Time to patch references!\n  if (name !== this._name || scope.get(name) !== this) {\n    let error, found;\n\n    if (this._name) { // Did this variable previously have a name?\n      if (this._outputs.size) { // And did other variables reference this variable?\n        scope.delete(this._name);\n        found = this._module._resolve(this._name);\n        found._outputs = this._outputs, this._outputs = new Set;\n        found._outputs.forEach(function(output) { output._inputs[output._inputs.indexOf(this)] = found; }, this);\n        found._outputs.forEach(runtime._updates.add, runtime._updates);\n        runtime._dirty.add(found).add(this);\n        scope.set(this._name, found);\n      } else if ((found = scope.get(this._name)) === this) { // Do no other variables reference this variable?\n        scope.delete(this._name); // Its safe to delete!\n      } else if (found._type === TYPE_DUPLICATE) { // Do other variables assign this name?\n        found._duplicates.delete(this); // This variable no longer assigns this name.\n        this._duplicate = undefined;\n        if (found._duplicates.size === 1) { // Is there now only one variable assigning this name?\n          found = found._duplicates.keys().next().value; // Any references are now fixed!\n          error = scope.get(this._name);\n          found._outputs = error._outputs, error._outputs = new Set;\n          found._outputs.forEach(function(output) { output._inputs[output._inputs.indexOf(error)] = found; });\n          found._definition = found._duplicate, found._duplicate = undefined;\n          runtime._dirty.add(error).add(found);\n          runtime._updates.add(found);\n          scope.set(this._name, found);\n        }\n      } else {\n        throw new Error;\n      }\n    }\n\n    if (this._outputs.size) throw new Error;\n\n    if (name) { // Does this variable have a new name?\n      if (found = scope.get(name)) { // Do other variables reference or assign this name?\n        if (found._type === TYPE_DUPLICATE) { // Do multiple other variables already define this name?\n          this._definition = variable_duplicate(name), this._duplicate = definition;\n          found._duplicates.add(this);\n        } else if (found._type === TYPE_IMPLICIT) { // Are the variable references broken?\n          this._outputs = found._outputs, found._outputs = new Set; // Now theyre fixed!\n          this._outputs.forEach(function(output) { output._inputs[output._inputs.indexOf(found)] = this; }, this);\n          runtime._dirty.add(found).add(this);\n          scope.set(name, this);\n        } else { // Does another variable define this name?\n          found._duplicate = found._definition, this._duplicate = definition; // Now theyre duplicates.\n          error = new Variable(TYPE_DUPLICATE, this._module);\n          error._name = name;\n          error._definition = this._definition = found._definition = variable_duplicate(name);\n          error._outputs = found._outputs, found._outputs = new Set;\n          error._outputs.forEach(function(output) { output._inputs[output._inputs.indexOf(found)] = error; });\n          error._duplicates = new Set([this, found]);\n          runtime._dirty.add(found).add(error);\n          runtime._updates.add(found).add(error);\n          scope.set(name, error);\n        }\n      } else {\n        scope.set(name, this);\n      }\n    }\n\n    this._name = name;\n  }\n\n  // If this redefined variable was previously evaluated, invalidate it. (If the\n  // variable was never evaluated, then the invalidated value could never have\n  // been exposed and we can avoid this extra work.)\n  if (this._version > 0) ++this._version;\n\n  runtime._updates.add(this);\n  runtime._compute();\n  return this;\n}\n\nfunction variable_import(remote, name, module) {\n  if (arguments.length < 3) module = name, name = remote;\n  return variable_defineImpl.call(this, String(name), [module._resolve(String(remote))], identity);\n}\n\nfunction variable_delete() {\n  return variable_defineImpl.call(this, null, [], noop);\n}\n\nfunction variable_pending() {\n  if (this._observer.pending) this._observer.pending();\n}\n\nfunction variable_fulfilled(value) {\n  if (this._observer.fulfilled) this._observer.fulfilled(value, this._name);\n}\n\nfunction variable_rejected(error) {\n  if (this._observer.rejected) this._observer.rejected(error, this._name);\n}\n","import {constant} from \"./constant.js\";\nimport {RuntimeError} from \"./errors.js\";\nimport {identity} from \"./identity.js\";\nimport {rethrow} from \"./rethrow.js\";\nimport {Variable, TYPE_DUPLICATE, TYPE_IMPLICIT, TYPE_NORMAL, no_observer, variable_stale} from \"./variable.js\";\n\nexport const variable_variable = Symbol(\"variable\");\nexport const variable_invalidation = Symbol(\"invalidation\");\nexport const variable_visibility = Symbol(\"visibility\");\n\nexport function Module(runtime, builtins = []) {\n  Object.defineProperties(this, {\n    _runtime: {value: runtime},\n    _scope: {value: new Map},\n    _builtins: {value: new Map([\n      [\"@variable\", variable_variable],\n      [\"invalidation\", variable_invalidation],\n      [\"visibility\", variable_visibility],\n      ...builtins\n    ])},\n    _source: {value: null, writable: true}\n  });\n}\n\nObject.defineProperties(Module.prototype, {\n  _resolve: {value: module_resolve, writable: true, configurable: true},\n  redefine: {value: module_redefine, writable: true, configurable: true},\n  define: {value: module_define, writable: true, configurable: true},\n  derive: {value: module_derive, writable: true, configurable: true},\n  import: {value: module_import, writable: true, configurable: true},\n  value: {value: module_value, writable: true, configurable: true},\n  variable: {value: module_variable, writable: true, configurable: true},\n  builtin: {value: module_builtin, writable: true, configurable: true}\n});\n\nfunction module_redefine(name) {\n  const v = this._scope.get(name);\n  if (!v) throw new RuntimeError(`${name} is not defined`);\n  if (v._type === TYPE_DUPLICATE) throw new RuntimeError(`${name} is defined more than once`);\n  return v.define.apply(v, arguments);\n}\n\nfunction module_define() {\n  const v = new Variable(TYPE_NORMAL, this);\n  return v.define.apply(v, arguments);\n}\n\nfunction module_import() {\n  const v = new Variable(TYPE_NORMAL, this);\n  return v.import.apply(v, arguments);\n}\n\nfunction module_variable(observer, options) {\n  return new Variable(TYPE_NORMAL, this, observer, options);\n}\n\nasync function module_value(name) {\n  let v = this._scope.get(name);\n  if (!v) throw new RuntimeError(`${name} is not defined`);\n  if (v._observer === no_observer) {\n    v = this.variable(true).define([name], identity);\n    try {\n      return await module_revalue(this._runtime, v);\n    } finally {\n      v.delete();\n    }\n  } else {\n    return module_revalue(this._runtime, v);\n  }\n}\n\n// If the variable is redefined before its value resolves, try again.\nasync function module_revalue(runtime, variable) {\n  await runtime._compute();\n  try {\n    return await variable._promise;\n  } catch (error) {\n    if (error === variable_stale) return module_revalue(runtime, variable);\n    throw error;\n  }\n}\n\nfunction module_derive(injects, injectModule) {\n  const map = new Map();\n  const modules = new Set();\n  const copies = [];\n\n  // Given a module, derives an alias of that module with an initially-empty\n  // definition. The variables will be copied later in a second pass below.\n  function alias(source) {\n    let target = map.get(source);\n    if (target) return target;\n    target = new Module(source._runtime, source._builtins);\n    target._source = source;\n    map.set(source, target);\n    copies.push([target, source]);\n    modules.add(source);\n    return target;\n  }\n\n  // Inject the given variables as reverse imports into the derived module.\n  const derive = alias(this);\n  for (const inject of injects) {\n    const {alias, name} = typeof inject === \"object\" ? inject : {name: inject};\n    derive.import(name, alias == null ? name : alias, injectModule);\n  }\n\n  // Iterate over all the variables (currently) in this module. If any\n  // represents an import-with (i.e., an import of a module with a _source), the\n  // transitive import-with must be copied, too, as direct injections may affect\n  // transitive injections. Note that an import-with can only be created with\n  // module.derive and hence its not possible for an import-with to be added\n  // later; therefore we only need to apply this check once, now.\n  for (const module of modules) {\n    for (const [name, variable] of module._scope) {\n      if (variable._definition === identity) { // import\n        if (module === this && derive._scope.has(name)) continue; // overridden by injection\n        const importedModule = variable._inputs[0]._module;\n        if (importedModule._source) alias(importedModule);\n      }\n    }\n  }\n\n  // Finally, with the modules resolved, copy the variable definitions.\n  for (const [target, source] of copies) {\n    for (const [name, sourceVariable] of source._scope) {\n      const targetVariable = target._scope.get(name);\n      if (targetVariable && targetVariable._type !== TYPE_IMPLICIT) continue; // preserve injection\n      if (sourceVariable._definition === identity) { // import\n        const sourceInput = sourceVariable._inputs[0];\n        const sourceModule = sourceInput._module;\n        target.import(sourceInput._name, name, map.get(sourceModule) || sourceModule);\n      } else { // non-import\n        target.define(name, sourceVariable._inputs.map(variable_name), sourceVariable._definition);\n      }\n    }\n  }\n\n  return derive;\n}\n\nfunction module_resolve(name) {\n  let variable = this._scope.get(name), value;\n  if (!variable) {\n    variable = new Variable(TYPE_IMPLICIT, this);\n    if (this._builtins.has(name)) {\n      variable.define(name, constant(this._builtins.get(name)));\n    } else if (this._runtime._builtin._scope.has(name)) {\n      variable.import(name, this._runtime._builtin);\n    } else {\n      try {\n        value = this._runtime._global(name);\n      } catch (error) {\n        return variable.define(name, rethrow(error));\n      }\n      if (value === undefined) {\n        this._scope.set(variable._name = name, variable);\n      } else {\n        variable.define(name, constant(value));\n      }\n    }\n  }\n  return variable;\n}\n\nfunction module_builtin(name, value) {\n  this._builtins.set(name, value);\n}\n\nfunction variable_name(variable) {\n  return variable._name;\n}\n","import {Library, FileAttachments} from \"@observablehq/stdlib\";\nimport {RuntimeError} from \"./errors.js\";\nimport {generatorish} from \"./generatorish.js\";\nimport {Module, variable_variable, variable_invalidation, variable_visibility} from \"./module.js\";\nimport {noop} from \"./noop.js\";\nimport {Variable, TYPE_IMPLICIT, no_observer, variable_stale} from \"./variable.js\";\n\nconst frame = typeof requestAnimationFrame === \"function\" ? requestAnimationFrame\n  : typeof setImmediate === \"function\" ? setImmediate\n  : f => setTimeout(f, 0);\n\nexport function Runtime(builtins = new Library, global = window_global) {\n  const builtin = this.module();\n  Object.defineProperties(this, {\n    _dirty: {value: new Set},\n    _updates: {value: new Set},\n    _precomputes: {value: [], writable: true},\n    _computing: {value: null, writable: true},\n    _init: {value: null, writable: true},\n    _modules: {value: new Map},\n    _variables: {value: new Set},\n    _disposed: {value: false, writable: true},\n    _builtin: {value: builtin},\n    _global: {value: global}\n  });\n  if (builtins) for (const name in builtins) {\n    (new Variable(TYPE_IMPLICIT, builtin)).define(name, [], builtins[name]);\n  }\n}\n\nObject.defineProperties(Runtime.prototype, {\n  _precompute: {value: runtime_precompute, writable: true, configurable: true},\n  _compute: {value: runtime_compute, writable: true, configurable: true},\n  _computeSoon: {value: runtime_computeSoon, writable: true, configurable: true},\n  _computeNow: {value: runtime_computeNow, writable: true, configurable: true},\n  dispose: {value: runtime_dispose, writable: true, configurable: true},\n  module: {value: runtime_module, writable: true, configurable: true},\n  fileAttachments: {value: FileAttachments, writable: true, configurable: true}\n});\n\nfunction runtime_dispose() {\n  this._computing = Promise.resolve();\n  this._disposed = true;\n  this._variables.forEach(v => {\n    v._invalidate();\n    v._version = NaN;\n  });\n}\n\nfunction runtime_module(define, observer = noop) {\n  let module;\n  if (define === undefined) {\n    if (module = this._init) {\n      this._init = null;\n      return module;\n    }\n    return new Module(this);\n  }\n  module = this._modules.get(define);\n  if (module) return module;\n  this._init = module = new Module(this);\n  this._modules.set(define, module);\n  try {\n    define(this, observer);\n  } finally {\n    this._init = null;\n  }\n  return module;\n}\n\nfunction runtime_precompute(callback) {\n  this._precomputes.push(callback);\n  this._compute();\n}\n\nfunction runtime_compute() {\n  return this._computing || (this._computing = this._computeSoon());\n}\n\nfunction runtime_computeSoon() {\n  return new Promise(frame).then(() => this._disposed ? undefined : this._computeNow());\n}\n\nasync function runtime_computeNow() {\n  let queue = [],\n      variables,\n      variable,\n      precomputes = this._precomputes;\n\n  // If there are any paused generators, resume them before computing so they\n  // can update (if synchronous) before computing downstream variables.\n  if (precomputes.length) {\n    this._precomputes = [];\n    for (const callback of precomputes) callback();\n    await runtime_defer(3);\n  }\n\n  // Compute the reachability of the transitive closure of dirty variables.\n  // Any newly-reachable variable must also be recomputed.\n  // Any no-longer-reachable variable must be terminated.\n  variables = new Set(this._dirty);\n  variables.forEach(function(variable) {\n    variable._inputs.forEach(variables.add, variables);\n    const reachable = variable_reachable(variable);\n    if (reachable > variable._reachable) {\n      this._updates.add(variable);\n    } else if (reachable < variable._reachable) {\n      variable._invalidate();\n    }\n    variable._reachable = reachable;\n  }, this);\n\n  // Compute the transitive closure of updating, reachable variables.\n  variables = new Set(this._updates);\n  variables.forEach(function(variable) {\n    if (variable._reachable) {\n      variable._indegree = 0;\n      variable._outputs.forEach(variables.add, variables);\n    } else {\n      variable._indegree = NaN;\n      variables.delete(variable);\n    }\n  });\n\n  this._computing = null;\n  this._updates.clear();\n  this._dirty.clear();\n\n  // Compute the indegree of updating variables.\n  variables.forEach(function(variable) {\n    variable._outputs.forEach(variable_increment);\n  });\n\n  do {\n    // Identify the root variables (those with no updating inputs).\n    variables.forEach(function(variable) {\n      if (variable._indegree === 0) {\n        queue.push(variable);\n      }\n    });\n\n    // Compute the variables in topological order.\n    while (variable = queue.pop()) {\n      variable_compute(variable);\n      variable._outputs.forEach(postqueue);\n      variables.delete(variable);\n    }\n\n    // Any remaining variables are circular, or depend on them.\n    variables.forEach(function(variable) {\n      if (variable_circular(variable)) {\n        variable_error(variable, new RuntimeError(\"circular definition\"));\n        variable._outputs.forEach(variable_decrement);\n        variables.delete(variable);\n      }\n    });\n  } while (variables.size);\n\n  function postqueue(variable) {\n    if (--variable._indegree === 0) {\n      queue.push(variable);\n    }\n  }\n}\n\n// We want to give generators, if theyre defined synchronously, a chance to\n// update before computing downstream variables. This creates a synchronous\n// promise chain of the given depth that well await before recomputing\n// downstream variables.\nfunction runtime_defer(depth = 0) {\n  let p = Promise.resolve();\n  for (let i = 0; i < depth; ++i) p = p.then(() => {});\n  return p;\n}\n\nfunction variable_circular(variable) {\n  const inputs = new Set(variable._inputs);\n  for (const i of inputs) {\n    if (i === variable) return true;\n    i._inputs.forEach(inputs.add, inputs);\n  }\n  return false;\n}\n\nfunction variable_increment(variable) {\n  ++variable._indegree;\n}\n\nfunction variable_decrement(variable) {\n  --variable._indegree;\n}\n\nfunction variable_value(variable) {\n  return variable._promise.catch(variable._rejector);\n}\n\nfunction variable_invalidator(variable) {\n  return new Promise(function(resolve) {\n    variable._invalidate = resolve;\n  });\n}\n\nfunction variable_intersector(invalidation, variable) {\n  let node = typeof IntersectionObserver === \"function\" && variable._observer && variable._observer._node;\n  let visible = !node, resolve = noop, reject = noop, promise, observer;\n  if (node) {\n    observer = new IntersectionObserver(([entry]) => (visible = entry.isIntersecting) && (promise = null, resolve()));\n    observer.observe(node);\n    invalidation.then(() => (observer.disconnect(), observer = null, reject()));\n  }\n  return function(value) {\n    if (visible) return Promise.resolve(value);\n    if (!observer) return Promise.reject();\n    if (!promise) promise = new Promise((y, n) => (resolve = y, reject = n));\n    return promise.then(() => value);\n  };\n}\n\nfunction variable_compute(variable) {\n  variable._invalidate();\n  variable._invalidate = noop;\n  variable._pending();\n\n  const value0 = variable._value;\n  const version = ++variable._version;\n\n  // Lazily-constructed invalidation variable; only constructed if referenced as an input.\n  let invalidation = null;\n\n  // If the variable doesnt have any inputs, we can optimize slightly.\n  const promise = variable._promise = (variable._inputs.length\n      ? Promise.all(variable._inputs.map(variable_value)).then(define)\n      : new Promise(resolve => resolve(variable._definition.call(value0))))\n    .then(generate);\n\n  // Compute the initial value of the variable.\n  function define(inputs) {\n    if (variable._version !== version) throw variable_stale;\n\n    // Replace any reference to invalidation with the promise, lazily.\n    for (let i = 0, n = inputs.length; i < n; ++i) {\n      switch (inputs[i]) {\n        case variable_invalidation: {\n          inputs[i] = invalidation = variable_invalidator(variable);\n          break;\n        }\n        case variable_visibility: {\n          if (!invalidation) invalidation = variable_invalidator(variable);\n          inputs[i] = variable_intersector(invalidation, variable);\n          break;\n        }\n        case variable_variable: {\n          inputs[i] = variable;\n          break;\n        }\n      }\n    }\n\n    return variable._definition.apply(value0, inputs);\n  }\n\n  // If the value is a generator, then retrieve its first value, and dispose of\n  // the generator if the variable is invalidated. Note that the cell may\n  // already have been invalidated here, in which case we need to terminate the\n  // generator immediately!\n  function generate(value) {\n    if (variable._version !== version) throw variable_stale;\n    if (generatorish(value)) {\n      (invalidation || variable_invalidator(variable)).then(variable_return(value));\n      return variable_generate(variable, version, value);\n    }\n    return value;\n  }\n\n  promise.then((value) => {\n    variable._value = value;\n    variable._fulfilled(value);\n  }, (error) => {\n    if (error === variable_stale || variable._version !== version) return;\n    variable._value = undefined;\n    variable._rejected(error);\n  });\n}\n\nfunction variable_generate(variable, version, generator) {\n  const runtime = variable._module._runtime;\n  let currentValue; // so that yield resolves to the yielded value\n\n  // Retrieve the next value from the generator; if successful, invoke the\n  // specified callback. The returned promise resolves to the yielded value, or\n  // to undefined if the generator is done.\n  function compute(onfulfilled) {\n    return new Promise(resolve => resolve(generator.next(currentValue))).then(({done, value}) => {\n      return done ? undefined : Promise.resolve(value).then(onfulfilled);\n    });\n  }\n\n  // Retrieve the next value from the generator; if successful, fulfill the\n  // variable, compute downstream variables, and schedule the next value to be\n  // pulled from the generator at the start of the next animation frame. If not\n  // successful, reject the variable, compute downstream variables, and return.\n  function recompute() {\n    const promise = compute((value) => {\n      if (variable._version !== version) throw variable_stale;\n      currentValue = value;\n      postcompute(value, promise).then(() => runtime._precompute(recompute));\n      variable._fulfilled(value);\n      return value;\n    });\n    promise.catch((error) => {\n      if (error === variable_stale || variable._version !== version) return;\n      postcompute(undefined, promise);\n      variable._rejected(error);\n    });\n  }\n\n  // After the generator fulfills or rejects, set its current value, promise,\n  // and schedule any downstream variables for update.\n  function postcompute(value, promise) {\n    variable._value = value;\n    variable._promise = promise;\n    variable._outputs.forEach(runtime._updates.add, runtime._updates);\n    return runtime._compute();\n  }\n\n  // When retrieving the first value from the generator, the promise graph is\n  // already established, so we only need to queue the next pull.\n  return compute((value) => {\n    if (variable._version !== version) throw variable_stale;\n    currentValue = value;\n    runtime._precompute(recompute);\n    return value;\n  });\n}\n\nfunction variable_error(variable, error) {\n  variable._invalidate();\n  variable._invalidate = noop;\n  variable._pending();\n  ++variable._version;\n  variable._indegree = NaN;\n  (variable._promise = Promise.reject(error)).catch(noop);\n  variable._value = undefined;\n  variable._rejected(error);\n}\n\nfunction variable_return(generator) {\n  return function() {\n    generator.return();\n  };\n}\n\nfunction variable_reachable(variable) {\n  if (variable._observer !== no_observer) return true; // Directly reachable.\n  const outputs = new Set(variable._outputs);\n  for (const output of outputs) {\n    if (output._observer !== no_observer) return true;\n    output._outputs.forEach(outputs.add, outputs);\n  }\n  return false;\n}\n\nfunction window_global(name) {\n  return globalThis[name];\n}\n"],"file":"static/runtime.Ck86Unyv.js"}
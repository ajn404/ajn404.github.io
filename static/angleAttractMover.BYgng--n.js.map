{"version":3,"mappings":"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","names":["AttractMover","Mover","p","force","f","p5_dynamic","Attractor","x","y","mover","__vitePreload","distance","strength","resolve","angleAttractMover","num","setNum","useState","useDebouncedNum","useDebounce","sketch","useCallback","attractor","setup","draw","m","e","resize","jsxs","Fragment","jsx","Slider","cn","value","Basic"],"ignoreList":[],"sources":["../../src/components/react/p5/Oscillation/composition/attractMover.ts","../../src/components/react/p5/Oscillation/angleAttractMover.tsx"],"sourcesContent":["import type p5 from \"p5\";\nimport { Mover } from \"../Mover\";\n\nclass AttractMover extends Mover {\n  mass: number = 0;\n\n  update() {\n    this.velocity.add(this.acceleration);\n    this.position.add(this.velocity);\n    this.angleAcceleration = this.acceleration.x / 10.0;\n    this.angleVelocity += this.angleAcceleration;\n    this.angleVelocity = this.p.constrain(this.angleVelocity, -0.1, 0.1);\n    this.angle += this.angleVelocity;\n    this.acceleration.mult(0);\n  }\n\n  constructor(p: p5) {\n    super(p);\n    this.mass = p.random(0.5, 2);\n    this.circleRadius = this.mass * 8;\n    this.color = p.color(\n      p.random(0, 255),\n      p.random(0, 255),\n      p.random(0, 255),\n      p.random(0, 100)\n    );\n  }\n\n  applyForce(force: p5.Vector) {\n    let f = force.copy(); // 创建一个副本\n    f.div(this.mass);\n    this.acceleration.add(f);\n  }\n}\nlet p5_dynamic;\n\nexport class Attractor {\n  G: number = 1;\n  mass: number = 1;\n  position: p5.Vector;\n  p: p5;\n\n  constructor(p: p5, x: number, y: number) {\n    this.position = p.createVector(x, y);\n    this.mass = 20;\n    this.G = 1; //引力常数\n    this.p = p;\n  }\n\n  async attract(mover: AttractMover): Promise<p5.Vector> {\n    if (!p5_dynamic) p5_dynamic = await import(\"p5\");\n    let force = p5_dynamic.Vector.sub(this.position, mover.position);\n    let distance = force.mag();\n    distance = this.p.constrain(distance, 5.0, 25.0);\n    //如果距离小于5，则将其设置为5；如果距离大于25，则将其设置为25。\n    let strength = (this.G * this.mass * mover.mass) / (distance * distance);\n    //计算引力的大小\n    force.setMag(strength);\n    //将力的大小设置为引力的大小\n    return new Promise(resolve => {\n      resolve(force);\n    });\n  }\n\n  display() {\n    const p = this.p;\n    p.ellipseMode(p.CENTER);\n    p.stroke(10);\n    p.fill(255, 0, 0);\n    p.ellipse(this.position.x, this.position.y, this.mass * 2);\n  }\n}\n\nexport default AttractMover;\n","import type p5 from \"p5\";\nimport Basic from \"@components/react/p5/index.tsx\";\nimport { Attractor } from \"./composition/attractMover\";\nimport Mover from \"./composition/attractMover\";\nimport { useCallback, useState } from \"react\";\nimport { useDebounce } from \"@uidotdev/usehooks\";\nimport { Slider } from \"@shadcn/ui/slider\";\n\nimport { cn } from \"@utils/utils\";\n\nexport default () => {\n  const [num, setNum] = useState(10);\n  const useDebouncedNum = useDebounce(num, 100);\n  const sketch = useCallback(\n    (p: p5) => {\n      let mover: Mover[];\n      let attractor: Attractor;\n      const setup = () => {\n        p.createCanvas(p.windowWidth / 2, 240);\n        mover = new Array(useDebouncedNum).fill(0).map(() => new Mover(p));\n        attractor = new Attractor(p, p.width / 2, p.height / 2);\n        p.frameRate(60);\n      };\n      const draw = () => {\n        try {\n          p.background(255);\n          attractor.display();\n          mover.forEach(async m => {\n            const force = await attractor.attract(m);\n            m.applyForce(force);\n            m.update();\n            m.checkEdges();\n            m.show();\n          });\n        } catch (e) {\n          p.noLoop();\n          console.log(e);\n        }\n      };\n      const resize = () => {\n        p.resizeCanvas(p.windowWidth / 2, 240);\n      };\n      p.setup = setup;\n      p.draw = draw;\n      p.windowResized = resize;\n    },\n    [useDebouncedNum]\n  );\n  return (\n    <>\n      小球数量debounceNum:{useDebouncedNum}\n      <br />\n      <Slider\n        defaultValue={[50]}\n        max={100}\n        min={1}\n        step={1}\n        className={cn(\"w-[100%] m-4\")}\n        onValueChange={value => {\n          setNum(value[0]);\n        }}\n        value={[num]}\n      />\n      <Basic sketch={sketch} showControls></Basic>\n    </>\n  );\n};\n"],"file":"static/angleAttractMover.BYgng--n.js"}
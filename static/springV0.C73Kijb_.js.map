{"version":3,"file":"springV0.C73Kijb_.js","sources":["../../src/components/react/p5/Oscillation/spring/springV0.tsx"],"sourcesContent":["import type p5 from \"p5\";\nimport Basic from \"@components/react/p5/index.tsx\";\nimport { useCallback, useState } from \"react\";\nimport { Bob } from \"./Bob\";\nimport { Spring } from \"./Spring\";\nimport { useDebounce } from \"@uidotdev/usehooks\";\nimport { Slider } from \"@shadcn/ui/slider\";\nimport { cn } from \"@utils/utils\";\n\nexport default () => {\n  let bob: Bob;\n  let spring: Spring;\n\n  let [k, setK] = useState(0.2); //弹性系数\n  let debounceK = useDebounce(k, 500);\n\n  const sketch = useCallback(\n    (p: p5) => {\n      const setup = () => {\n        p.createCanvas(p.windowWidth / 2, 240);\n        bob = new Bob(p, p.width / 2, 150);\n        spring = new Spring(p, p.width / 2, 1, 150, debounceK);\n      };\n\n      const draw = () => {\n        p.background(255);\n        let gravity = p.createVector(0, 0.2);\n        bob.applyForce(gravity);\n        bob.update();\n        bob.handleDrag(p.mouseX, p.mouseY);\n        spring.connect(bob);\n        spring.constrainLength(bob, 30, 230);\n        spring.showLine(bob);\n        bob.show();\n        spring.show();\n      };\n\n      p.mousePressed = () => {\n        bob.handleMousePressed(p.mouseX, p.mouseY);\n      };\n\n      p.touchStarted = () => {\n        bob.handleMousePressed(p.mouseX, p.mouseY);\n      };\n\n      p.touchEnded = () => {\n        bob.handleMouseReleased();\n      };\n\n      p.mouseReleased = () => {\n        bob.handleMouseReleased();\n      };\n\n      const resize = () => {\n        p.resizeCanvas(p.windowWidth / 2, 240);\n      };\n\n      p.setup = setup;\n      p.draw = draw;\n      p.windowResized = resize;\n    },\n    [debounceK]\n  );\n\n  return (\n    <>\n      <Basic sketch={sketch} showControls />\n      弹性系数：{debounceK}\n      <Slider\n        defaultValue={[0.2]}\n        max={1}\n        min={0.1}\n        step={0.01}\n        className={cn(\"w-[100%] m-4\")}\n        onValueChange={value => {\n          setK(value[0]);\n        }}\n        value={[k]}\n      />\n    </>\n  );\n};\n"],"names":["springV0","bob","spring","k","setK","useState","debounceK","useDebounce","sketch","useCallback","p","setup","Bob","Spring","draw","gravity","resize","jsxs","Fragment","jsx","Basic","Slider","cn","value"],"mappings":"uhCASA,MAAAA,EAAe,IAAM,CACf,IAAAC,EACAC,EAEA,CAACC,EAAGC,CAAI,EAAIC,EAAAA,SAAS,EAAG,EACxBC,EAAYC,EAAYJ,EAAG,GAAG,EAElC,MAAMK,EAASC,EAAA,YACZC,GAAU,CACT,MAAMC,EAAQ,IAAM,CAClBD,EAAE,aAAaA,EAAE,YAAc,EAAG,GAAG,EACrCT,EAAM,IAAIW,EAAIF,EAAGA,EAAE,MAAQ,EAAG,GAAG,EACxBR,EAAA,IAAIW,EAAOH,EAAGA,EAAE,MAAQ,EAAG,EAAG,IAAKJ,CAAS,CACvD,EAEMQ,EAAO,IAAM,CACjBJ,EAAE,WAAW,GAAG,EAChB,IAAIK,EAAUL,EAAE,aAAa,EAAG,EAAG,EACnCT,EAAI,WAAWc,CAAO,EACtBd,EAAI,OAAO,EACXA,EAAI,WAAWS,EAAE,OAAQA,EAAE,MAAM,EACjCR,EAAO,QAAQD,CAAG,EACXC,EAAA,gBAAgBD,EAAK,GAAI,GAAG,EACnCC,EAAO,SAASD,CAAG,EACnBA,EAAI,KAAK,EACTC,EAAO,KAAK,CACd,EAEAQ,EAAE,aAAe,IAAM,CACrBT,EAAI,mBAAmBS,EAAE,OAAQA,EAAE,MAAM,CAC3C,EAEAA,EAAE,aAAe,IAAM,CACrBT,EAAI,mBAAmBS,EAAE,OAAQA,EAAE,MAAM,CAC3C,EAEAA,EAAE,WAAa,IAAM,CACnBT,EAAI,oBAAoB,CAC1B,EAEAS,EAAE,cAAgB,IAAM,CACtBT,EAAI,oBAAoB,CAC1B,EAEA,MAAMe,EAAS,IAAM,CACnBN,EAAE,aAAaA,EAAE,YAAc,EAAG,GAAG,CACvC,EAEAA,EAAE,MAAQC,EACVD,EAAE,KAAOI,EACTJ,EAAE,cAAgBM,CACpB,EACA,CAACV,CAAS,CACZ,EAEA,OAEIW,EAAA,KAAAC,WAAA,CAAA,SAAA,CAACC,EAAAA,IAAAC,EAAA,CAAM,OAAAZ,EAAgB,aAAY,EAAC,CAAA,EAAE,QAChCF,EACNa,EAAA,IAACE,EAAA,CACC,aAAc,CAAC,EAAG,EAClB,IAAK,EACL,IAAK,GACL,KAAM,IACN,UAAWC,EAAG,cAAc,EAC5B,cAAwBC,GAAA,CACjBnB,EAAAmB,EAAM,CAAC,CAAC,CACf,EACA,MAAO,CAACpB,CAAC,CAAA,CAAA,CACX,EACF,CAEJ"}
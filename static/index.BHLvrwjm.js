import{r as e}from"./index.D4IXJ7me.js";import{b as k,f as K,u as _,P as $,L}from"./motion.BmElAWdg.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},s=new t.Error().stack;s&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[s]="397f8b4d-496a-4cc1-80a0-d30a76a945be",t._sentryDebugIdIdentifier="sentry-dbid-397f8b4d-496a-4cc1-80a0-d30a76a945be")}catch{}})();function v(){const t=e.useRef(!1);return k(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function O(){const t=v(),[s,n]=e.useState(0),r=e.useCallback(()=>{t.current&&n(s+1)},[s]);return[e.useCallback(()=>K.postRender(r),[r]),s]}class T extends e.Component{getSnapshotBeforeUpdate(s){const n=this.props.childRef.current;if(n&&s.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function U({children:t,isPresent:s}){const n=e.useId(),r=e.useRef(null),h=e.useRef({width:0,height:0,top:0,left:0});return e.useInsertionEffect(()=>{const{width:l,height:d,top:f,left:m}=h.current;if(s||!r.current||!l||!d)return;r.current.dataset.motionPopId=n;const a=document.createElement("style");return document.head.appendChild(a),a.sheet&&a.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${d}px !important;
            top: ${f}px !important;
            left: ${m}px !important;
          }
        `),()=>{document.head.removeChild(a)}},[s]),e.createElement(T,{isPresent:s,childRef:r,sizeRef:h},e.cloneElement(t,{ref:r}))}const I=({children:t,initial:s,isPresent:n,onExitComplete:r,custom:h,presenceAffectsLayout:l,mode:d})=>{const f=_(B),m=e.useId(),a=e.useMemo(()=>({id:m,initial:s,isPresent:n,custom:h,onExitComplete:o=>{f.set(o,!0);for(const u of f.values())if(!u)return;r&&r()},register:o=>(f.set(o,!1),()=>f.delete(o))}),l?void 0:[n]);return e.useMemo(()=>{f.forEach((o,u)=>f.set(u,!1))},[n]),e.useEffect(()=>{!n&&!f.size&&r&&r()},[n]),d==="popLayout"&&(t=e.createElement(U,{isPresent:n},t)),e.createElement($.Provider,{value:a},t)};function B(){return new Map}function S(t){return e.useEffect(()=>()=>t(),[])}const p=t=>t.key||"";function A(t,s){t.forEach(n=>{const r=p(n);s.set(r,n)})}function G(t){const s=[];return e.Children.forEach(t,n=>{e.isValidElement(n)&&s.push(n)}),s}const W=({children:t,custom:s,initial:n=!0,onExitComplete:r,exitBeforeEnter:h,presenceAffectsLayout:l=!0,mode:d="sync"})=>{const f=e.useContext(L).forceRender||O()[0],m=v(),a=G(t);let o=a;const u=e.useRef(new Map).current,g=e.useRef(o),y=e.useRef(new Map).current,R=e.useRef(!0);if(k(()=>{R.current=!1,A(a,y),g.current=o}),S(()=>{R.current=!0,y.clear(),u.clear()}),R.current)return e.createElement(e.Fragment,null,o.map(i=>e.createElement(I,{key:p(i),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:l,mode:d},i)));o=[...o];const b=g.current.map(p),x=a.map(p),z=b.length;for(let i=0;i<z;i++){const c=b[i];x.indexOf(c)===-1&&!u.has(c)&&u.set(c,void 0)}return d==="wait"&&u.size&&(o=[]),u.forEach((i,c)=>{if(x.indexOf(c)!==-1)return;const w=y.get(c);if(!w)return;const F=b.indexOf(c);let C=i;if(!C){const D=()=>{u.delete(c);const M=Array.from(y.keys()).filter(E=>!x.includes(E));if(M.forEach(E=>y.delete(E)),g.current=a.filter(E=>{const P=p(E);return P===c||M.includes(P)}),!u.size){if(m.current===!1)return;f(),r&&r()}};C=e.createElement(I,{key:p(w),isPresent:!1,onExitComplete:D,custom:s,presenceAffectsLayout:l,mode:d},w),u.set(c,C)}o.splice(F,0,C)}),o=o.map(i=>{const c=i.key;return u.has(c)?i:e.createElement(I,{key:p(i),isPresent:!0,presenceAffectsLayout:l,mode:d},i)}),e.createElement(e.Fragment,null,u.size?o:o.map(i=>e.cloneElement(i)))};export{W as A};
//# sourceMappingURL=index.BHLvrwjm.js.map

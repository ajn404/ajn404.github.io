import{j as n}from"./jsx-runtime.DZ3s2XAB.js";import{r as l}from"./index.D4IXJ7me.js";import{c as _}from"./utils.CQ2vwKer.js";import"./_sentry-release-injection-file.B-UwqLso.js";import{m as D}from"./motion.BmElAWdg.js";import{A as M}from"./index.BHLvrwjm.js";import"./_commonjsHelpers.DqoTaOmB.js";(function(){try{var s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},m=new s.Error().stack;m&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[m]="8f1be0f3-1f1e-4ada-b5d9-a5fb3bd879de",s._sentryDebugIdIdentifier="sentry-dbid-8f1be0f3-1f1e-4ada-b5d9-a5fb3bd879de")}catch{}})();function $({placeholders:s,onChange:m,onSubmit:y}){const[h,C]=l.useState(0),b=l.useRef(null),S=()=>{b.current=setInterval(()=>{C(e=>(e+1)%s.length)},3e3)},I=()=>{document.visibilityState!=="visible"&&b.current?(clearInterval(b.current),b.current=null):document.visibilityState==="visible"&&S()};l.useEffect(()=>(S(),document.addEventListener("visibilitychange",I),()=>{b.current&&clearInterval(b.current),document.removeEventListener("visibilitychange",I)}),[s]);const k=l.useRef(null),x=l.useRef([]),v=l.useRef(null),[c,R]=l.useState(""),[w,z]=l.useState(!1),j=l.useCallback(()=>{if(!v.current)return;const e=k.current;if(!e)return;const i=e.getContext("2d");if(!i)return;e.width=800,e.height=800,i.clearRect(0,0,800,800);const o=getComputedStyle(v.current),u=parseFloat(o.getPropertyValue("font-size"));i.font=`${u*2}px ${o.fontFamily}`,i.fillStyle="#FFF",i.fillText(c,16,40);const r=i.getImageData(0,0,800,800).data,t=[];for(let f=0;f<800;f++){let g=4*f*800;for(let a=0;a<800;a++){let p=g+4*a;r[p]!==0&&r[p+1]!==0&&r[p+2]!==0&&t.push({x:a,y:f,color:[r[p],r[p+1],r[p+2],r[p+3]]})}}x.current=t.map(({x:f,y:g,color:a})=>({x:f,y:g,r:1,color:`rgba(${a[0]}, ${a[1]}, ${a[2]}, ${a[3]})`}))},[c]);l.useEffect(()=>{j()},[c,j]);const E=e=>{const i=(o=0)=>{requestAnimationFrame(()=>{const u=[];for(let r=0;r<x.current.length;r++){const t=x.current[r];if(t.x<o)u.push(t);else{if(t.r<=0){t.r=0;continue}t.x+=Math.random()>.5?1:-1,t.y+=Math.random()>.5?1:-1,t.r-=.05*Math.random(),u.push(t)}}x.current=u;const d=k.current?.getContext("2d");d&&(d.clearRect(o,0,800,800),x.current.forEach(r=>{const{x:t,y:f,r:g,color:a}=r;t>o&&(d.beginPath(),d.rect(t,f,g,g),d.fillStyle=a,d.strokeStyle=a,d.stroke())})),x.current.length>0?i(o-8):(R(""),z(!1))})};i(e)},N=e=>{e.key==="Enter"&&!w&&A()},A=()=>{if(z(!0),j(),(v.current?.value||"")&&v.current){const i=x.current.reduce((o,u)=>u.x>o?u.x:o,0);E(i)}},F=e=>{e.preventDefault(),A(),y&&y(e)};return n.jsxs("form",{className:_("w-full relative max-w-xl mx-auto bg-white dark:bg-zinc-800 h-12 rounded-full overflow-hidden shadow-[0px_2px_3px_-1px_rgba(0,0,0,0.1),_0px_1px_0px_0px_rgba(25,28,33,0.02),_0px_0px_0px_1px_rgba(25,28,33,0.08)] transition duration-200",c&&"bg-gray-50"),onSubmit:F,children:[n.jsx("canvas",{className:_("absolute pointer-events-none  text-base transform scale-50 top-[20%] left-2 sm:left-8 origin-top-left filter invert dark:invert-0 pr-20",w?"opacity-100":"opacity-0"),ref:k}),n.jsx("input",{onChange:e=>{w||(R(e.target.value),m&&m(e))},onKeyDown:N,ref:v,value:c,type:"text",className:_("w-full relative text-sm sm:text-base z-50 border-none dark:text-white bg-transparent text-black h-full rounded-full focus:outline-none focus:ring-0 pl-4 sm:pl-10 pr-20",w&&"text-transparent dark:text-transparent")}),n.jsx("button",{disabled:!c,type:"submit",className:"absolute right-2 top-1/2 z-50 -translate-y-1/2 h-8 w-8 rounded-full disabled:bg-gray-100 bg-black dark:bg-zinc-900 dark:disabled:bg-zinc-800 transition duration-200 flex items-center justify-center",children:n.jsxs(D.svg,{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-300 h-4 w-4",children:[n.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),n.jsx(D.path,{d:"M5 12l14 0",initial:{strokeDasharray:"50%",strokeDashoffset:"50%"},animate:{strokeDashoffset:c?0:"50%"},transition:{duration:.3,ease:"linear"}}),n.jsx("path",{d:"M13 18l6 -6"}),n.jsx("path",{d:"M13 6l6 6"})]})}),n.jsx("div",{className:"absolute inset-0 flex items-center rounded-full pointer-events-none",children:n.jsx(M,{mode:"wait",children:!c&&n.jsx(D.p,{initial:{y:5,opacity:0},animate:{y:0,opacity:1},exit:{y:-15,opacity:0},transition:{duration:.3,ease:"linear"},className:"dark:text-zinc-500 text-sm sm:text-base font-normal text-neutral-500 pl-4 sm:pl-12 text-left w-[calc(100%-2rem)] truncate",children:s[h]},`current-placeholder-${h}`)})})]})}const H=()=>{const s=["今天吃什么","明天股票会涨吗","前端写腻了吗","glsl怎么这么难啊","感觉自己该健身了"],m=h=>{console.log(h.target.value)},y=h=>{h.preventDefault(),console.log("submitted")};return n.jsx("div",{className:"m-auto flex flex-col justify-center  items-center px-4",children:n.jsx($,{placeholders:s,onChange:m,onSubmit:y})})};export{H as default};
//# sourceMappingURL=placeholders-and-vanish-input.BE3ZKgsh.js.map

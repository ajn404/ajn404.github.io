{"version":3,"file":"storage.YUrNAyX6.js","sources":["../../src/components/vue/challenge/storage.vue"],"sourcesContent":["<script setup lang='ts'>\n\nimport { customRef } from \"vue\"\n\n/**\n * Implement the composable function\n * Make sure the function works correctly\n*/\nfunction useLocalStorage(key: string, initialValue: number) {\n    let temp = initialValue;\n    const value = customRef<number>((track, trigger) => {\n        return {\n            get: () => {\n                track()\n                return Number(localStorage.getItem(key)) ?? initialValue\n            },\n            set: (value) => {\n                if (temp !== value) {\n                    temp = value;\n                    localStorage.setItem(key, `${value  }`)\n                    trigger()\n                }\n\n                \n            }\n        }\n    })\n    return value\n}\n\nconst counter = useLocalStorage(\"counter\", 0)\n\n// We can get localStorage by triggering the getter:\nconsole.log(counter.value)\n\n// And we can also set localStorage by triggering the setter:\n\nconst update = () => counter.value++;\n\nconst remove = () => {\n    counter.value = 0;\n    localStorage.removeItem(\"counter\")\n};\n\n</script>\n\n<template>\n    <p>Counter: {{ counter }}</p>\n    <button class=\"tw-button mx-5 select-none\" @click=\"update\">\n        Update\n    </button>\n     <button @click=\"remove\" class=\"tw-button mx-5 select-none\">\n            remove\n        </button>\n    \n</template>\n"],"names":["useLocalStorage","key","initialValue","temp","customRef","track","trigger","value","counter","_openBlock","_createElementBlock","_Fragment","_createElementVNode","_toDisplayString","$setup"],"mappings":"omBAQS,SAAAA,EAAgBC,EAAaC,EAAsB,CACxD,IAAIC,EAAOD,EAkBJ,OAjBOE,EAAkB,CAACC,EAAOC,KAC7B,CACH,IAAK,KACKD,EAAA,EACC,OAAO,aAAa,QAAQJ,CAAG,CAAC,GAAKC,GAEhD,IAAMK,GAAU,CACRJ,IAASI,IACFA,EAAAA,EACP,aAAa,QAAQN,EAAK,GAAGM,CAAO,EAAE,EAC9BD,EAAA,EACZ,CAIR,EACH,CACM,CAGL,MAAAE,EAAUR,EAAgB,UAAW,CAAC,EAGpC,QAAA,IAAIQ,EAAQ,KAAK,8CAIV,IAAMA,EAAQ,eAEd,IAAM,CACjBA,EAAQ,MAAQ,EAChB,aAAa,WAAW,SAAS,CACrC,2GA1CA,OAAAC,EAAA,EAAAC,EAAAC,EAAA,KAAA,CA+CIC,EAA6B,IAAA,KAA1B,YAASC,EAAGC,EAAO,OAAA,EAAA,CAAA,EACtBF,EAES,SAAA,CAFD,MAAM,6BAA8B,QAAOE,EAAA,MAAA,EAAQ,UAE3D,EACCF,EAEY,SAAA,CAFH,QAAOE,EAAA,OAAQ,MAAM,4BAAA,EAA6B,UAExD,CAAA,EAAA,EAAA"}
{"version":3,"file":"demo.BpXhwses.js","sources":["../../src/components/react/webgl/useParticle.tsx","../../src/components/react/webgl/demo.tsx"],"sourcesContent":["import { useEffect } from \"react\";\n\nexport const useParticle = (\n  canvasId: string = \"canvas1\",\n  imgId: string = \"image1\",\n  buttonId: string = \"wrapButton\",\n  startId: string = \"start\"\n) => {\n  useEffect(() => {\n    let aId = 0;\n    const init = () => {\n      const canvas = document.getElementById(canvasId) as HTMLCanvasElement;\n      const wrapButton = document.getElementById(buttonId) as HTMLButtonElement;\n      const ctx = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\n\n      const width = canvas.clientWidth as number;\n      const height = canvas.clientHeight as number;\n      class Particle {\n        x: number;\n        y: number;\n        size: number;\n        effect: Effect;\n        vx: number;\n        vy: number;\n        originY: number;\n        originX: number;\n        color: string;\n        ease: number = 0.1;\n        constructor(effect: Effect, color: string, j: number, i: number) {\n          this.effect = effect;\n          this.x = Math.random() * this.effect.width;\n          this.y = Math.random() * this.effect.height;\n          this.originX = Math.floor(j);\n          this.originY = i;\n          // this.x =this.originX;\n          // this.y = this.originY;\n          this.color = color;\n          this.size = this.effect.gap;\n          this.ease = 0.1;\n          // this.vx = Math.random()  - 0.5;\n          // this.vy = Math.random()  - 0.5;\n\n          this.vx = 0;\n          this.vy = 0;\n        }\n\n        draw(contex: CanvasRenderingContext2D) {\n          contex.fillStyle = this.color;\n          contex.fillRect(this.x, this.y, this.size, this.size);\n        }\n        update() {\n          //å¦™\n          this.x += (this.originX - this.x) * this.ease;\n          this.y += (this.originY - this.y) * this.ease;\n          // this.y += this.vy;\n        }\n\n        wrap() {\n          this.x = Math.random() * this.effect.width;\n          this.y = Math.random() * this.effect.height;\n          this.ease = 0.05;\n        }\n      }\n\n      class Effect {\n        width: number;\n        height: number;\n        particles: Array<Particle>;\n        imgae: HTMLImageElement;\n        centerX: number;\n        centerY: number;\n        x: number;\n        y: number;\n        gap: number;\n        constructor(width: number, height: number) {\n          this.width = width;\n          this.height = height;\n          this.particles = [];\n          this.imgae = document.getElementById(imgId) as HTMLImageElement;\n          this.centerX = this.width * 0.5;\n          this.centerY = this.height * 0.5;\n          this.x = this.centerX - this.imgae.width * 0.5;\n          this.y = this.centerY - this.imgae.height * 0.5;\n          this.gap = 1;\n        }\n\n        init(context: CanvasRenderingContext2D) {\n          context.drawImage(this.imgae, this.x, this.y);\n          const pixels = context.getImageData(\n            0,\n            0,\n            this.width,\n            this.height\n          ).data;\n          for (let i = 0; i < this.height; i += this.gap) {\n            for (let j = 0; j < this.width; j += this.gap) {\n              const index = (i * this.width + j) * 4;\n              const red = pixels[index];\n              const green = pixels[index + 1];\n              const blue = pixels[index + 2];\n              const alpha = pixels[index + 3];\n\n              let color = `rgb(${red},${green},${blue})`;\n              if (alpha > 0) {\n                this.particles.push(new Particle(this, color, j, i));\n              }\n            }\n          }\n        }\n        draw(context: CanvasRenderingContext2D) {\n          this.particles.forEach(item => item.draw(context));\n        }\n        update() {\n          this.particles.forEach(item => item.update());\n        }\n\n        wrap() {\n          this.particles.forEach(item => item.wrap());\n        }\n      }\n\n      const effect = new Effect(width, height);\n      effect.init(ctx);\n      const animate = () => {\n        ctx.clearRect(0, 0, width, height);\n        effect.draw(ctx);\n        effect.update();\n        aId = requestAnimationFrame(animate);\n      };\n      animate();\n      wrapButton.addEventListener(\"click\", () => {\n        effect.wrap();\n      });\n    };\n\n    init();\n  });\n};\n","import { useParticle } from \"./useParticle.tsx\";\n\nexport default () => {\n  useParticle();\n\n  return (\n    <div className=\"demo \">\n      <canvas\n        id=\"canvas1\"\n        className=\"m-auto\"\n        style={{\n          background:\n            \"linear-gradient(to right,rgb(251, 254, 251),rgb(33, 39, 55));\",\n        }}\n      ></canvas>\n      <img\n        className=\"hidden w-[200px]\"\n        src=\"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDg4LjU5OTk2MDMyNzE0ODQ0IDcwIiB3aWR0aD0iMTc3LjE5OTkyMDY1NDI5Njg4IgogICAgaGVpZ2h0PSIxNDAiPgogICAgPCEtLSBzdmctc291cmNlOmV4Y2FsaWRyYXcgLS0+CgogICAgPGRlZnM+CiAgICAgICAgPHN0eWxlIGNsYXNzPSJzdHlsZS1mb250cyI+CiAgICAgICAgICAgIEBmb250LWZhY2UgewogICAgICAgICAgICAgICAgZm9udC1mYW1pbHk6ICJWaXJnaWwiOwogICAgICAgICAgICAgICAgc3JjOiB1cmwoImh0dHBzOi8vZXhjYWxpZHJhdy5jb20vVmlyZ2lsLndvZmYyIik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIEBmb250LWZhY2UgewogICAgICAgICAgICAgICAgZm9udC1mYW1pbHk6ICJDYXNjYWRpYSI7CiAgICAgICAgICAgICAgICBzcmM6IHVybCgiaHR0cHM6Ly9leGNhbGlkcmF3LmNvbS9DYXNjYWRpYS53b2ZmMiIpOwogICAgICAgICAgICB9CiAgICAgICAgPC9zdHlsZT4KCiAgICA8L2RlZnM+CiAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMCAxMCkgcm90YXRlKDAgMzQuMjk5OTgwMTYzNTc0MjIgMjUpIj4KICAgICAgICA8dGV4dCB4PSIwIiB5PSIwIiBmb250LWZhbWlseT0iVmlyZ2lsLCBTZWdvZSBVSSBFbW9qaSIgZm9udC1zaXplPSIyMHB4IiBmaWxsPSIjMWUxZTFlIiB0ZXh0LWFuY2hvcj0ic3RhcnQiCiAgICAgICAgICAgIHN0eWxlPSJ3aGl0ZS1zcGFjZTogcHJlOyIgZGlyZWN0aW9uPSJsdHIiIGRvbWluYW50LWJhc2VsaW5lPSJ0ZXh0LWJlZm9yZS1lZGdlIj5ham40MDQ8L3RleHQ+CgogICAgPC9nPgo8L3N2Zz4=\"\n        id=\"image1\"\n      />\n\n      <div className=\"controls text-center\">\n        <button id=\"wrapButton\" className=\"m-[20px] p-[20px] font-mono text-lg\">\n          Wrap\n        </button>\n        <button id=\"start\" className=\"m-[20px] p-[20px] font-mono text-lg\">\n          init\n        </button>\n      </div>\n    </div>\n  );\n};\n"],"names":["useParticle","canvasId","imgId","buttonId","startId","useEffect","canvas","wrapButton","ctx","width","height","Particle","effect","color","j","i","contex","Effect","context","pixels","index","red","green","blue","alpha","item","animate","demo","jsxs","jsx"],"mappings":"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"}
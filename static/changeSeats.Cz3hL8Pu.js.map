{"version":3,"file":"changeSeats.Cz3hL8Pu.js","sources":["../../src/components/react/p5/little/changeSeats.tsx"],"sourcesContent":["import type p5 from \"p5\";\nimport Basic from \"@components/react/p5/index.tsx\";\nimport { useCallback } from \"react\";\n\nexport default () => {\n  const sketch = useCallback((p: p5) => {\n    const ROWS = 6;\n    const COLS = 8;\n    const TOTAL_STUDENTS = ROWS * COLS;\n    let seats: number[] = [];\n    let cellWidth: number;\n    let cellHeight: number;\n\n    const setup = () => {\n      p.createCanvas(p.windowWidth / 2, 240);\n      // 初始化座位数组\n      seats = Array.from({ length: TOTAL_STUDENTS }, (_, i) => i);\n      cellWidth = p.width / COLS;\n      cellHeight = p.height / ROWS;\n      shuffleSeats();\n    };\n\n    const shuffleSeats = () => {\n      // Fisher-Yates 洗牌算法\n      for (let i = seats.length - 1; i > 0; i--) {\n        const j = Math.floor(p.random(i + 1));\n        [seats[i], seats[j]] = [seats[j], seats[i]];\n      }\n    };\n\n    const draw = () => {\n      p.background(255);\n\n      // 绘制座位\n      for (let row = 0; row < ROWS; row++) {\n        for (let col = 0; col < COLS; col++) {\n          const x = col * cellWidth;\n          const y = row * cellHeight;\n          const index = row * COLS + col;\n\n          // 绘制座位边框\n          p.stroke(0);\n          p.noFill();\n          p.rect(x, y, cellWidth, cellHeight);\n\n          // 显示学生编号\n          p.fill(0);\n          p.noStroke();\n          p.textAlign(p.CENTER, p.CENTER);\n          p.text(seats[index] + 1, x + cellWidth / 2, y + cellHeight / 2);\n        }\n      }\n    };\n\n    const mousePressed = () => {\n      shuffleSeats(); // 点击画布时重新随机排列\n    };\n\n    const resize = () => {\n      p.resizeCanvas(p.windowWidth / 2, 240);\n      cellWidth = p.width / COLS;\n      cellHeight = p.height / ROWS;\n    };\n\n    p.setup = setup;\n    p.draw = draw;\n    p.mousePressed = mousePressed;\n    p.windowResized = resize;\n  }, []);\n\n  return (\n    <>\n      <Basic sketch={sketch} />\n    </>\n  );\n};\n"],"names":["changeSeats","sketch","useCallback","p","seats","cellWidth","cellHeight","setup","_","i","shuffleSeats","j","draw","row","col","x","y","index","mousePressed","resize","jsx","Fragment","Basic"],"mappings":"ssBAIA,MAAAA,EAAe,IAAM,CACb,MAAAC,EAASC,cAAaC,GAAU,CAIpC,IAAIC,EAAkB,CAAC,EACnBC,EACAC,EAEJ,MAAMC,EAAQ,IAAM,CAClBJ,EAAE,aAAaA,EAAE,YAAc,EAAG,GAAG,EAE7BC,EAAA,MAAM,KAAK,CAAE,OAAQ,IAAkB,CAACI,EAAGC,IAAMA,CAAC,EAC1DJ,EAAYF,EAAE,MAAQ,EACtBG,EAAaH,EAAE,OAAS,EACXO,EAAA,CACf,EAEMA,EAAe,IAAM,CAEzB,QAASD,EAAIL,EAAM,OAAS,EAAGK,EAAI,EAAGA,IAAK,CACzC,MAAME,EAAI,KAAK,MAAMR,EAAE,OAAOM,EAAI,CAAC,CAAC,EACpC,CAACL,EAAMK,CAAC,EAAGL,EAAMO,CAAC,CAAC,EAAI,CAACP,EAAMO,CAAC,EAAGP,EAAMK,CAAC,CAAC,CAAA,CAE9C,EAEMG,EAAO,IAAM,CACjBT,EAAE,WAAW,GAAG,EAGhB,QAASU,EAAM,EAAGA,EAAM,EAAMA,IAC5B,QAASC,EAAM,EAAGA,EAAM,EAAMA,IAAO,CACnC,MAAMC,EAAID,EAAMT,EACVW,EAAIH,EAAMP,EACVW,EAAQJ,EAAM,EAAOC,EAG3BX,EAAE,OAAO,CAAC,EACVA,EAAE,OAAO,EACTA,EAAE,KAAKY,EAAGC,EAAGX,EAAWC,CAAU,EAGlCH,EAAE,KAAK,CAAC,EACRA,EAAE,SAAS,EACXA,EAAE,UAAUA,EAAE,OAAQA,EAAE,MAAM,EAC5BA,EAAA,KAAKC,EAAMa,CAAK,EAAI,EAAGF,EAAIV,EAAY,EAAGW,EAAIV,EAAa,CAAC,CAAA,CAGpE,EAEMY,EAAe,IAAM,CACZR,EAAA,CACf,EAEMS,EAAS,IAAM,CACnBhB,EAAE,aAAaA,EAAE,YAAc,EAAG,GAAG,EACrCE,EAAYF,EAAE,MAAQ,EACtBG,EAAaH,EAAE,OAAS,CAC1B,EAEAA,EAAE,MAAQI,EACVJ,EAAE,KAAOS,EACTT,EAAE,aAAee,EACjBf,EAAE,cAAgBgB,CACpB,EAAG,EAAE,EAEL,OAEIC,EAAA,IAAAC,EAAA,SAAA,CAAA,SAAAD,EAAA,IAACE,EAAM,CAAA,OAAArB,CAAgB,CAAA,EACzB,CAEJ"}
{"version":3,"file":"RandomnessG.D8EU_Ssw.js","sources":["../../node_modules/.pnpm/@codemirror+theme-one-dark@6.1.2/node_modules/@codemirror/theme-one-dark/dist/index.js","../../src/components/react/p5/Randomness/RandomnessG.tsx"],"sourcesContent":["import { EditorView } from '@codemirror/view';\nimport { HighlightStyle, syntaxHighlighting } from '@codemirror/language';\nimport { tags } from '@lezer/highlight';\n\n// Using https://github.com/one-dark/vscode-one-dark-theme/ as reference for the colors\nconst chalky = \"#e5c07b\", coral = \"#e06c75\", cyan = \"#56b6c2\", invalid = \"#ffffff\", ivory = \"#abb2bf\", stone = \"#7d8799\", // Brightened compared to original to increase contrast\nmalibu = \"#61afef\", sage = \"#98c379\", whiskey = \"#d19a66\", violet = \"#c678dd\", darkBackground = \"#21252b\", highlightBackground = \"#2c313a\", background = \"#282c34\", tooltipBackground = \"#353a42\", selection = \"#3E4451\", cursor = \"#528bff\";\n/**\nThe colors used in the theme, as CSS color strings.\n*/\nconst color = {\n    chalky,\n    coral,\n    cyan,\n    invalid,\n    ivory,\n    stone,\n    malibu,\n    sage,\n    whiskey,\n    violet,\n    darkBackground,\n    highlightBackground,\n    background,\n    tooltipBackground,\n    selection,\n    cursor\n};\n/**\nThe editor theme styles for One Dark.\n*/\nconst oneDarkTheme = /*@__PURE__*/EditorView.theme({\n    \"&\": {\n        color: ivory,\n        backgroundColor: background\n    },\n    \".cm-content\": {\n        caretColor: cursor\n    },\n    \".cm-cursor, .cm-dropCursor\": { borderLeftColor: cursor },\n    \"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection\": { backgroundColor: selection },\n    \".cm-panels\": { backgroundColor: darkBackground, color: ivory },\n    \".cm-panels.cm-panels-top\": { borderBottom: \"2px solid black\" },\n    \".cm-panels.cm-panels-bottom\": { borderTop: \"2px solid black\" },\n    \".cm-searchMatch\": {\n        backgroundColor: \"#72a1ff59\",\n        outline: \"1px solid #457dff\"\n    },\n    \".cm-searchMatch.cm-searchMatch-selected\": {\n        backgroundColor: \"#6199ff2f\"\n    },\n    \".cm-activeLine\": { backgroundColor: \"#6699ff0b\" },\n    \".cm-selectionMatch\": { backgroundColor: \"#aafe661a\" },\n    \"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket\": {\n        backgroundColor: \"#bad0f847\"\n    },\n    \".cm-gutters\": {\n        backgroundColor: background,\n        color: stone,\n        border: \"none\"\n    },\n    \".cm-activeLineGutter\": {\n        backgroundColor: highlightBackground\n    },\n    \".cm-foldPlaceholder\": {\n        backgroundColor: \"transparent\",\n        border: \"none\",\n        color: \"#ddd\"\n    },\n    \".cm-tooltip\": {\n        border: \"none\",\n        backgroundColor: tooltipBackground\n    },\n    \".cm-tooltip .cm-tooltip-arrow:before\": {\n        borderTopColor: \"transparent\",\n        borderBottomColor: \"transparent\"\n    },\n    \".cm-tooltip .cm-tooltip-arrow:after\": {\n        borderTopColor: tooltipBackground,\n        borderBottomColor: tooltipBackground\n    },\n    \".cm-tooltip-autocomplete\": {\n        \"& > ul > li[aria-selected]\": {\n            backgroundColor: highlightBackground,\n            color: ivory\n        }\n    }\n}, { dark: true });\n/**\nThe highlighting style for code in the One Dark theme.\n*/\nconst oneDarkHighlightStyle = /*@__PURE__*/HighlightStyle.define([\n    { tag: tags.keyword,\n        color: violet },\n    { tag: [tags.name, tags.deleted, tags.character, tags.propertyName, tags.macroName],\n        color: coral },\n    { tag: [/*@__PURE__*/tags.function(tags.variableName), tags.labelName],\n        color: malibu },\n    { tag: [tags.color, /*@__PURE__*/tags.constant(tags.name), /*@__PURE__*/tags.standard(tags.name)],\n        color: whiskey },\n    { tag: [/*@__PURE__*/tags.definition(tags.name), tags.separator],\n        color: ivory },\n    { tag: [tags.typeName, tags.className, tags.number, tags.changed, tags.annotation, tags.modifier, tags.self, tags.namespace],\n        color: chalky },\n    { tag: [tags.operator, tags.operatorKeyword, tags.url, tags.escape, tags.regexp, tags.link, /*@__PURE__*/tags.special(tags.string)],\n        color: cyan },\n    { tag: [tags.meta, tags.comment],\n        color: stone },\n    { tag: tags.strong,\n        fontWeight: \"bold\" },\n    { tag: tags.emphasis,\n        fontStyle: \"italic\" },\n    { tag: tags.strikethrough,\n        textDecoration: \"line-through\" },\n    { tag: tags.link,\n        color: stone,\n        textDecoration: \"underline\" },\n    { tag: tags.heading,\n        fontWeight: \"bold\",\n        color: coral },\n    { tag: [tags.atom, tags.bool, /*@__PURE__*/tags.special(tags.variableName)],\n        color: whiskey },\n    { tag: [tags.processingInstruction, tags.string, tags.inserted],\n        color: sage },\n    { tag: tags.invalid,\n        color: invalid },\n]);\n/**\nExtension to enable the One Dark theme (both the editor theme and\nthe highlight style).\n*/\nconst oneDark = [oneDarkTheme, /*@__PURE__*/syntaxHighlighting(oneDarkHighlightStyle)];\n\nexport { color, oneDark, oneDarkHighlightStyle, oneDarkTheme };\n","import type p5 from \"p5\";\nimport Basic from \"@components/react/p5/index.tsx\";\nimport { useCallback, useEffect, useRef, useState } from \"react\";\nimport { useDebounce } from \"@uidotdev/usehooks\";\nimport { EditorView, basicSetup } from \"codemirror\";\nimport { javascript } from \"@codemirror/lang-javascript\";\nimport { oneDark } from \"@codemirror/theme-one-dark\";\nimport { defaultKeymap } from \"@codemirror/commands\";\nimport { keymap } from \"@codemirror/view\";\n\nexport default () => {\n  const [xoffRate, setXoffRate] = useState(0.01);\n  const maxRange = useState(0.1);\n  const editor = useRef<HTMLDivElement>(null);\n  const debouncedXoffRate = useDebounce(xoffRate, 300);\n  let editorInstance: EditorView | undefined;\n\n  const sketch = useCallback(\n    (p: p5) => {\n      const setup = () => {\n        p.createCanvas(p.windowWidth / 2, 240);\n        p.loadPixels();\n        //之前把这个O(n^2)放在时钟函数里简直逆哒天，我说怎么不对劲\n        let xoff = 0.0;\n        for (let x = 0; x < p.width; x++) {\n          let yoff = 0.0;\n          for (let y = 0; y < p.height; y++) {\n            const bright = p.map(\n              p.noise(xoff, yoff, p.frameCount * 0.009),\n              0,\n              1,\n              0,\n              255\n            );\n            const n = p.floor(bright);\n            p.set(x, y, [n, n, n, n]);\n            yoff += 0.01;\n          }\n          xoff += debouncedXoffRate;\n        }\n      };\n      const draw = () => {\n        p.updatePixels();\n      };\n      const resize = () => {\n        p.resizeCanvas(p.windowWidth / 2, 240);\n      };\n      p.setup = setup;\n      p.draw = draw;\n      p.windowResized = resize;\n    },\n    [debouncedXoffRate]\n  );\n\n  useEffect(() => {\n    editorInstance?.destroy();\n    editor.current.innerHTML = \"\";\n\n    const doc = ` const draw = () => {\n            p.loadPixels();\n            let xoff = 0.0;\n            for (let x = 0; x < p.width; x++) {\n                let yoff = 0.0;\n                for (let y = 0; y < p.height; y++) {\n                    const bright = p.map(\n                        p.noise(xoff, yoff, p.frameCount * 0.009),\n                        0,\n                        1,\n                        0,\n                        255\n                    );\n                    const n = p.floor(bright);\n                    p.set(x, y, [n, n, n, n]);\n                    yoff += 0.01;\n                }\n                xoff += ${debouncedXoffRate}; //配置项\n            }\n            p.updatePixels();\n        };`;\n\n    editorInstance = new EditorView({\n      doc,\n      extensions: [\n        basicSetup,\n        javascript({ jsx: true, typescript: true }),\n        oneDark,\n        keymap.of(defaultKeymap),\n      ],\n      parent: editor.current,\n    });\n  }, [debouncedXoffRate]);\n\n  const handleSliderChange = (val: string) => {\n    setXoffRate(parseFloat(val));\n  };\n\n  return (\n    <>\n      <div className=\"gap-4 randomG\">\n        <Basic sketch={sketch} showControls></Basic>\n\n        <div className=\"flex items-center text-nowrap gap-4\">\n          <span>xoffRate:{debouncedXoffRate}</span>\n          <input\n            type=\"range\"\n            max={maxRange[0]}\n            className=\"transparent h-[4px] w-full cursor-pointer appearance-none border-transparent bg-neutral-200 dark:bg-neutral-600\"\n            value={xoffRate}\n            title={`${xoffRate}`}\n            step={0.01}\n            onChange={e => handleSliderChange(e.target.value)}\n          />\n        </div>\n\n        <div className=\"editor mt-4\" ref={editor}></div>\n      </div>\n    </>\n  );\n};\n"],"names":["chalky","coral","cyan","invalid","ivory","stone","malibu","sage","whiskey","violet","darkBackground","highlightBackground","background","tooltipBackground","selection","cursor","oneDarkTheme","EditorView","oneDarkHighlightStyle","HighlightStyle","tags","oneDark","syntaxHighlighting","RandomnessG","xoffRate","setXoffRate","useState","maxRange","editor","useRef","debouncedXoffRate","useDebounce","editorInstance","sketch","useCallback","p","setup","xoff","x","yoff","y","bright","n","draw","resize","useEffect","doc","basicSetup","javascript","keymap","defaultKeymap","handleSliderChange","val","jsx","Fragment","jsxs","Basic"],"mappings":"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","x_google_ignoreList":[0]}
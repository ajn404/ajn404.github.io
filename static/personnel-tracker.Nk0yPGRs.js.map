{"version":3,"file":"personnel-tracker.Nk0yPGRs.js","sources":["../../src/components/react/cesium/personnel-tracker.tsx"],"sourcesContent":["import { useEffect, useRef } from \"react\";\nimport { Viewer, Entity, Cartesian3, Color } from \"cesium\";\nimport { Ion } from \"cesium\";\nimport \"cesium/Build/Cesium/Widgets/widgets.css\";\n\n// Make sure to set your Cesium ion access token\nIon.defaultAccessToken =\n    \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIwOWRkMzFlYS0yMDVhLTRkNzYtYWJmMC1hMmE1NjljN2MyNjMiLCJpZCI6NzMzNDQsImlhdCI6MTYzNjgxNDEzNX0.Q2MfD_lkQgsJ-R3NPfYjS9QA9q_j4Py8DktYKsPmZNg\";\n\nexport default function PersonnelTracker() {\n    const cesiumContainer = useRef(null);\n    const viewerRef = useRef(null);\n\n    useEffect(() => {\n\n\n        if (cesiumContainer.current && !viewerRef.current) {\n            viewerRef.current = new Viewer(cesiumContainer.current, {\n                terrainProvider: undefined, // We'll use the default ellipsoid\n                baseLayerPicker: false,\n                geocoder: false,\n                homeButton: false,\n                sceneModePicker: false,\n                navigationHelpButton: false,\n                animation: false,\n                timeline: false,\n                fullscreenButton: false,\n            });\n            const viewer = viewerRef.current;\n\n            //@ts-ignore\n            viewer._cesiumWidget._creditContainer.parentNode.removeChild(\n                //@ts-ignore\n                viewer._cesiumWidget._creditContainer\n            );\n            const personnelPosition = Cartesian3.fromDegrees(-75.59777, 40.03883);\n            const entity = new Entity({\n                position: personnelPosition,\n                point: {\n                    pixelSize: 10,\n                    color: Color.RED,\n                },\n                label: {\n                    text: \"Personnel 1\",\n                    font: \"14pt sans-serif\",\n                    horizontalOrigin: 0, // LEFT\n                    verticalOrigin: 1, // BOTTOM\n                    pixelOffset: new Cartesian3(5, 5, 10),\n                },\n            });\n\n            viewerRef.current.entities.add(entity);\n\n            viewerRef.current.camera.flyTo({\n                destination: Cartesian3.fromDegrees(-75.59777, 40.03883, 1000),\n            });\n        }\n\n        const handleWheel = event => {\n            //阻止冒泡\n            event.stopPropagation();\n        };\n\n        const containerElement = cesiumContainer.current;\n        containerElement.addEventListener(\"wheel\", handleWheel);\n\n        return () => {\n            if (viewerRef.current) {\n                viewerRef.current.destroy();\n            }\n        };\n    }, []);\n\n    return (\n        <div\n            onDoubleClick={() => {\n                if (cesiumContainer) {\n                    if (document.fullscreenElement) document.exitFullscreen();\n                    else cesiumContainer.current.requestFullscreen();\n                }\n            }}\n            ref={cesiumContainer}\n            style={{ width: \"100%\", height: \"500px\", userSelect: \"none\" }}\n        />\n    );\n}\n"],"names":["Ion","PersonnelTracker","cesiumContainer","useRef","viewerRef","useEffect","Viewer","viewer","personnelPosition","Cartesian3","entity","Entity","Color","handleWheel","event","jsx"],"mappings":"mnBAMAA,EAAI,mBACA,uLAEJ,SAAwBC,GAAmB,CACjC,MAAAC,EAAkBC,SAAO,IAAI,EAC7BC,EAAYD,SAAO,IAAI,EAE7BE,OAAAA,EAAAA,UAAU,IAAM,CAGZ,GAAIH,EAAgB,SAAW,CAACE,EAAU,QAAS,CAC/CA,EAAU,QAAU,IAAIE,EAAOJ,EAAgB,QAAS,CACpD,gBAAiB,OACjB,gBAAiB,GACjB,SAAU,GACV,WAAY,GACZ,gBAAiB,GACjB,qBAAsB,GACtB,UAAW,GACX,SAAU,GACV,iBAAkB,EAAA,CACrB,EACD,MAAMK,EAASH,EAAU,QAGlBG,EAAA,cAAc,iBAAiB,WAAW,YAE7CA,EAAO,cAAc,gBACzB,EACA,MAAMC,EAAoBC,EAAW,YAAY,UAAW,QAAQ,EAC9DC,EAAS,IAAIC,EAAO,CACtB,SAAUH,EACV,MAAO,CACH,UAAW,GACX,MAAOI,EAAM,GACjB,EACA,MAAO,CACH,KAAM,cACN,KAAM,kBACN,iBAAkB,EAClB,eAAgB,EAChB,YAAa,IAAIH,EAAW,EAAG,EAAG,EAAE,CAAA,CACxC,CACH,EAESL,EAAA,QAAQ,SAAS,IAAIM,CAAM,EAE3BN,EAAA,QAAQ,OAAO,MAAM,CAC3B,YAAaK,EAAW,YAAY,UAAW,SAAU,GAAI,CAAA,CAChE,CAAA,CAGL,MAAMI,EAAuBC,GAAA,CAEzBA,EAAM,gBAAgB,CAC1B,EAGiB,OADQZ,EAAgB,QACxB,iBAAiB,QAASW,CAAW,EAE/C,IAAM,CACLT,EAAU,SACVA,EAAU,QAAQ,QAAQ,CAElC,CACJ,EAAG,EAAE,EAGDW,EAAA,IAAC,MAAA,CACG,cAAe,IAAM,CACbb,IACI,SAAS,kBAAmB,SAAS,eAAe,EACnDA,EAAgB,QAAQ,kBAAkB,EAEvD,EACA,IAAKA,EACL,MAAO,CAAE,MAAO,OAAQ,OAAQ,QAAS,WAAY,MAAO,CAAA,CAChE,CAER"}
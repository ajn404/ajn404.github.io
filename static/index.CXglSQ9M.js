import{r as s}from"./index.D4IXJ7me.js";import{P as S,b as D,d as k,u as A}from"./index.DSKVgZYz.js";import{u as N}from"./index.CEsCW6vM.js";import{j as x}from"./jsx-runtime.DZ3s2XAB.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},e=new t.Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="e10f12c6-c368-4e39-a41e-5c0ea4325e64",t._sentryDebugIdIdentifier="sentry-dbid-e10f12c6-c368-4e39-a41e-5c0ea4325e64")}catch{}})();function w(t){const e=s.useRef(t);return s.useEffect(()=>{e.current=t}),s.useMemo(()=>(...n)=>e.current?.(...n),[])}function j(t,e=globalThis?.document){const n=w(t);s.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var z="DismissableLayer",P="dismissableLayer.update",H="dismissableLayer.pointerDownOutside",K="dismissableLayer.focusOutside",I,F=s.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),V=s.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:a,onInteractOutside:E,onDismiss:l,...d}=t,i=s.useContext(F),[c,y]=s.useState(null),f=c?.ownerDocument??globalThis?.document,[,m]=s.useState({}),b=N(e,u=>y(u)),v=Array.from(i.layers),[O]=[...i.layersWithOutsidePointerEventsDisabled].slice(-1),W=v.indexOf(O),L=c?v.indexOf(c):-1,_=i.layersWithOutsidePointerEventsDisabled.size>0,R=L>=W,B=q(u=>{const p=u.target,T=[...i.branches].some(g=>g.contains(p));!R||T||(o?.(u),E?.(u),u.defaultPrevented||l?.())},f),C=G(u=>{const p=u.target;[...i.branches].some(g=>g.contains(p))||(a?.(u),E?.(u),u.defaultPrevented||l?.())},f);return j(u=>{L===i.layers.size-1&&(r?.(u),!u.defaultPrevented&&l&&(u.preventDefault(),l()))},f),s.useEffect(()=>{if(c)return n&&(i.layersWithOutsidePointerEventsDisabled.size===0&&(I=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),i.layersWithOutsidePointerEventsDisabled.add(c)),i.layers.add(c),M(),()=>{n&&i.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=I)}},[c,f,n,i]),s.useEffect(()=>()=>{c&&(i.layers.delete(c),i.layersWithOutsidePointerEventsDisabled.delete(c),M())},[c,i]),s.useEffect(()=>{const u=()=>m({});return document.addEventListener(P,u),()=>document.removeEventListener(P,u)},[]),x.jsx(S.div,{...d,ref:b,style:{pointerEvents:_?R?"auto":"none":void 0,...t.style},onFocusCapture:D(t.onFocusCapture,C.onFocusCapture),onBlurCapture:D(t.onBlurCapture,C.onBlurCapture),onPointerDownCapture:D(t.onPointerDownCapture,B.onPointerDownCapture)})});V.displayName=z;var X="DismissableLayerBranch",Y=s.forwardRef((t,e)=>{const n=s.useContext(F),r=s.useRef(null),o=N(e,r);return s.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),x.jsx(S.div,{...t,ref:o})});Y.displayName=X;function q(t,e=globalThis?.document){const n=w(t),r=s.useRef(!1),o=s.useRef(()=>{});return s.useEffect(()=>{const a=l=>{if(l.target&&!r.current){let d=function(){U(H,n,i,{discrete:!0})};const i={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=d,e.addEventListener("click",o.current,{once:!0})):d()}else e.removeEventListener("click",o.current);r.current=!1},E=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(E),e.removeEventListener("pointerdown",a),e.removeEventListener("click",o.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function G(t,e=globalThis?.document){const n=w(t),r=s.useRef(!1);return s.useEffect(()=>{const o=a=>{a.target&&!r.current&&U(K,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function M(){const t=new CustomEvent(P);document.dispatchEvent(t)}function U(t,e,n,{discrete:r}){const o=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),r?k(o,a):o.dispatchEvent(a)}function J(t,e){return s.useReducer((n,r)=>e[n][r]??n,t)}var Q=t=>{const{present:e,children:n}=t,r=Z(e),o=typeof n=="function"?n({present:r.isPresent}):s.Children.only(n),a=N(r.ref,$(o));return typeof n=="function"||r.isPresent?s.cloneElement(o,{ref:a}):null};Q.displayName="Presence";function Z(t){const[e,n]=s.useState(),r=s.useRef(null),o=s.useRef(t),a=s.useRef("none"),E=t?"mounted":"unmounted",[l,d]=J(E,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return s.useEffect(()=>{const i=h(r.current);a.current=l==="mounted"?i:"none"},[l]),A(()=>{const i=r.current,c=o.current;if(c!==t){const f=a.current,m=h(i);t?d("MOUNT"):m==="none"||i?.display==="none"?d("UNMOUNT"):d(c&&f!==m?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,d]),A(()=>{if(e){let i;const c=e.ownerDocument.defaultView??window,y=m=>{const v=h(r.current).includes(m.animationName);if(m.target===e&&v&&(d("ANIMATION_END"),!o.current)){const O=e.style.animationFillMode;e.style.animationFillMode="forwards",i=c.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=O)})}},f=m=>{m.target===e&&(a.current=h(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",y),e.addEventListener("animationend",y),()=>{c.clearTimeout(i),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",y),e.removeEventListener("animationend",y)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:s.useCallback(i=>{r.current=i?getComputedStyle(i):null,n(i)},[])}}function h(t){return t?.animationName||"none"}function $(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}export{V as D,Q as P,w as u};
//# sourceMappingURL=index.CXglSQ9M.js.map
